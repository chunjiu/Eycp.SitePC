define(["require","exports","module"],function(r,n,t){String.prototype.replaceWith=function(r){return this.replace(/%7B/gi,"{").replace(/%7D/gi,"}").replace(/\{\$(\w+)\}/g,function(n,t){return t in r?r[t]:n})},String.prototype.containsAndCount=function(r){for(var n=0,t=this.split(","),e=0;e<t.length;e++)t[e]==r&&(n+=1);return n},String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"xx").length},String.prototype.unique=function(){for(var r={},n=[],t=this.split(","),e=0;e<t.length;e++)r[t[e]]||(r[t[e]]=!0,n.push(t[e]));return n},Array.prototype.remove=function(r){if(isNaN(r)||r>this.length)return!1;for(var n=0,t=0;n<this.length;n++)this[n]!=this[r]&&(this[t++]=this[n]);this.length-=1},Array.prototype.contains=function(r){for(var n=0;n<this.length;n++)if(this[n]==r)return!0;return!1},Array.prototype.containsAndCount=function(r){for(var n=0,t=0;t<this.length;t++)this[t]==r&&(n+=1);return n},Array.prototype.unique=function(){for(var r={},n=[],t=0;t<this.length;t++)r[this[t]]||(r[this[t]]=!0,n.push(this[t]));return n},Array.prototype.sortJson=function(r,n){var t="asc"==r?">":"<",e=new Function("a","b","return a."+n+t+"b."+n+"?1:-1");return this.sort(e)},Array.prototype.extend=function(r){r.forEach(function(r){this.push(r)},this)},Array.prototype.forEach||(Array.prototype.forEach=function(r,n){var t,e;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("[object Function]"!={}.toString.call(r))throw new TypeError(r+" is not a function");for(n&&(t=n),e=0;e<o;){var u;e in i&&(u=i[e],r.call(t,u,e,i)),e++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r){var n=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=n);t<n;t++)if(t in this&&this[t]===r)return t;return-1});var e={bind:function(r,n){var t=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments),i=e.concat(t);return r.apply(n,i)}},format:function(r){var n=arguments;return(""+r).replace(/\{(?:(\d+)|(\w+))\}/g,function(r,t,e){return e&&n[1]?n[1][e]:n[t]})},substring:function(r,n){return null!=r&&r.length>0&&(r=r.replace(/<[^>]+>/g,""),r.length>n)?r.substring(0,n)+"..":r},substr:function(r,n){for(var t=0,e=0;e<r.length;e++){var i=r.charAt(e);if(encodeURI(i).length>2?t+=1:t+=.5,t>n){var o=t==n?e+1:e;return r.substr(0,o)+".."}}return r},replace:function(r,n,t){var e=new RegExp(n,"g");return words=r.replace(e,t),words},IsIE:function(){var r=navigator.userAgent,n=r.indexOf("Opera")>-1,t=r.indexOf("compatible")>-1&&r.indexOf("MSIE")>-1&&!n,e=r.indexOf("Edge")>-1,i=r.indexOf("Firefox")>-1,o=r.indexOf("Safari")>-1&&-1==r.indexOf("Chrome"),u=r.indexOf("Chrome")>-1&&r.indexOf("Safari")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(r);var a=parseFloat(RegExp.$1);return 7==a?"IE7":8==a?"IE8":9==a?"IE9":10==a?"IE10":11==a?"IE11":"IE7以下"}return i?"FF":n?"Opera":e?"Edge":o?"Safari":u?"Chrome":void 0},convertToChinese:function(r){for(var n=["零","一","二","三","四","五","六","七","八","九"],t=r.toString(),e=r.toString().length,i=[],o=0;o<e;o++)i.push(n[t.charAt(o)]);return i.join("")},sliceArr:function(r,n){for(var t=[],e=0;e<Math.ceil(r.length/n);e++){var i=e*n,o=i+n;t.push(r.slice(i,o))}return t},initArray:function(r){for(var n=new Array,t=r-1;t>=0;t--)n.push(0);return n},intArr:function(r){for(var n=[],t=0;t<r.length;t++)n.push(parseInt(r[t]));return n},isPrime:function(r){if("number"!=typeof(r=parseInt(r)))return console.error(this.format("被判断值{1}非数字",r)),!1;if(r<=3)return!0;for(var n=2;n<=Math.sqrt(r);n++)if(r%n==0)return!1;return!0},isSscPrime:function(r){if("number"!=typeof(r=parseInt(r)))return console.error(this.format("被判断值{1}非数字",r)),!1;if(r>0&&r<=3)return!0;if(0==r)return!1;for(var n=2;n<=Math.sqrt(r);n++)if(r%n==0)return!1;return!0},isEvenOdd:function(r){return r=parseInt(r),"number"!=typeof r?(console.error(this.format("被判断值{1}非数字",r)),!1):r%2==0},isBigSmall:function(r,n){return r=parseInt(r),n=parseInt(n),"number"!=typeof r||"number"!=typeof n?(console.error(this.format("比较与被比较值{1}-{2}含非数字",r,n)),!1):r>=n},is012:function(r){return r=parseInt(r),"number"!=typeof r?(console.error(this.format("被判断值{1}非数字",r)),null):r%3},isSortEquals:function(r,n){return r=parseInt(r),"number"!=typeof r||"number"!=typeof n?(console.error(this.format("比较与被比较值{1}-{2}含非数字",r,n)),""):r>n?2:r==n?1:0},primeEnd:function(r){var n=this.initArray(2),t=this;return t.each(r,function(r){r=parseInt(r%10),t.isPrime(r)?n[0]+=1:n[1]+=1}),n},evenOddEnd:function(r){var n=this.initArray(2),t=this;return t.each(r,function(r){r=parseInt(r%10),t.isEvenOdd(r)?n[1]+=1:n[0]+=1}),n},bigSmallEnd:function(r,n){var t=this.initArray(2),e=this;return e.each(r,function(r){r=parseInt(r%10),e.isBigSmall(r,n)?t[0]+=1:t[1]+=1}),t},end012End:function(r){var n=this.initArray(3),t=this;return t.each(r,function(r){r=parseInt(r%10),n[t.is012(r)]+=1}),n},ratioPrime:function(r){var n=this.initArray(2),t=this;return t.each(r,function(r){t.isPrime(r)?n[0]+=1:n[1]+=1}),n.join(":")},ratioEvenOdd:function(r){var n=this.initArray(2),t=this;return t.each(r,function(r){t.isEvenOdd(r)?n[1]+=1:n[0]+=1}),n.join(":")},ratioBigSmall:function(r,n){var t=this.initArray(2),e=this;return e.each(r,function(r){e.isBigSmall(r,n)?t[0]+=1:t[1]+=1}),t.join(":")},ratio012:function(r){var n=this.initArray(3),t=this;return t.each(r,function(r){n[t.is012(r)]+=1}),n.join(":")},ratioSortEquals:function(r,n){if(r.length!=n.length)return null;var t=this.initArray(r.length),e=this;return e.each(r,function(r,i){t[e.isSortEquals(r,n[i])]+=1}),t.join(":")},ratioInterval:function(r,n){var t=this.initArray(n.length),e=this;return e.each(r,function(r){e.each(n,function(e,i){if(i>0){if(r<=e&&r>n[i-1])return void(t[i]+=1)}else if(r<=e)return void(t[i]+=1)})}),t.join(":")},modePrime:function(r){var n=new Array,t=this;return t.each(r,function(r){t.isPrime(r)?n.push("质"):n.push("合")}),n},anotherModePrime:function(r){var n=new Array,t=this;return t.each(r,function(r){t.isSscPrime(r)?n.push("质"):n.push("合")}),n},modeEvenOdd:function(r){var n=new Array,t=this;return t.each(r,function(r){t.isEvenOdd(r)?n.push("偶"):n.push("奇")}),n},modeBigSmall:function(r,n){var t=new Array,e=this;return e.each(r,function(r){e.isBigSmall(r,n)?t.push("大"):t.push("小")}),t},mode012:function(r){var n=new Array,t=this;return t.each(r,function(r){n.push(t.is012(r))}),n},modeSortEquals:function(r,n){var t=new Array;if(r.length!=n.length)return t;var e=this,i=0;return e.each(r,function(r,o){i=e.isSortEquals(r,n[o]),t.push(2==i?"升":1==i?"平":"降")}),t},acValue:function(r){var n=new Array,t=0;if(0==r.length)return 0;var e=this;return e.each(r,function(i,o){e.each(r,function(e,i){0==(t=Math.abs(r[o]-r[i]))||n.contains(t)||n.push(t)})}),n.length-r.length+1},spanNumber:function(r){return this.maxArr(r)-this.minArr(r)},sameGroupsCount:function(r){return r.length-this.unique(r).length},sameJoinGroupsCount:function(r,n){return this.intersect(r,n).length},joinGroupsCount:function(r){r=this.sort(r);for(var n=0,t=0,e=r.length,i=1;i<e;i++)1==Math.abs(r[i]-r[i-1])?n+=1:(n>=1&&(t+=1),n=0),n>=1&&i+1==e&&(t+=1);return t},joinTwoGroupsCount:function(r){r=this.sort(r);for(var n=0,t=1;t<r.length;t++)1==Math.abs(r[t]-r[t-1])&&(n+=1);return n},joinMaxCount:function(r){r=this.sort(r);for(var n=0,t=0,e=r.length,i=1;i<e;i++)1==Math.abs(r[i]-r[i-1])?n+=1:(n>=1&&(t+=n),n=0),n>=1&&i+1==e&&(t+=n);return t},joinleftGroupsCount:function(r,n,t){t||(t=1),r=this.sort(r),n=this.sort(n);for(var e=0,i=0;i<r.length;i++)for(var o=0;o<n.length;o++)Math.abs(r[i]-n[o])==t&&(e+=1);return e},maxArr:function(r){return Math.max.apply(null,r)},minArr:function(r){return Math.min.apply(null,r)},sumArr:function(r){return r.reduce(function(r,n){return parseInt(r)+parseInt(n)})},sumEnd:function(r){return"number"!=typeof r&&(r=parseInt(r)),parseInt(r%10)},avgArr:function(r){return this.sumArr(r)/r.length},contains:function(r,n){return-1!=r.indexOf(n)},each:function(r,n){n=n||Function;for(var t=[],e=Array.prototype.slice.call(arguments,1),i=0;i<r.length;i++){var o=n.apply(r,[r[i],i].concat(e));null!=o&&t.push(o)}},map:function(r,n,t){for(var e=t||window,i=[],o=0,u=r.length;o<u;++o){var a=n.call(e,r[o],o,this);null!=a&&i.push(a)}return i},sort:function(r,n){return n||(n=1),r.sort(function(t,e){switch(n){case 1:return t-e;case 2:return e-t;case 3:return Math.random()-.5;default:return r}})},unique:function(r){if(Array.hasOwnProperty("from"))return Array.from(new Set(r));for(var n={},t=[],e=0;e<r.length;e++)n[r[e]]||(n[r[e]]=!0,t.push(r[e]));return t},union:function(r,n){var t=r.concat(n);return this.unique(t)},intersect:function(r,n){var t=this;return r=this.unique(r),this.map(r,function(r){return t.contains(n,r)?r:null})},setAlphaOpacity:function(r,n){r="string"==typeof r?document.getElementById(r):r,document.all?r.style.filter="alpha(opacity="+n+")":r.style.opacity=n/100},queryToJson:function(r){for(var n,t,e,i,o=r.substr(r.indexOf("?")+1),u=o.split("&"),a=u.length,s={},c=0;c<a;c++)i=u[c].split("="),n=i[0],t=i[1],e=s[n],void 0===e?s[n]=t:"[object Array]"==Object.prototype.toString.call(e)?e.push(t):s[n]=[e,t];return s},htmlEnCode:function(r){var n="";return 0==r.length?"":(n=r.replace(/&/g,"&gt;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),n=n.replace(/    /g,"&nbsp;"),n=n.replace(/\'/g,"&#39;"),n=n.replace(/\"/g,"&quot;"),n=n.replace(/\n/g,"<br>"))},htmlDeCode:function(r){var n="";return 0==r.length?"":(n=r.replace(/&gt;/g,"&"),n=n.replace(/&lt;/g,"<"),n=n.replace(/&gt;/g,">"),n=n.replace(/&nbsp;/g,"    "),n=n.replace(/&#39;/g,"'"),n=n.replace(/&quot;/g,'"'),n=n.replace(/<br>/g,"\n"))}};t.exports=e});