define(["underscore","jquery","String","Date","backbone","../../../services/event.service"],function(i,t,e,n,d,o){return d.View.extend({el:"#videoList",id:"#videoList",btnL:"#btnL",btnR:"#btnR",events:{"click #btnL":"handleClickBtnL","click #btnR":"handleClickBtnR"},initialize:function(){var i=this;i.lock=!1,i.countDown(),o.on("changeLottery_VideoListComponent",function(t){i.update(t.code,t.result)}),o.on("appendVideo_VideoListComponent",function(t){i.appendVideo(t)})},appendVideo:function(i){var e=this;if(void 0==i)return void console.error("更新插入的视频模块为空！");t(e.id).find("li").each(function(n,d){return n<=2&&(t(d).attr("data-code")==i.lotteryCode?(t(d).html(i.resultHtml),e.lock=!1,!1):void 0)})},update:function(i,e){t(this.id).find("li").each(function(n,d){if(t(d).attr("data-code")==i)return t(d).find(".issue").html(e.next.period+"期"),t(d).find(".countDownTime").attr("data-time",e.awardTimeInterval),!1})},countDown:function(){var i=this;window.setInterval(function(){t(i.id).find("li").each(function(i,e){if(!(i<=2))return!1;var n=t(e).find(".countDownTime"),d=parseFloat(n.attr("data-time"));if(d<=0)n.attr("data-time",0),n.html("00:00"),t(e).find(".textBtn").hide(),t(e).find(".timeText").show(),window.setTimeout(function(){o.emit("getAwardTime_videoListComponent",t(e).attr("data-code"))},3e3);else if(t(e).find(".textBtn").show(),t(e).find(".timeText").hide(),""!=n.attr("data-time")){d--,n.attr("data-time",d);var a=(""+d).SecondsToddhhmmss().split(":");n.html(a[2]+":"+a[3])}})},1e3)},handleClickBtnL:function(){var i=this;if(1!=i.lock){i.lock=!0;var e=t(i.id).find("li").eq(0).outerWidth(),n=t(i.id).find("li").length,d=t(i.id).find("li").eq(n-1);t(i.id).find("li").eq(n-1).remove(),t(i.id).find("ul").prepend(d),t(i.id).find("li").eq(0).css({"margin-left":-e}),t(i.id).find("li").eq(0).stop(!0,!1).animate({"margin-left":0},300,function(){t(i.id).find("li").each(function(i,e){i<=2?t(e).addClass("active"):(t(e).removeAttr("style"),t(e).removeClass("active"),t(e).find(".countDownTime").html("00:00"),t(e).find(".countDownTime").attr("data-time",""),t(e).find(".issue").html("---期"),t(e).find(".textBtn").show(),t(e).find(".timeText").hide())}),o.emit("requestVideo_VideoListComponent",t(i.id).find("li").eq(0).attr("data-code"))})}},handleClickBtnR:function(){var i=this;if(1!=i.lock){i.lock=!0;var e=t(i.id).find("li").eq(0).outerWidth();t(i.id).find("li").eq(0).stop(!0,!1).animate({"margin-left":-e},300,function(){var e=t(i.id).find("li").eq(0).removeAttr("style").removeClass("active");t(i.id).find("li").eq(0).remove(),t(i.id).find("ul").append(e),t(i.id).find("li").each(function(i,e){i<=2?t(e).addClass("active"):(t(e).removeClass("active"),t(e).find(".countDownTime").html("00:00"),t(e).find(".countDownTime").attr("data-time",""),t(e).find(".issue").html("---期"),t(e).find(".textBtn").show(),t(e).find(".timeText").hide())}),o.emit("requestVideo_VideoListComponent",t(i.id).find("li").eq(2).attr("data-code"))})}}})});