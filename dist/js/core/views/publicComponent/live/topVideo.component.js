define(["underscore","jquery","String","backbone","../../../services/event.service"],function(e,o,t,n,i){return n.View.extend({el:"#mainVideo",topVideo:"#topVideo",videoList:"#videoList",videoImg:"#videoImg",navVideoList:"#navVideoList",countDownTime:".countDownTime",textBtn:".textBtn",timeText:".timeText",events:{"mouseenter  #videoList li":"handleMouseEnter"},initialize:function(){var e=this;e.time=1e3,e.topLock=!1,e.navLock=!1,e.clearIntervalTop=0,e.clearIntervalNav=0,i.on("startCountDown_topVideoComponent",function(){e.countDown()}),i.on("startCountDownNav_topVideoComponent",function(){e.countDownNav()}),i.on("refresh_topVideoComponent",function(o){e.refresh(o.result,o.type)})},handleMouseEnter:function(e){var t=this,n=o(e.currentTarget),i=o(e.currentTarget).index();o(t.videoImg).find(".lis").hide(),o(t.videoList).find("li").removeClass("active"),o(t.videoImg).find(".lis").eq(i).show(),n.addClass("active")},refresh:function(e,t){var n=this;return void 0==e||""==e?void console.error("refresh: 返回的内容为空!"):void 0==t||"number"!=typeof t?void console.error("refresh: 渲染的类型不能为空!"):void(1==t?(o(n.topVideo).html(e.lotteryAwardList),n.topLock=!1,n.countDown()):0==t&&(o(n.navVideoList).html(e.navLotteryAwardList),n.navLock=!1,n.countDownNav()))},countDown:function(){var e=this,t=[],n=o(e.topVideo).find("li "+e.countDownTime);n.each(function(e,n){t.push(parseFloat(o(n).attr("data-time")))}),e.clearIntervalTop=window.setInterval(function(){n.each(function(e,n){t[e]--,"NaN:NaN"==(""+t[e]).SecondsTommss()?o(n).html("00:00"):o(n).html((""+t[e]).SecondsTommss()),o(n).attr("data-time",t[e])}),"00:00"==(""+t[0]).SecondsTommss()&&0==e.topLock&&(window.clearInterval(e.clearIntervalTop),t=[],i.emit("countDownSuccess_topVideoComponent"),e.topLock=!0)},e.time)},countDownNav:function(){var e=this,t=[],n=o(e.navVideoList).find("li "+e.countDownTime);n.each(function(e,n){t.push(parseFloat(o(n).attr("data-time")))}),e.clearIntervalNav=window.setInterval(function(){n.each(function(n,a){t[n]--,"NaN:NaN"==(""+t[n]).SecondsTommss()?o(a).html("00:00"):o(a).html((""+t[n]).SecondsTommss()),o(a).attr("data-time",t[n]),"00:00"==(""+t[3]).SecondsTommss()&&0==e.navLock&&(window.clearInterval(e.clearIntervalNav),t=[],i.emit("countDownSuccessNav_topVideoComponent"),e.navLock=!0)})},e.time)}})});