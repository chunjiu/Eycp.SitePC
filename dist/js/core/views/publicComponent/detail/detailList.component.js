define(["underscore","jquery","backbone","../../../services/event.service"],function(t,e,n,a){return n.View.extend({el:"#list",tableTable:"#list table",initialize:function(t,n){var l=this;l.lotteryCode=t,l.lotteryType=n,a.on("renderList_detailListComponent",function(t){t||console.warn("DetailListComponent: 返回的模版为空！"),"string"==typeof t?l.renderListHtml(t):"object"==typeof t&&l.isToday()&&l.appendLottery(t)}),a.on("updateAttribute_detailListComponent",function(t){t?e(l.el).attr("data-attribute",t):console.error("updateAttribute：开奖返回来得数据不正确！")}),a.on("loading_detailListComponent",function(){var t,n="";t=/kl8/.test(l.lotteryCode)?22:/k3/.test(l.lotteryCode)?4:3,n+='<tr><td colspan="'+t+'"><span class="wgt-loading3"><span class="loadingIcon"></span><span class="loadingFont">正在加载中...</span></span></td></tr>',e(l.tableTable).find("tbody tr").remove(),e(l.tableTable).find("tbody").append(n)}),a.on("isToday_detailListComponent",function(t){t(l.isToday())})},isToday:function(){var t=this;return e(t.el).attr("data-attribute")==e(t.el).attr("data-default")},appendHtml:function(t,e){var n=t.awardTime,a='<tr style="display: none;">';a+="<td>"+t.period+"期</td><td>"+n+"</td>";var l=t.result.split(",");if("k3"==e){a+="<td>";for(var r=0,i=0;i<l.length;i++)a+='<span class="public-number-'+e+'" style="position:relative; top:3px;">',l[i].length<=1&&parseInt(l[i])<10&&(l[i]="0"+l[i]),a+='<span class="num'+l[i]+'"></span>',a+="</span>",r+=parseInt(l[i]);a+='<span style="position:relative; top:-3px;">( '+t.result+" )</span></td><td>"+r+"</td>"}else for(var i=0;i<l.length;i++)a+='<td><div class="public-number-'+e+'">',l[i].length<=1&&parseInt(l[i])<10&&(l[i]="0"+l[i]),a+='<span class="num'+l[i]+'"></span>',a+="</div></td>";return a+="</tr>"},appendLottery:function(t){var n=this;if(t){var a=t.result,l="";if("bjpk10"==a.lotteryCode)l+=this.appendHtml(a,"pk10");else if("xync"==a.lotteryCode||"hnkl10"==a.lotteryCode){var r="xync";"hnkl10"==a.lotteryCode&&(r="zoology"),l+=this.appendHtml(a,r)}else a.lotteryCode.indexOf("k3")>=0?l+=this.appendHtml(a,"k3"):"bjkl8"==a.lotteryCode?l+='<tr style="display: none;"><td>'+a.period+"期</td>"+n.k8changeTable(a.result)+"</tr>":l+='<tr style="display: none;"><td>'+a.period+"期</td><td>"+a.awardTime+'</td><td><span class="ball_num">'+n.stringChangeBall(a.result)+"</span></td></tr>";e(n.tableTable).find("tbody").prepend(l),e(n.tableTable).find("tbody tr").eq(0).fadeIn(600)}},stringChangeBall:function(t){if(t){var e,n,a="";if(/\|/i.test(t)){e=t.split("|"),n=e[0].split(",");var l=[];if(n[0].length>0)for(var r=0;r<n.length;r++)a+='<i class="red">'+n[r]+"</i>";if(e[1]){l=e[1].split(",");for(var r=0;r<l.length;r++)a+='<i class="blue">'+n[r]+"</i>"}}else if(n=t.split(","),n[0].length>0)for(var r=0;r<n.length;r++)a+='<i class="red">'+n[r]+"</i>";return a}console.warn("stringChangeBall：参数为空，请注意！")},k8changeTable:function(t){if(t){var e,n,a="";if(e=t.split("|"),n=e[0].split(","),e[1]?a+="<td>X"+e[1]+"</td>":a+="<td></td>",n.length>0)for(var l=0;l<n.length;l++)a+="<td>"+n[l]+"</td>";return a}console.warn("stringChangeBall：参数为空，请注意！")},renderListHtml:function(t){var n,a=this;e(a.tableTable).find("tbody tr").remove(),n="kl8"==a.lotteryType?22:"k3"==a.lotteryType?4:3,t?e(a.tableTable).find("tbody").append(t):e(a.tableTable).find("tbody").append('<tr><td colspan="'+n+'">暂无任何数据！</td></tr>')}})});