define(["underscore","jquery","String","Date","backbone","../../../services/event.service"],function(e,i,n,a,t,d){return t.View.extend({el:"#banner",id:"#banner",page:"#page",events:{"click #page span":"handleCickPage",mouseenter:"handleMouseEnter",mouseleave:"handleMouseLeave"},initialize:function(e){var n=this;if(n.len=i(n.id).find("li").length,n.time=e,n.len>1){var a=i(n.id).find("li").eq(0).outerWidth();i(n.id).find("li").css({width:a,float:"left"}),i(n.id).find("ul").css({width:a*n.len}),n.addPage(n.len),n.startSwiper(n.time)}},handleMouseEnter:function(){var e=this;e.len>1&&window.clearInterval(e.clearInterval)},handleMouseLeave:function(){var e=this;e.len>1&&e.startSwiper(e.time)},startSwiper:function(){var e=this;e.clearInterval=window.setInterval(function(){e.swiperLeft()},e.time)},handleCickPage:function(e){var n=this,a=i(e.currentTarget);a.parent().find("span").removeClass("active"),a.addClass("active");var t=parseInt(i(n.id).find("li").eq(0).attr("data-index")),d=parseInt(a.attr("data-index"));if(d>t)var r=d-t,l=window.setInterval(function(){0==r?window.clearInterval(l):(r--,n.swiperLeft())},600);else var r=t-d,l=window.setInterval(function(){0==r?window.clearInterval(l):(r--,n.swiperRight())},600)},swiperLeft:function(){var e=this,n=i(e.id).find("li").eq(0).outerWidth();i(e.id).find("li").eq(0).stop(!0,!1).animate({"margin-left":-n},300,function(){var a=i(e.id).find("li").eq(0).removeAttr("style");i(e.id).find("li").eq(0).remove(),i(e.id).find("ul").append(a),i(e.id).find("li").css({width:n,float:"left"});var t=i(e.id).find("li").eq(0).attr("data-index");i(e.page).find("span").removeClass("active"),i(e.page).find("span").eq(t).addClass("active")})},swiperRight:function(){var e=this,n=i(e.id).find("li").eq(0).outerWidth(),a=(i(e.id).find("li").length,i(e.id).find("li:last-child"));i(e.id).find("li:last-child").remove(),i(e.id).find("ul").prepend(a),i(e.id).find("li:first-child").css({marginLeft:-n}),i(e.id).find("li:first-child").stop(!0,!1).animate({"margin-left":0},300,function(){i(e.id).find("li").removeAttr("style"),i(e.id).find("li").css({width:n,float:"left"});var a=i(e.id).find("li").eq(0).attr("data-index");i(e.page).find("span").removeClass("active"),i(e.page).find("span").eq(a).addClass("active")})},addPage:function(e){for(var n=this,a="",t=0;t<e;t++)a+=0==t?'<span class="active" data-index="'+t+'"></span>':'<span class="" data-index="'+t+'"></span>';i(n.page).append(a)}})});