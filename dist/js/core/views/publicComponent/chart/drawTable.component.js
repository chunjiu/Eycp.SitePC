define(["./baseExt.component"],function(_BaseExt){var _Object={};return _Object.addOne=0,_Object.tbodyOBject,_Object.drawColumn,_Object.theadColumn,_Object.renderTable=function(t,a,e,s,r,n,l){if(void 0==s)return void console.error("你都没配thead.config.js配置！！！！!");if(void 0==n)return void console.error("你都没配style.config.js配置！！！！!");if(void 0==r)return void console.error("请求肯定出问题啦～，都没数据源！！！，又或者是你dealWithData.container没有返回数据啦！！！！");var o=document.getElementById(t),d=_Object.getTheadTitle(s),i=_Object.renderTbody(r,d,n,s),c=i.html,u=i.drawColumn,m=_Object.getTheaderMaxColumn(_Object.renderThead(s));_Object.tbodyOBject=r,_Object.drawColumn=u,_Object.theadColumn=m;var b="";b=void 0==r.missBottomStatList?"<thead>"+_Object.renderThead(s)+'</thead><tbody class="trend">'+c+"</tbody>":"<thead>"+_Object.renderThead(s)+'</thead><tbody class="trend">'+c+'</tbody><tbody class="preselection"></tbody><tbody class="thead">'+_Object.renderThead(s,2)+'</tbody><tbody class="statistics">'+_Object.renderStatistics(d,r,n)+"</tbody>",o.innerHTML='<table cellpadding="0" cellspacing="0" border="1" width="100%" id="'+a+'">'+b+'</table><div id="'+e+'" style="display:none;"></div>',l(),$("#"+e).html(""),_Object.drawTableLine(t,a,e,r,_BaseExt,u,m)},_Object.updateTableLine=function(t,a,e){void 0!=e&&(null!=document.getElementById(e)&&(document.getElementById(e).innerHTML=""),_Object.drawTableLine(t,a,e,_Object.tbodyOBject,_BaseExt,_Object.drawColumn,_Object.theadColumn))},_Object.drawTableLine=function(t,a,e,s,r,n,l){var o=new r(t,a),d=[];for(var i in n){if(!n[i].column[0])return console.error(i+"部分画线缺少开始列(begincol):"),!1;if(!n[i].column[n[i].column.length-1])return console.error(i+"部分画线缺少结束列(endcol):"),!1;if(!l)return console.error(i+"部分画线缺少开始行(beginclum):"),!1;if(!(l+s.missStatList.length))return console.error(i+"部分画线缺少结束行(endclum):"),!1;if(!n[i].lineWidth)return console.error(i+"部分画线缺少画线的宽度(lineWidth):"),!1;if(!n[i].lineColor)return console.error(i+"部分画线缺少画线的颜色(lineColor):"),!1;if(!e)return console.error(i+"部分画线缺少canvas对象id名(canvas):"),!1;var c=1;/ball/g.test(n[i].className)?c=1:/box/g.test(n[i].className)&&(c=2),d.push({begincol:n[i].column[0]-1,endcol:n[i].column[n[i].column.length-1],beginclum:l,endclum:l+s.missStatList.length,className:n[i].className,lineWidth:n[i].lineWidth?n[i].lineWidth:1,lineColor:n[i].lineColor?n[i].lineColor:"red",canvas:e,type:c})}o.DrawLineArr(d)},_Object.renderStatistics=function(t,a,e){if(!a||!t||!e)return void console.error("renderStatistics: 参数不能为空！");var s=a.missBottomStatList,r="",n="";if(void 0!=a.missStatList[0])for(var l,o=a.missStatList[0].statResult.length,d=e.missBottomStatList,i=["出现总次数","最大遗漏值","最大连出值"],c=0,u=0;u<s.length;u++){if(c++,r="",r+='<td column="'+c+'">'+i[u]+"</td>",null!=s[u].result)if(""!=s[u].result)for(var m=s[u].result.split(","),b=0;b<m.length;b++)r+='<td column="'+c+'"  class="'+(d.period?d.period:"")+'"  ><span  class="'+(d.periodSpan?d.periodSpan:"")+'">'+m[u]+"</span></td>";else r+="";else c=o,r+='<td column="'+c+'" class="'+(d.period?d.period:"")+'"  colspan="'+(o+_Object.addOne)+'">&nbsp;</td>',c++;var h=[],p={};if(s[u].otherData&&s[u].otherData.forEach(function(t){h.push(t.column),p[t.column]=t}),h=h.sort(function(t,a){return t>a}),0==u)for(var f in s[u].statData){_Object.contains(h,c)&&(r+='<td class="'+(p[c].bg?p[c].bg:"")+'" column="'+(c+1)+'">'+p[c].data+"</td>",c++,h.shift());for(var b=0;b<s[u].statData[f].length;b++){if(c++,void 0==t[f])return console.error("_theadTitle["+f+"]为undefined,有可能你的配置thead.config配置和数据源的结构对不上，又或者是thead.config配置和style.config.js的结构对不上！_theadTitle目前是："+Object.keys(t).length+"个模块"),!1;l=t[f].isShow,r+='<td column="'+c+'" class="'+(d.statData[f].defalut?d.statData[f].defalut:"")+'"  '+(l?"":"style=display:none")+'  modular="'+f+'"><span  class="'+(d.statData[f].defalutSpan?d.statData[f].defalutSpan:"")+'" >'+s[u].statData[f][b]+"</span></td>"}}else for(var f in s[u].statData){_Object.contains(h,c)&&(r+='<td class="'+p[c].bg+'" column="'+(c+1)+'">'+p[c].data+"</td>",c++,h.shift());for(var b=0;b<s[u].statData[f].length;b++)c++,l=t[f].isShow,r+='<td column="'+c+'" class="'+(d.statData[f].defalut?d.statData[f].defalut:"")+'"  '+(l?"":"style=display:none")+' modular="'+f+'" >'+s[u].statData[f][b]+"</td>"}h.length>0&&(r+='<td class="'+(p[c].bg?p[c].bg:"")+'" column="'+(c+1)+'">'+p[c].data+"</td>",c++,h.shift()),c=0,n+="<tr>"+r+"</tr>"}return n},_Object.getTheaderMaxColumn=function(t){return t||console.error("getTheaderMaxColumn: 参数不能为空！"),_Object.patch(t,"<tr>")},_Object.patch=function(_string,_re){return _re=eval("/"+_re+"/ig"),_string.match(_re)?_string.match(_re).length:0},_Object.contains=function(t,a){if(!t||"object"!=typeof t)return void console.error("contains：参数1不存在或者不正确！");if(!a)return void console.error("contains：参数2不存在！");for(var e=t.length;e--;)if(t[e]===a)return!0;return!1},_Object.renderThead=function(t,a){if(!t)return void console.error("renderThead：参数theadObject不能为空！");void 0==a?a=1:_Object.contains([1,2],a)||(a=1);for(var e,s="",r="",n=0,l=0,o=0,d=0;d<t.length;d++){r="";for(var i in t[d]){e=void 0==t[d][i].isShow||1==t[d][i].isShow;var c;if(c=0==parseInt(i.replace("_th",""))?0:parseInt(i.replace("_th","")-1),t[d][i].rowspan)t[d][i].colspan?r+="<"+(1==a?"th":"td")+'    colspan="'+t[d][i].colspan+'" rowspan="'+t[d][i].rowspan+'"  '+(e?"":"style=display:none")+" "+(t[d][i].width?"width="+t[d][i].width:"")+">"+t[d][i].content+"</"+(1==a?"th":"td")+">":r+="<"+(1==a?"th":"td")+'   rowspan="'+t[d][i].rowspan+'"   '+(e?"":"style=display:none")+"  "+(t[d][i].width?"width="+t[d][i].width:"")+">"+t[d][i].content+"</"+(1==a?"th":"td")+">",o++;else if(t[d][i].colspan)r+="<"+(1==a?"th":"td")+'  modular="data_'+(c-o)+'"  colspan="'+t[d][i].colspan+'"  '+(e?"":"style=display:none")+" "+(t[d][i].width?"width="+t[d][i].width:"")+">"+t[d][i].content+"</"+(1==a?"th":"td")+">";else if(t[d][i].value)if(/\~/g.test(t[d][i].value)){n=parseInt(t[d][i].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[0]),l=parseInt(t[d][i].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[1]);for(var u=n;u<=l;u++)t[d][i].isShowZero?r+="<"+(1==a?"th":"td")+'  modular="data_'+c+'"  '+(e?"":"style=display:none")+">"+(u<10?"0"+u:u)+"</"+(1==a?"th":"td")+">":r+="<"+(1==a?"th":"td")+'  modular="data_'+c+'"  '+(e?"":"style=display:none")+">"+u+"</"+(1==a?"th":"td")+">"}else if(/\|/g.test(t[d][i].value))for(var m=t[d][i].value.replace(/(^\s*)|(\s*$)/g,"").split("|"),u=0;u<m.length;u++)m[u]&&(r+="<"+(1==a?"th":"td")+'  modular="data_'+c+'"   '+(e?"":"style=display:none")+">"+m[u]+"</"+(1==a?"th":"td")+">");else r+="<"+(1==a?"th":"td")+'  modular="data_'+c+'"   '+(e?"":"style=display:none")+">"+t[d][i].value+"</"+(1==a?"th":"td")+">"}s+="<tr>"+r+"</tr>"}return s},_Object.getTheadTitle=function(t){if(!t)return void console.error("getTheadTitle：参数theadObject不能为空！");for(var a,e=[],s=0,r=0,n=0,l=0;l<t.length;l++)for(var o in t[l])if(void 0!=t[l][o].value){var d=[];if(""!=t[l][o].value)if(/\~/g.test(t[l][o].value)){s=parseInt(t[l][o].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[0]),r=parseInt(t[l][o].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[1]);for(var i=s;i<=r;i++)t[l][o].isShowZero?d.push(i<10?"0"+i:i):d.push(i)}else if(/\|/g.test(t[l][o].value))for(var c=t[l][o].value.replace(/(^\s*)|(\s*$)/g,"").split("|"),i=0;i<c.length;i++)d.push(c[i]);a=void 0==t[l][o].isShow||1==t[l][o].isShow,e["data_"+n]={isDrawLine:!!t[l][o].isDrawLine,data:d,isShow:a,isSwitch:t[l][o].isSwitch,specValue:t[l][o].specValue,replaceTitle:t[l][o].replaceTitle,isAllAwardNumber:t[l][o].isAllAwardNumber,width:t[l][o].width},n++}return e},_Object.renderTbody=function(t,a,e,s){if(!t)return void console.error("renderTbody：参数tbodyOBject不能为空！");for(var r=t.missStatList,n=e.missStatList,l="",o=0,d=0;d<r.length;d++){var i;r[d].period?(o++,i='<td class="'+(n.periodNumber?n.periodNumber:"")+'"  column="'+o+'"  modular="period_0">'+r[d].period+"</td>"):(i="",console.warn("period为空！"));var c="",u="",m={},b=0;if(r[d].result){var h=r[d].statResult;if(s&&s[0]&&!s[0]._th2.noZero){var p=[];h.forEach(function(t){p.push(t<10?"0"+t:t)}),h=p}for(var f=0;f<h.length;f++){if(/\|/g.test(h[f])){for(var g=h[f].replace(/(^\s*)|(\s*$)/g,"").split("|"),v=0;v<g.length;v++)v==g.length-1?c+='<td class = "'+(n.period?n.period:"")+"  "+(n.periodBall?n.periodBall:"")+'"  column="'+o+'"  modular="result_'+f+'"><span class="'+(n.periodSpan?n.periodSpan:"")+'">'+g[v]+"</span></td>":c+='<td class = "'+(n.period?n.period:"")+'" column="'+o+'"  modular="result_'+f+'"><span class="'+(n.periodSpan?n.periodSpan:"")+'">'+g[v]+"</span></td>",o++;_Object.addOne=1}else c+='<td class = "'+(n.period?n.period:"")+'" column="'+o+'"  modular="result_'+f+'"><span class="'+(n.periodSpan?n.periodSpan:"")+'">'+h[f]+"</span></td>",o++;b+=parseInt(h[f])}statResultI=""}else c+="",console.warn("statResult为空！");var D=[],w={};r[d].otherData&&r[d].otherData.forEach(function(t){D.push(t.column),w[t.column]=t}),D=D.sort(function(t,a){return t>a});for(var _ in r[d].statData){var y=[];_Object.contains(D,o)&&(u+='<td class="'+(w[o].bg?w[o].bg:"")+'" column="'+(o+1)+'">'+w[o].data+"</td>",o++,D.shift());for(var f=0;f<r[d].statData[_].length;f++)if(o++,y.push(o),0==r[d].statData[_][f]){var N="";a[_].isSwitch&&(N=n.statData[_]["switchNumber"+(f+1)]),void 0==a[_].replaceTitle?void 0==a[_].isAllAwardNumber?u+='<td class="'+(n.statData[_].awardNumber?N||n.statData[_].awardNumber:"")+"  "+(n.statData[_].specClass?n.statData[_].specClass:"")+'"  '+(n.statData[_].awardNumber?' css-awardNumber="'+n.statData[_].awardNumber+'"':"")+(n.statData[_].heavyNumber?' css-heavyNumber="'+n.statData[_].heavyNumber+'"':"")+(n.statData[_].serialNumber?' css-serialNumber="'+n.statData[_].serialNumber+'"':"")+(n.statData[_].edgeNumber?' css-edgeNumber="'+n.statData[_].edgeNumber+'"':"")+(n.statData[_].edgeTwoNumber?' css-edgeTwoNumber="'+n.statData[_].edgeTwoNumber+'"':"")+" column="+o+' modular="'+_+'"  '+(a[_].isShow?"":"style=display:none")+'><span class="'+(n.statData[_].defalutSpan?n.statData[_].defalutSpan:"")+'">'+(a[_].data[f]||0==a[_].data[f]?a[_].data[f]:a[_].specValue?r[d].statData[_][f]:"")+"</span></td>":u+='<td class="'+(n.statData[_].awardNumber?N||n.statData[_].awardNumber:"")+'"  '+(n.statData[_].awardNumber?' css-awardNumber="'+n.statData[_].awardNumber+'"':"")+(n.statData[_].heavyNumber?' css-heavyNumber="'+n.statData[_].heavyNumber+'"':"")+(n.statData[_].serialNumber?' css-serialNumber="'+n.statData[_].serialNumber+'"':"")+(n.statData[_].edgeNumber?' css-edgeNumber="'+n.statData[_].edgeNumber+'"':"")+(n.statData[_].edgeTwoNumber?' css-edgeTwoNumber="'+n.statData[_].edgeTwoNumber+'"':"")+" column="+o+' modular="'+_+'"  '+(a[_].isShow?"":"style=display:none")+'><span class="'+(n.statData[_].defalutSpan?n.statData[_].defalutSpan:"")+'">'+b+"</span></td>":u+='<td class="'+(n.statData[_].awardNumber?N||n.statData[_].awardNumber:"")+'"  '+(n.statData[_].awardNumber?' css-awardNumber="'+n.statData[_].awardNumber+'"':"")+(n.statData[_].heavyNumber?' css-heavyNumber="'+n.statData[_].heavyNumber+'"':"")+(n.statData[_].serialNumber?' css-serialNumber="'+n.statData[_].serialNumber+'"':"")+(n.statData[_].edgeNumber?' css-edgeNumber="'+n.statData[_].edgeNumber+'"':"")+(n.statData[_].edgeTwoNumber?' css-edgeTwoNumber="'+n.statData[_].edgeTwoNumber+'"':"")+" column="+o+' modular="'+_+'"  '+(a[_].isShow?"":"style=display:none")+'><span class="'+(n.statData[_].defalutSpan?n.statData[_].defalutSpan:"")+'">'+a[_].replaceTitle(a[_].data[f]||0==a[_].data[f]?a[_].data[f]:a[_].specValue?r[d].statData[_][f]:"")+"</span></td>"}else{if(void 0==a[_])return console.error("_theadTitle["+_+"]为undefined,有可能你的配置thead.config配置和数据源的结构对不上，又或者是thead.config配置和style.config.js的结构对不上！_theadTitle目前是："+Object.keys(a).length+"个模块"),!1;if(void 0==n.statData[_])return console.error("cssObject.statData["+_+"]为undefined,有可能是thead.config配置和style.config.js的结构对不上！cssObject.statData目前是："+Object.keys(n.statData).length+"个模块"),!1;u+='<td class="'+(n.statData[_].defalut?n.statData[_].defalut:"")+(n.statData[_].converAwardNumber?n.statData[_].converAwardNumber:"")+'"'+(n.statData[_].omissionDelamination?' css-omissionDelamination="'+n.statData[_].omissionDelamination+'"':"")+" column="+o+' modular="'+_+'"  '+(a[_].isShow?"":"style=display:none")+'  data-value="'+r[d].statData[_][f]+'"><span class="'+(n.statData[_].defalutSpan?n.statData[_].defalutSpan:"")+'"></span></td>'}a[_].isDrawLine&&(m[_]={lineColor:n.statData[_].lineColor?n.statData[_].lineColor:null,lineWidth:n.statData[_].lineWidth?n.statData[_].lineWidth:0,className:n.statData[_].awardNumber?n.statData[_].awardNumber:null,column:y})}D.length>0&&(u+='<td class="'+(w[o].bg?w[o].bg:"")+'" column="'+(o+1)+'">'+w[o].data+"</td>",o++,D.shift()),o=0,l+="<tr>"+i+c+u+"</tr>"}return{html:l,drawColumn:m}},_Object});