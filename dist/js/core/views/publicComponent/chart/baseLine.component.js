define([],function(){function t(t,e){this.container=t,this.tbodyId=e,this._Lines=[],this._TmpDom=document.createDocumentFragment(),this.tbody=document.getElementById(this.tbodyId)}return t.prototype._Line=function(t,e,o,i,n){var s=this;if(s._canvas=i,s.wrap=document.getElementById(s.container),s.wrap.style.position="relative","Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<9){t.push({});for(var a=0;a<t.length-1;a++){var r=this._PositionFF(t[a],s.wrap),l=this._PositionFF(t[a+1],s.wrap);1==n?this._IELine(r.x,r.y,l.x,l.y,e,o):this._IELine2(r.x,r.y,l.x,l.y,e,o)}}else for(var a=0;a<t.length-1;a++){var r=this._PositionFF(t[a],s.wrap),l=this._PositionFF(t[a+1],s.wrap);1==n?this._FFLine(r.x,r.y,l.x,l.y,e,o):this._FFLine2(r.x,r.y,l.x,l.y,e,o)}document.getElementById(i).appendChild(this._TmpDom)},t.prototype._Clear=function(){this.ClearLine(),this._KeyTable=[];for(var t=this.tbody.rows,e=0;e<t.length;e++)for(var o=0;o<t[e].cells.length;o++)""!=t[e].cells[o].style.backgroundColor&&(t[e].cells[o].style.backgroundColor="")},t.prototype._PositionIE=function(t,e){var o={x:0,y:0};return o.y=t.offset().top+t.height()/2-$("#container").position().top,o.x=t.offset().left+t.width()/2-$("#container").position().left-10,o},t.prototype._PositionFF=function(t,e){if(void 0==t.nodeType)return t;for(var o={x:0,y:0},i=t;i&&(o.x+=i.offsetLeft,o.y+=i.offsetTop,!e||i.offsetParent!=e);i=i.offsetParent);return o.x+=parseInt(t.offsetWidth/2),o.y+=parseInt(t.offsetHeight/2),o},t.prototype._IELine=function(t,e,o,i,n,s){if(!(Math.abs(e-i)<16&&t==o)){var a=this._NPos(t,e,o,i,8);t=a[0],e=a[1],o=a[2],i=a[3];var r={left:0,top:0},l=document.createElement("<v:line></v:line>");l.from=t-r.left+","+(e-r.top),l.to=o-r.left+","+(i-r.top),l.strokeColor=s,l.strokeWeight=n+"pt",l.style.cssText="position:absolute;z-index:999;top:0;left:0;behavior:url(#default#VML);",l.coordOrigin="0,0",this._Lines.push(l),this._TmpDom.appendChild(l)}},t.prototype._IELine2=function(t,e,o,i,n,s){if(!(Math.abs(e-i)<16&&t==o)){var a=this._NPos(t,e,o,i,8);t=a[0],e=a[1],o=a[2],i=a[3];var r={left:5,top:8},l=document.createElement("<v:line></v:line>");l.from=t-r.left+","+(e-r.top),l.to=o-r.left+","+(i-r.top+14),l.strokeColor=s,l.strokeWeight=n+"pt",l.style.cssText="position:absolute;z-index:999;top:0;left:0;behavior:url(#default#VML);",l.coordOrigin="0,0",this._Lines.push(l),this._TmpDom.appendChild(l)}},t.prototype._FFLine=function(t,e,o,i,n,s){if(!(Math.abs(e-i)<12&&t==o)){var a=this._NPos(t,e,o,i,6);t=a[0],e=a[1],o=a[2],i=a[3];var r=document.createElement("canvas");r.style.position="absolute",r.style.visibility="visible",r.width=Math.abs(t-o)||n,r.height=Math.abs(e-i-4)||n-4;var l=Math.min(e,i),p=Math.min(t,o);r.style.top=l+2+"px",r.style.left=p+"px";var h=r.getContext("2d");h.save(),h.strokeStyle=s,h.lineWidth=n,h.beginPath(),h.moveTo(t-p,e-l-4),h.lineTo(o-p,i-l),h.closePath(),h.stroke(),h.restore(),this._Lines.push(r),this._TmpDom.appendChild(r)}},t.prototype._FFLine2=function(t,e,o,i,n,s){if(!(Math.abs(e-i)<12&&t==o)){var a=this._NPos(t,e,o,i,6);t=a[0],e=a[1],o=a[2],i=a[3];var r=document.createElement("canvas");r.style.position="absolute",r.style.visibility="visible",r.width=Math.abs(t-o-5)||n-5,r.height=Math.abs(e-i-13)||n-13;var l=Math.min(e,i),p=Math.min(t,o);r.style.top=l+6+"px",r.style.left=p+2+"px";var h=r.getContext("2d");h.save(),h.strokeStyle=s,h.lineWidth=n,h.beginPath(),h.moveTo(t-p,e-l-13),h.lineTo(o-p,i-l+2),h.closePath(),h.stroke(),h.restore(),this._Lines.push(r),this._TmpDom.appendChild(r)}},t.prototype._OLine=function(t,e,o,i,n,s){var a=$("#container").offset();t-=a.left,e-=a.top,o-=a.left,i-=a.top;var r=t,l=e;o<t&&(r=o),i<e&&(l=i);var p=Math.abs(t-o),h=Math.abs(e-i);0==p&&(p=n),0==h&&(h=n);var f=document.createElement("canvas");document.getElementById(this._canvas).appendChild(f);var d=f.getContext("2d");$(f).attr("class","cvs"),$(f).css("left",r+"px"),$(f).css("top",l+"px"),$(f).attr("width",p),$(f).attr("height",h),d.strokeStyle=s,d.lineWidth=n,d.beginPath();var c=0,v=0,y=0,u=0,m=(o-t)/(i-e),_=m>1?1.5*(m-1)/m:0,b=5.5+_;t<o?(c=b,v=b/m,y=p-b,u=h-b/m):t>o?(c=p-b,v=-b/m,y=b,u=h+b/m):(c=0,v=7,y=0,u=h-7),d.moveTo(c,v),d.lineTo(y,u),d.stroke()},t.prototype._NPos=function(t,e,o,i,n){var s=t-o,a=e-i,r=Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(a,2))),l=Math.round(s*n/r),p=Math.round(a*n/r);return[o+l,i+p,t-l,e-p]},t.prototype._IsSort=function(){var t=document.getElementById(this.issnunoId);if(void 0!=t)return!(t.childNodes[0].className.indexOf("iconJT")>-1)},t.prototype.Class=function(){return Class},t});