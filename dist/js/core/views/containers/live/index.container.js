define("core/services/testing.service",["jquery"],function(e){return{isDev:"false"!==e("body").attr("isopeneventnamecheck"),_testingEventName:function(e){return this.isDev?!!/_[\w]*/.test(e):(console.error("body标签上没有设置isOpenEventNameCheck属性！用于开启是否事件名规范校验！"),!1)}}}),define("core/services/event.service",["underscore","jquery","backbone","./testing.service"],function(e,t,o,n){return{_on:function(e,t){"string"==typeof e&&"function"==typeof t?n._testingEventName(e)?(this[e]=this[e]||new Array,this[e].push(t)):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},_emit:function(e){if("string"==typeof e)if(n._testingEventName(e)){var t=arguments.length>1?Array.prototype.slice.call(arguments,1):[];this[e]&&Array.prototype.forEach.call(this[e],function(e){e.apply(this,t)})}else console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)")},on:function(e,t){"string"==typeof e&&"function"==typeof t?n._testingEventName(e)?o.on(e,t):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},emit:function(e,t){"string"==typeof e&&(n._testingEventName(e)?o.trigger(e,t):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"))}}}),define("core/views/publicComponent/live/topVideo.component",["underscore","jquery","String","backbone","../../../services/event.service"],function(e,t,o,n,i){return n.View.extend({el:"#mainVideo",topVideo:"#topVideo",videoList:"#videoList",videoImg:"#videoImg",navVideoList:"#navVideoList",countDownTime:".countDownTime",textBtn:".textBtn",timeText:".timeText",events:{"mouseenter  #videoList li":"handleMouseEnter"},initialize:function(){var e=this;e.time=1e3,e.topLock=!1,e.navLock=!1,e.clearIntervalTop=0,e.clearIntervalNav=0,i.on("startCountDown_topVideoComponent",function(){e.countDown()}),i.on("startCountDownNav_topVideoComponent",function(){e.countDownNav()}),i.on("refresh_topVideoComponent",function(t){e.refresh(t.result,t.type)})},handleMouseEnter:function(e){var o=this,n=t(e.currentTarget),i=t(e.currentTarget).index();t(o.videoImg).find(".lis").hide(),t(o.videoList).find("li").removeClass("active"),t(o.videoImg).find(".lis").eq(i).show(),n.addClass("active")},refresh:function(e,o){var n=this;return void 0==e||""==e?void console.error("refresh: 返回的内容为空!"):void 0==o||"number"!=typeof o?void console.error("refresh: 渲染的类型不能为空!"):void(1==o?(t(n.topVideo).html(e.lotteryAwardList),n.topLock=!1,n.countDown()):0==o&&(t(n.navVideoList).html(e.navLotteryAwardList),n.navLock=!1,n.countDownNav()))},countDown:function(){var e=this,o=[],n=t(e.topVideo).find("li "+e.countDownTime);n.each(function(e,n){o.push(parseFloat(t(n).attr("data-time")))}),e.clearIntervalTop=window.setInterval(function(){n.each(function(e,n){o[e]--,"NaN:NaN"==(""+o[e]).SecondsTommss()?t(n).html("00:00"):t(n).html((""+o[e]).SecondsTommss()),t(n).attr("data-time",o[e])}),"00:00"==(""+o[0]).SecondsTommss()&&0==e.topLock&&(window.clearInterval(e.clearIntervalTop),o=[],i.emit("countDownSuccess_topVideoComponent"),e.topLock=!0)},e.time)},countDownNav:function(){var e=this,o=[],n=t(e.navVideoList).find("li "+e.countDownTime);n.each(function(e,n){o.push(parseFloat(t(n).attr("data-time")))}),e.clearIntervalNav=window.setInterval(function(){n.each(function(n,r){o[n]--,"NaN:NaN"==(""+o[n]).SecondsTommss()?t(r).html("00:00"):t(r).html((""+o[n]).SecondsTommss()),t(r).attr("data-time",o[n]),"00:00"==(""+o[3]).SecondsTommss()&&0==e.navLock&&(window.clearInterval(e.clearIntervalNav),o=[],i.emit("countDownSuccessNav_topVideoComponent"),e.navLock=!0)})},e.time)}})}),define("core/views/publicComponent/live/numberVideoList.component",["underscore","jquery","String","backbone","../../../services/event.service"],function(e,t,o,n,i){return n.View.extend({el:"#numberVideoList",id:"#numberVideoList",countDownTime:".countDownTime",issue:".issue",textBtn:".textBtn",timeText:".timeText",initialize:function(){var e=this;e.time=1e3,e.timeCountArray=[],e.isRquest=!1,i.on("startCountDown_NumberVideoListComponent",function(){e.countDown()}),i.on("refresh_numberVideoComponent",function(t){e.refresh(t)})},refresh:function(e){var o=this;e?t(o.id).find("li").each(function(n,i){if(e.lotterycode==t(i).attr("data-lotterycode"))return t(i).find(o.issue).html(e.next.period+"期"),t(i).find(o.countDownTime).html(e.awardTimeInterval.SecondsTohhmmss()),t(i).find(o.countDownTime).attr("data-time",e.awardTimeInterval),o.timeCountArray[n]=e.awardTimeInterval,o.isRquest=!1,t(i).find(o.textBtn).show(),t(i).find(o.timeText).hide(),!1}):console.error("refresh：返回来的数据不能为空！")},countDown:function(){var e=this,o=t(e.id).find("li "+e.countDownTime);o.each(function(o,n){e.timeCountArray.push(parseFloat(t(n).attr("data-time")))});window.setInterval(function(){i.emit("observer_numberVideoComponent"),o.each(function(o,n){"00:00:00"==(""+e.timeCountArray[o]).SecondsTohhmmss()&&0==e.isRquest?(e.isRquest=!0,t(n).parent().parent().find(e.textBtn).hide(),t(n).parent().parent().find(e.timeText).show(),t(n).html("00:00:00"),e.timeCountArray[o]=0,window.setTimeout(function(){i.emit("countDownSuccess_numberVideoComponent",t(n).attr("data-lotterycode"))},5e3)):0==e.isRquest&&(t(n).parent().find(e.textBtn).show(),t(n).parent().find(e.timeText).hide(),e.timeCountArray[o]--,t(n).html((""+e.timeCountArray[o]).SecondsTohhmmss()))})},e.time)}})}),define("core/services/request.service",["underscore","jquery","backbone","./event.service"],function(e,t,o,n){var i={_asyncRequestBase:function(e,o,i,r,s,c){t.ajax({type:e,async:!0,timeout:1e4,url:o,dataType:i,data:r,success:function(e){e?n.emit(s,e):(n.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+s+"事件)返回得数据发生错误:"))},complete:function(e,t){"timeout"==t&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),c&&n.emit(c,_resultData))},error:function(e,t){"timeout"==t&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),c&&n.emit(c,_resultData))}})},_asyncRequestBaseJsonp:function(e,o,i,r,s){t.ajax({type:e,async:!0,timeout:1e4,url:o,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:r,data:i,success:function(e){e?n.emit(r,e):(n.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+r+"事件)返回得数据发生错误:"))},complete:function(e,t){"timeout"==t&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),s&&n.emit(s,_resultData))},error:function(e,t){"timeout"==t&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),s&&n.emit(s,_resultData))}})},requestPostJsonp:function(e,t,o,n){return i._asyncRequestBaseJsonp("POST",e,t,o,n)},requestGetJsonp:function(e,t,o,n){return i._asyncRequestBaseJsonp("GET",e,t,o,n)},requestPost:function(e,t,o){return i._asyncRequestBase("POST",e,"json",t,o,_failedEvent)},requestPostSearch:function(e,t,o,n,r){return i._asyncRequestBase("POST",e,t,o,n,r)},requestGet:function(e,t,o,n){return i._asyncRequestBase("GET",e,"json",t,o,n)},requestGetHtml:function(e,t,o,n){return i._asyncRequestBase("GET",e,"text",t,o,n)}};return i}),define("core/actions/live/live.action",["underscore","jquery","backbone","../../services/request.service","../../services/event.service"],function(e,t,o,n,i){var r={};return r._awardDataGroupCallback,r._groupAwardTimesCallback,r.initialize=function(){var e=this;i.on("asyncSuccess_awardDataGroup",function(t){e._awardDataGroupCallback(t)}),i.on("asyncSuccess_groupAwardTimes",function(t){e._groupAwardTimesCallback(t)})},r.getAwardDataGroup=function(e,t){if(void 0==e||"number"!=typeof e)return void console.error("请求数据的参数不正确，_type不是数字类型");if("function"!=typeof t)return void console.error("请求数据的参数不正确，_callBack不是函数类型");var o={t:Math.random(),type:e};r._awardDataGroupCallback=t,n.requestGet("/live/getawarddatagroup",o,"asyncSuccess_awardDataGroup")},r.getGroupAwardTimes=function(e,t){if(void 0==e||"string"!=typeof e)return void console.error("请求数据的参数不正确，_lotterys不是string类型");if("function"!=typeof t)return void console.error("请求数据的参数不正确，_callBack不是函数类型");console.log(e);var o={t:Math.random(),lotterys:e};r._groupAwardTimesCallback=t,n.requestGet("/live/getgroupawardtimes",o,"asyncSuccess_groupAwardTimes")},r}),define("core/views/containers/live/index.container",["underscore","jquery","backbone","../../../services/event.service","../../publicComponent/live/topVideo.component","../../publicComponent/live/numberVideoList.component","../../../actions/live/live.action"],function(e,t,o,n,i,r,s){return{initialize:function(){var e=this;e.countNum1=0,e.countNum2=0,e.tempTime1="",e.tempTime2="",e.lock1=!1,e.lock2=!1,s.initialize();new i,new r;n.emit("startCountDown_topVideoComponent"),n.emit("startCountDownNav_topVideoComponent"),n.emit("startCountDown_NumberVideoListComponent"),n.on("countDownSuccess_topVideoComponent",function(){s.getAwardDataGroup(1,function(e){n.emit("refresh_topVideoComponent",{result:e,type:1})})}),n.on("countDownSuccessNav_topVideoComponent",function(){s.getAwardDataGroup(0,function(e){n.emit("refresh_topVideoComponent",{result:e,type:0})})}),n.on("countDownSuccess_numberVideoComponent",function(e){s.getGroupAwardTimes(e,function(e){n.emit("refresh_numberVideoComponent",e.groupAwardTimes[0])})}),n.on("observer_numberVideoComponent",function(){0==e.lock1&&(e.tempTime1=t("#videoList li:first-child .time b").html(),e.lock1=!0),0==e.lock2&&(e.tempTime2=t("#navVideoList li:last-child .time b").html(),e.lock2=!0),t("#videoList li:first-child .time b").html()==e.tempTime1?e.countNum1>6?(e.countNum1=0,n.emit("countDownSuccess_topVideoComponent"),e.lock1=!1):e.countNum1++:e.lock1=!1,t("#navVideoList li:last-child .time b").html()==e.tempTime2?e.countNum2>6?(e.countNum2=0,n.emit("countDownSuccessNav_topVideoComponent"),e.lock2=!1):e.countNum2++:e.lock2=!1})}}});