define("core/services/testing.service",["jquery"],function(e){return{isDev:"false"!==e("body").attr("isopeneventnamecheck"),_testingEventName:function(e){return this.isDev?!!/_[\w]*/.test(e):(console.error("body标签上没有设置isOpenEventNameCheck属性！用于开启是否事件名规范校验！"),!1)}}}),define("core/services/event.service",["underscore","jquery","backbone","./testing.service"],function(e,t,n,o){return{_on:function(e,t){"string"==typeof e&&"function"==typeof t?o._testingEventName(e)?(this[e]=this[e]||new Array,this[e].push(t)):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},_emit:function(e){if("string"==typeof e)if(o._testingEventName(e)){var t=arguments.length>1?Array.prototype.slice.call(arguments,1):[];this[e]&&Array.prototype.forEach.call(this[e],function(e){e.apply(this,t)})}else console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)")},on:function(e,t){"string"==typeof e&&"function"==typeof t?o._testingEventName(e)?n.on(e,t):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},emit:function(e,t){"string"==typeof e&&(o._testingEventName(e)?n.trigger(e,t):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"))}}}),define("core/services/request.service",["underscore","jquery","backbone","./event.service"],function(e,t,n,o){var a={_asyncRequestBase:function(e,n,a,i,r,c){t.ajax({type:e,async:!0,timeout:1e4,url:n,dataType:a,data:i,success:function(e){e?o.emit(r,e):(o.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+r+"事件)返回得数据发生错误:"))},complete:function(e,t){"timeout"==t&&(o.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),c&&o.emit(c,_resultData))},error:function(e,t){"timeout"==t&&(o.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),c&&o.emit(c,_resultData))}})},_asyncRequestBaseJsonp:function(e,n,a,i,r){t.ajax({type:e,async:!0,timeout:1e4,url:n,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:i,data:a,success:function(e){e?o.emit(i,e):(o.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+i+"事件)返回得数据发生错误:"))},complete:function(e,t){"timeout"==t&&(o.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),r&&o.emit(r,_resultData))},error:function(e,t){"timeout"==t&&(o.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),r&&o.emit(r,_resultData))}})},requestPostJsonp:function(e,t,n,o){return a._asyncRequestBaseJsonp("POST",e,t,n,o)},requestGetJsonp:function(e,t,n,o){return a._asyncRequestBaseJsonp("GET",e,t,n,o)},requestPost:function(e,t,n){return a._asyncRequestBase("POST",e,"json",t,n,_failedEvent)},requestPostSearch:function(e,t,n,o,i){return a._asyncRequestBase("POST",e,t,n,o,i)},requestGet:function(e,t,n,o){return a._asyncRequestBase("GET",e,"json",t,n,o)},requestGetHtml:function(e,t,n,o){return a._asyncRequestBase("GET",e,"text",t,n,o)}};return a}),define("core/actions/plan/plan.action",["underscore","jquery","backbone","../../services/request.service","../../services/event.service"],function(e,t,n,o,a){var i={};return i._planIndexCallback,i._planAwardHTMLCallback,i._planAwardResultCallback,i._planAwardResultHTMLCallback,i._requestPlanCallback,i.initialize=function(){var e=this;a.on("asyncSuccess_planIndex",function(t){e._planIndexCallback(t)}),a.on("asyncSuccess_planAwardHTML",function(t){e._planAwardHTMLCallback(t)}),a.on("asyncSuccess_planAwardResult",function(t){e._planAwardResultCallback(t)}),a.on("asyncSuccess_planAwardResultHTML",function(t){e._planAwardResultHTMLCallback(t)}),a.on("asyncSuccess_requestPlan",function(t){e._requestPlanCallback(t)})},i.requestPlan=function(e){if("function"!=typeof e)console.error("请求数据的参数不正确，_callBack不是函数类型");else{var t={t:Math.random()};i._requestPlanCallback=e,o.requestGet("/plan/getplan",t,"asyncSuccess_requestPlan")}},i.getPageIndex=function(e){if("function"!=typeof e)console.error("请求数据的参数不正确，_callBack不是函数类型");else{var t={t:Math.random()};i._planIndexCallback=e,o.requestGet("/plan/updateList",t,"asyncSuccess_planIndex")}},i.getAwardResult=function(e,t){if("function"!=typeof t)console.error("getAwardResult：请求数据的参数不正确，_callBack不是函数类型");else{var n={t:Math.random()};i._planAwardResultCallback=t,o.requestGet("/lottery/"+e+"/getawarddata",n,"asyncSuccess_planAwardResult")}},i.getAwardHTML=function(e,t){if("function"!=typeof t)console.error("getAwardHTML：请求数据的参数不正确，_callBack不是函数类型");else{var n={t:Math.random(),lotteryCode:e.lotteryCode,type:e.type,groupId:e.groupId,date:e.date};i._planAwardHTMLCallback=t,o.requestGet("/plan/updatePlanResult",n,"asyncSuccess_planAwardHTML")}},i.getAwardTimerHTML=function(e,t){if("function"!=typeof t)console.error("getAwardTimerHTML：请求数据的参数不正确，_callBack不是函数类型");else{var n={t:Math.random(),lotteryCode:e.lotteryCode,groupId:e.groupId};i._planAwardResultHTMLCallback=t,o.requestGet("/plan/updateAwardReult",n,"asyncSuccess_planAwardResultHTML")}},i.loopResult=function(e,t){var n=this,o=setInterval(function(){n.getAwardResult(e,function(e){e.period==t&&(window.clearInterval(o),a.emit("awardHTML_PlanLoopAction",e))})},5e3)},i}),define("core/views/publicComponent/public/loading.component",["underscore","jquery","backbone","../../../services/event.service"],function(e,t,n,o){return n.View.extend({el:"#loading",id:"#loading",initialize:function(){var e=this;o.on("createLoading_loadingComponent",function(){e.create()}),o.on("delLoading_loadingComponent",function(){e.del()})},create:function(){0==t(this.el).length&&t("body").append('<div class="loadingSection"  id="loading"><div class="loadingIcon">正在加载中</div><div class="loadingMesk"></div></div>')},del:function(){t(this.id).remove()}})}),define("core/views/containers/plan/index.container",["underscore","jquery","backbone","Date","../../../services/event.service","../../../actions/plan/plan.action","../../publicComponent/public/loading.component"],function(e,t,n,o,a,i,r){return{initialize:function(){this.initEvent(),i.initialize(),new r,setInterval(this.reloadPage,6e4)},initEvent:function(){t(document).on("click",".plan-category",this.changeCategory),t(document).on("click","[data-recommendId]",this.recommendPage),t(document).on("click","[data-playType]",this.redirectPage),t(document).on("click",".lb_logo",this.redirectHome),t(document).on("mouseover",".logo-header",function(){t(this).parent().find("td").css("color","#000")}),t(document).on("mouseleave",".logo-header",function(){t(this).parent().find("td").css("color","")})},changeCategory:function(){var e=t(this).data("id");t(".plan-category").removeClass("active"),t(".cr_listBlock[data-id]").hide(),e?t('.cr_listBlock[data-id="'+e+'"]').fadeIn("fast"):t(".cr_listBlock[data-id]").fadeIn("fast"),t('.plan-category[data-id="'+e+'"]').addClass("active")},reloadPage:function(){a.emit("createLoading_loadingComponent"),i.getPageIndex(function(e){a.emit("delLoading_loadingComponent");var n=t(".plan-category.active").data("id");n?(t(".list-container").html(e.list),t(".cr_listBlock[data-id]").hide(),t('.cr_listBlock[data-id="'+n+'"]').fadeIn("fast")):t(".list-container").html(e.list)})},recommendPage:function(){var e=t(this).data("recommendid"),n=t(this).data("code");t(this).data("groupid"),encodeURIComponent(t(this).data("name"));window.open("/plan/"+n+"/"+e,"_blank")},redirectPage:function(){var e=t(this).data("playtype"),n=t(this).data("code");window.open("/plan/"+n+"/"+e,"_blank")},redirectHome:function(){var e=t(this).data("code");window.open("/high/"+e,"_blank")}}});