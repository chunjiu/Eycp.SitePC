define("core/services/testing.service",["jquery"],function(t){return{isDev:"false"!==t("body").attr("isopeneventnamecheck"),_testingEventName:function(t){return this.isDev?!!/_[\w]*/.test(t):(console.error("body标签上没有设置isOpenEventNameCheck属性！用于开启是否事件名规范校验！"),!1)}}}),define("core/services/event.service",["underscore","jquery","backbone","./testing.service"],function(t,e,a,n){return{_on:function(t,e){"string"==typeof t&&"function"==typeof e?n._testingEventName(t)?(this[t]=this[t]||new Array,this[t].push(e)):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},_emit:function(t){if("string"==typeof t)if(n._testingEventName(t)){var e=arguments.length>1?Array.prototype.slice.call(arguments,1):[];this[t]&&Array.prototype.forEach.call(this[t],function(t){t.apply(this,e)})}else console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)")},on:function(t,e){"string"==typeof t&&"function"==typeof e?n._testingEventName(t)?a.on(t,e):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},emit:function(t,e){"string"==typeof t&&(n._testingEventName(t)?a.trigger(t,e):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"))}}}),define("core/services/request.service",["underscore","jquery","backbone","./event.service"],function(t,e,a,n){var r={_asyncRequestBase:function(t,a,r,o,i,s){e.ajax({type:t,async:!0,timeout:1e4,url:a,dataType:r,data:o,success:function(t){t?n.emit(i,t):(n.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+i+"事件)返回得数据发生错误:"))},complete:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),s&&n.emit(s,_resultData))},error:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),s&&n.emit(s,_resultData))}})},_asyncRequestBaseJsonp:function(t,a,r,o,i){e.ajax({type:t,async:!0,timeout:1e4,url:a,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:o,data:r,success:function(t){t?n.emit(o,t):(n.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+o+"事件)返回得数据发生错误:"))},complete:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),i&&n.emit(i,_resultData))},error:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),i&&n.emit(i,_resultData))}})},requestPostJsonp:function(t,e,a,n){return r._asyncRequestBaseJsonp("POST",t,e,a,n)},requestGetJsonp:function(t,e,a,n){return r._asyncRequestBaseJsonp("GET",t,e,a,n)},requestPost:function(t,e,a){return r._asyncRequestBase("POST",t,"json",e,a,_failedEvent)},requestPostSearch:function(t,e,a,n,o){return r._asyncRequestBase("POST",t,e,a,n,o)},requestGet:function(t,e,a,n){return r._asyncRequestBase("GET",t,"json",e,a,n)},requestGetHtml:function(t,e,a,n){return r._asyncRequestBase("GET",t,"text",e,a,n)}};return r}),define("core/actions/chart/chart.action",["underscore","jquery","backbone","../../services/request.service","../../services/event.service"],function(t,e,a,n,r){var o={};return o._requestChartCallback,o.initialize=function(){var t=this;r.on("asyncSuccess_requestChart",function(e){t._requestChartCallback(e)})},o.requestChartSortFor11x5=function(t,e,a,r,i,s){if(void 0==t||"string"!=typeof t)return void console.error("请求数据的参数不正确，_lotteryCode为空,或者是不是字符串类型！");if(void 0==e||"number"!=typeof e)return void console.error("请求数据的参数不正确，_flot为空或者是不是数字类型！");if("function"!=typeof s)return void console.error("请求数据的参数不正确，_callBack不是函数类型！");var l={flot:e,quantity:a||50,sort:r,day:i,t:Math.random()};o._requestChartCallback=s,n.requestGet("/chart/"+t+"/requestChartSort",l,"asyncSuccess_requestChart")},o.requestChart=function(t,e,a,r,i){if(void 0==t||"string"!=typeof t)return void console.error("请求数据的参数不正确，_lotteryCode为空,或者是不是字符串类型！");if(void 0==e||"number"!=typeof e)return void console.error("请求数据的参数不正确，_flot为空或者是不是数字类型！");if("function"!=typeof i)return void console.error("请求数据的参数不正确，_callBack不是函数类型！");var s;s=null!=r?{flot:e,queryDay:r,quantity:a||50,t:Math.random()}:{flot:e,quantity:a||50,t:Math.random()},o._requestChartCallback=i,n.requestGet("/chart/"+t+"/requestChart",s,"asyncSuccess_requestChart")},o}),define("core/actions/public/lottery.action",["underscore","jquery","backbone","Date","../../services/request.service","../../services/event.service"],function(t,e,a,n,r,o){var i={};return i._awardHTMLCallback,i._awardTimerCallback,i._issuenoDataCallback,i._updatePlanCallback,i.initialize=function(t,a,n){this.lotteryCode=t,this.lotteryType=a,this.needUpdatePlan=n;var r=this;o.on("countDowning_timerContainer",function(t){var a=t.toString().SecondsToddhhmmss().split(":"),n="";n=parseInt(a[0])>0?"<b>"+a[0]+"</b><i>天</i><b>"+a[1]+"</b><i>时</i>":parseInt(a[1])>0?"<b>"+a[1]+"</b><i>时</i><b>"+a[2]+"</b><i>分</i>":"<b>"+a[2]+"</b><i>分</i><b>"+a[3]+"</b><i>秒</i>",e(".timeBlock .time").html(n)}),o.on("getAwardTimeObject_timerContainer",function(t){if(r.nextPeriod=t.nextPeriod,e(".next-period").html(r.nextPeriod+"期"),t.originTime){var a=new Date(t.originTime.replace(/-/g,"/")).format("MM-dd hh:mm");e("#lotteryTimerTime").html(a)}}),o.on("complete_timerContainer",function(){e(".beProgressing").show(),e(".preterite").hide(),e(".current-period").html(r.nextPeriod)}),o.on("lotteryResults_timerComponent",function(t){e(".beProgressing").hide(),e(".preterite").show(),i.getAwardHTML(function(t){o.emit("awardHTML_lotteryAction",t),i.needUpdatePlan&&setTimeout(function(){i.updatePlan(function(t){o.emit("awardPlanHTML_lotteryAction",t)})},3e4+Math.random())})}),o.on("digitQuery_historyContainer",function(t){i.getAwardHTML(function(t){o.emit("awardDigitHTML_lotteryAction",t)},t.year,t.day)}),o.on("digitExport_historyContainer",function(t){window.open("/api/"+r.lotteryType+"/"+r.lotteryCode+"/export/"+t.type+"/"+t.year)}),o.on("asyncSuccess_awardHTML",function(t){r._awardHTMLCallback(t)}),o.on("asyncSuccess_awardTimer",function(t){r._awardTimerCallback(t)}),o.on("asyncSuccess_issuenoData",function(t){r._issuenoDataCallback(t)}),o.on("asyncSuccess_updatePlan",function(t){r._updatePlanCallback(t)})},i.getAwardHTML=function(t,e,a){if("function"!=typeof t)console.error("getAwardHTML：请求数据的参数不正确，_callBack不是函数类型");else{var n={date:e,t:Math.random()};a&&(n.year=e,n.day=a),i._awardHTMLCallback=t,r.requestGet("/"+this.lotteryType+"/"+this.lotteryCode+"/indexPage",n,"asyncSuccess_awardHTML")}},i.updatePlan=function(t){if("function"!=typeof t)console.error("getAwardHTML：请求数据的参数不正确，_callBack不是函数类型");else{var e={lotteryCode:this.lotteryCode,t:Math.random()};i._updatePlanCallback=t,r.requestGet("/plan/updatePlan",e,"asyncSuccess_updatePlan")}},i.getAwardResult=function(t){if("function"!=typeof t)console.error("getAwardResult：请求数据的参数不正确，_callBack不是函数类型");else{var e={t:Math.random()};i._awardTimerCallback=t,r.requestGet("/lottery/"+this.lotteryCode+"/getawarddata",e,"asyncSuccess_awardTimer")}},i.getIssuenoData=function(t,e){if(void 0==t||"number"!=typeof t)return void console.error("getIssuenoData：请求数据的参数不正确，_issueno不是数字类型");if("function"!=typeof e)return void console.error("getIssuenoData：请求数据的_callBack参数不正确，_callBack不是函数类型");var a={t:Math.random(),issueno:t};i._issuenoDataCallback=e,r.requestGet("/"+this.lotteryType+"/"+this.lotteryCode+"/getawardinfobyissueno",a,"asyncSuccess_issuenoData")},i.loopResult=function(t){var e=this,a=setInterval(function(){e.getAwardResult(function(n){n.period==t&&(window.clearInterval(a),e.getAwardHTML(function(t){o.emit("awardHTML_lotteryAction",t)}))})},3e3+1e3*parseInt(Math.floor(5*Math.random()+1)))},i}),define("core/views/publicComponent/public/loading.component",["underscore","jquery","backbone","../../../services/event.service"],function(t,e,a,n){return a.View.extend({el:"#loading",id:"#loading",initialize:function(){var t=this;n.on("createLoading_loadingComponent",function(){t.create()}),n.on("delLoading_loadingComponent",function(){t.del()})},create:function(){0==e(this.el).length&&e("body").append('<div class="loadingSection"  id="loading"><div class="loadingIcon">正在加载中</div><div class="loadingMesk"></div></div>')},del:function(){e(this.id).remove()}})}),define("core/views/publicComponent/chart/baseLine.component",[],function(){function t(t,e){this.container=t,this.tbodyId=e,this._Lines=[],this._TmpDom=document.createDocumentFragment(),this.tbody=document.getElementById(this.tbodyId)}return t.prototype._Line=function(t,e,a,n,r){var o=this;if(o._canvas=n,o.wrap=document.getElementById(o.container),o.wrap.style.position="relative","Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<9){t.push({});for(var i=0;i<t.length-1;i++){var s=this._PositionFF(t[i],o.wrap),l=this._PositionFF(t[i+1],o.wrap);1==r?this._IELine(s.x,s.y,l.x,l.y,e,a):this._IELine2(s.x,s.y,l.x,l.y,e,a)}}else for(var i=0;i<t.length-1;i++){var s=this._PositionFF(t[i],o.wrap),l=this._PositionFF(t[i+1],o.wrap);1==r?this._FFLine(s.x,s.y,l.x,l.y,e,a):this._FFLine2(s.x,s.y,l.x,l.y,e,a)}document.getElementById(n).appendChild(this._TmpDom)},t.prototype._Clear=function(){this.ClearLine(),this._KeyTable=[];for(var t=this.tbody.rows,e=0;e<t.length;e++)for(var a=0;a<t[e].cells.length;a++)""!=t[e].cells[a].style.backgroundColor&&(t[e].cells[a].style.backgroundColor="")},t.prototype._PositionIE=function(t,e){var a={x:0,y:0};return a.y=t.offset().top+t.height()/2-$("#container").position().top,a.x=t.offset().left+t.width()/2-$("#container").position().left-10,a},t.prototype._PositionFF=function(t,e){if(void 0==t.nodeType)return t;for(var a={x:0,y:0},n=t;n&&(a.x+=n.offsetLeft,a.y+=n.offsetTop,!e||n.offsetParent!=e);n=n.offsetParent);return a.x+=parseInt(t.offsetWidth/2),a.y+=parseInt(t.offsetHeight/2),a},t.prototype._IELine=function(t,e,a,n,r,o){if(!(Math.abs(e-n)<16&&t==a)){var i=this._NPos(t,e,a,n,8);t=i[0],e=i[1],a=i[2],n=i[3];var s={left:0,top:0},l=document.createElement("<v:line></v:line>");l.from=t-s.left+","+(e-s.top),l.to=a-s.left+","+(n-s.top),l.strokeColor=o,l.strokeWeight=r+"pt",l.style.cssText="position:absolute;z-index:999;top:0;left:0;behavior:url(#default#VML);",l.coordOrigin="0,0",this._Lines.push(l),this._TmpDom.appendChild(l)}},t.prototype._IELine2=function(t,e,a,n,r,o){if(!(Math.abs(e-n)<16&&t==a)){var i=this._NPos(t,e,a,n,8);t=i[0],e=i[1],a=i[2],n=i[3];var s={left:5,top:8},l=document.createElement("<v:line></v:line>");l.from=t-s.left+","+(e-s.top),l.to=a-s.left+","+(n-s.top+14),l.strokeColor=o,l.strokeWeight=r+"pt",l.style.cssText="position:absolute;z-index:999;top:0;left:0;behavior:url(#default#VML);",l.coordOrigin="0,0",this._Lines.push(l),this._TmpDom.appendChild(l)}},t.prototype._FFLine=function(t,e,a,n,r,o){if(!(Math.abs(e-n)<12&&t==a)){var i=this._NPos(t,e,a,n,6);t=i[0],e=i[1],a=i[2],n=i[3];var s=document.createElement("canvas");s.style.position="absolute",s.style.visibility="visible",s.width=Math.abs(t-a)||r,s.height=Math.abs(e-n-4)||r-4;var l=Math.min(e,n),d=Math.min(t,a);s.style.top=l+2+"px",s.style.left=d+"px";var c=s.getContext("2d");c.save(),c.strokeStyle=o,c.lineWidth=r,c.beginPath(),c.moveTo(t-d,e-l-4),c.lineTo(a-d,n-l),c.closePath(),c.stroke(),c.restore(),this._Lines.push(s),this._TmpDom.appendChild(s)}},t.prototype._FFLine2=function(t,e,a,n,r,o){if(!(Math.abs(e-n)<12&&t==a)){var i=this._NPos(t,e,a,n,6);t=i[0],e=i[1],a=i[2],n=i[3];var s=document.createElement("canvas");s.style.position="absolute",s.style.visibility="visible",s.width=Math.abs(t-a-5)||r-5,s.height=Math.abs(e-n-13)||r-13;var l=Math.min(e,n),d=Math.min(t,a);s.style.top=l+6+"px",s.style.left=d+2+"px";var c=s.getContext("2d");c.save(),c.strokeStyle=o,c.lineWidth=r,c.beginPath(),c.moveTo(t-d,e-l-13),c.lineTo(a-d,n-l+2),c.closePath(),c.stroke(),c.restore(),this._Lines.push(s),this._TmpDom.appendChild(s)}},t.prototype._OLine=function(t,e,a,n,r,o){var i=$("#container").offset();t-=i.left,e-=i.top,a-=i.left,n-=i.top;var s=t,l=e;a<t&&(s=a),n<e&&(l=n);var d=Math.abs(t-a),c=Math.abs(e-n);0==d&&(d=r),0==c&&(c=r);var u=document.createElement("canvas");document.getElementById(this._canvas).appendChild(u);var h=u.getContext("2d");$(u).attr("class","cvs"),$(u).css("left",s+"px"),$(u).css("top",l+"px"),$(u).attr("width",d),$(u).attr("height",c),h.strokeStyle=o,h.lineWidth=r,h.beginPath();var f=0,m=0,p=0,v=0,b=(a-t)/(n-e),C=b>1?1.5*(b-1)/b:0,_=5.5+C;t<a?(f=_,m=_/b,p=d-_,v=c-_/b):t>a?(f=d-_,m=-_/b,p=_,v=c+_/b):(f=0,m=7,p=0,v=c-7),h.moveTo(f,m),h.lineTo(p,v),h.stroke()},t.prototype._NPos=function(t,e,a,n,r){var o=t-a,i=e-n,s=Math.round(Math.sqrt(Math.pow(o,2)+Math.pow(i,2))),l=Math.round(o*r/s),d=Math.round(i*r/s);return[a+l,n+d,t-l,e-d]},t.prototype._IsSort=function(){var t=document.getElementById(this.issnunoId);if(void 0!=t)return!(t.childNodes[0].className.indexOf("iconJT")>-1)},t.prototype.Class=function(){return Class},t}),define("core/views/publicComponent/chart/baseExt.component",["./baseLine.component"],function(t){var e=t;return e.prototype.DrawLine=function(t,e,a,n,r,o,i,s,l){var d=this.tbody.rows;void 0==n&&(n=d.length);for(var c=new Array,u=a;u<n;u++)for(var h=t;h<e&&(null!=d[u]&&null!=d[u].cells[h]);h++)d[u].cells[h].className.indexOf(r)>-1&&c.push(d[u].cells[h]);void 0==l&&(l=1),this._Line(c,o,i,s,l)},e.prototype.DrawLineCls=function(t,e,a,n,r,o,i,s,l){var d=this.tbody.rows;void 0==n&&(n=d.length);for(var c=new Array,u=a;u<n;u++)for(var h=t;h<e&&(null!=d[u]&&null!=d[u].cells[h]);h++)for(var f=0;f<r.length;f++)d[u].cells[h].className.indexOf(r[f])>-1&&c.push(d[u].cells[h]);void 0==l&&(l=1),this._Line(c,o,i,s,l)},e.prototype.DrawLineArr=function(t){if(null!=t&&t.length>0)try{for(var e=0;e<t.length;e++)this.DrawLine(t[e].begincol,t[e].endcol,t[e].beginclum,t[e].endclum,t[e].className,t[e].lineWidth,t[e].lineColor,t[e].canvas,t[e].type)}catch(t){}},e.prototype.DrawLineClsArr=function(t){if(null!=t&&t.length>0)try{for(var e=0;e<t.length;e++)this.DrawLineCls(t[e].begincol,t[e].endcol,t[e].beginclum,t[e].endclum,t[e].classNames,t[e].lineWidth,t[e].lineColor,t[e].canvas,t[e].type)}catch(t){}},e}),define("core/views/publicComponent/chart/drawTable.component",["./baseExt.component"],function(_BaseExt){var _Object={};return _Object.addOne=0,_Object.tbodyOBject,_Object.drawColumn,_Object.theadColumn,_Object.renderTable=function(t,e,a,n,r,o,i){if(void 0==n)return void console.error("你都没配thead.config.js配置！！！！!");if(void 0==o)return void console.error("你都没配style.config.js配置！！！！!");if(void 0==r)return void console.error("请求肯定出问题啦～，都没数据源！！！，又或者是你dealWithData.container没有返回数据啦！！！！");var s=document.getElementById(t),l=_Object.getTheadTitle(n),d=_Object.renderTbody(r,l,o,n),c=d.html,u=d.drawColumn,h=_Object.getTheaderMaxColumn(_Object.renderThead(n));_Object.tbodyOBject=r,_Object.drawColumn=u,_Object.theadColumn=h;var f="";f=void 0==r.missBottomStatList?"<thead>"+_Object.renderThead(n)+'</thead><tbody class="trend">'+c+"</tbody>":"<thead>"+_Object.renderThead(n)+'</thead><tbody class="trend">'+c+'</tbody><tbody class="preselection"></tbody><tbody class="thead">'+_Object.renderThead(n,2)+'</tbody><tbody class="statistics">'+_Object.renderStatistics(l,r,o)+"</tbody>",s.innerHTML='<table cellpadding="0" cellspacing="0" border="1" width="100%" id="'+e+'">'+f+'</table><div id="'+a+'" style="display:none;"></div>',i(),$("#"+a).html(""),_Object.drawTableLine(t,e,a,r,_BaseExt,u,h)},_Object.updateTableLine=function(t,e,a){void 0!=a&&(null!=document.getElementById(a)&&(document.getElementById(a).innerHTML=""),_Object.drawTableLine(t,e,a,_Object.tbodyOBject,_BaseExt,_Object.drawColumn,_Object.theadColumn))},_Object.drawTableLine=function(t,e,a,n,r,o,i){var s=new r(t,e),l=[];for(var d in o){if(!o[d].column[0])return console.error(d+"部分画线缺少开始列(begincol):"),!1;if(!o[d].column[o[d].column.length-1])return console.error(d+"部分画线缺少结束列(endcol):"),!1;if(!i)return console.error(d+"部分画线缺少开始行(beginclum):"),!1;if(!(i+n.missStatList.length))return console.error(d+"部分画线缺少结束行(endclum):"),!1;if(!o[d].lineWidth)return console.error(d+"部分画线缺少画线的宽度(lineWidth):"),!1;if(!o[d].lineColor)return console.error(d+"部分画线缺少画线的颜色(lineColor):"),!1;if(!a)return console.error(d+"部分画线缺少canvas对象id名(canvas):"),!1;var c=1;/ball/g.test(o[d].className)?c=1:/box/g.test(o[d].className)&&(c=2),l.push({begincol:o[d].column[0]-1,endcol:o[d].column[o[d].column.length-1],beginclum:i,endclum:i+n.missStatList.length,className:o[d].className,lineWidth:o[d].lineWidth?o[d].lineWidth:1,lineColor:o[d].lineColor?o[d].lineColor:"red",canvas:a,type:c})}s.DrawLineArr(l)},_Object.renderStatistics=function(t,e,a){if(!e||!t||!a)return void console.error("renderStatistics: 参数不能为空！");var n=e.missBottomStatList,r="",o="";if(void 0!=e.missStatList[0])for(var i,s=e.missStatList[0].statResult.length,l=a.missBottomStatList,d=["出现总次数","最大遗漏值","最大连出值"],c=0,u=0;u<n.length;u++){if(c++,r="",r+='<td column="'+c+'">'+d[u]+"</td>",null!=n[u].result)if(""!=n[u].result)for(var h=n[u].result.split(","),f=0;f<h.length;f++)r+='<td column="'+c+'"  class="'+(l.period?l.period:"")+'"  ><span  class="'+(l.periodSpan?l.periodSpan:"")+'">'+h[u]+"</span></td>";else r+="";else c=s,r+='<td column="'+c+'" class="'+(l.period?l.period:"")+'"  colspan="'+(s+_Object.addOne)+'">&nbsp;</td>',c++;var m=[],p={};if(n[u].otherData&&n[u].otherData.forEach(function(t){m.push(t.column),p[t.column]=t}),m=m.sort(function(t,e){return t>e}),0==u)for(var v in n[u].statData){_Object.contains(m,c)&&(r+='<td class="'+(p[c].bg?p[c].bg:"")+'" column="'+(c+1)+'">'+p[c].data+"</td>",c++,m.shift());for(var f=0;f<n[u].statData[v].length;f++){if(c++,void 0==t[v])return console.error("_theadTitle["+v+"]为undefined,有可能你的配置thead.config配置和数据源的结构对不上，又或者是thead.config配置和style.config.js的结构对不上！_theadTitle目前是："+Object.keys(t).length+"个模块"),!1;i=t[v].isShow,r+='<td column="'+c+'" class="'+(l.statData[v].defalut?l.statData[v].defalut:"")+'"  '+(i?"":"style=display:none")+'  modular="'+v+'"><span  class="'+(l.statData[v].defalutSpan?l.statData[v].defalutSpan:"")+'" >'+n[u].statData[v][f]+"</span></td>"}}else for(var v in n[u].statData){_Object.contains(m,c)&&(r+='<td class="'+p[c].bg+'" column="'+(c+1)+'">'+p[c].data+"</td>",c++,m.shift());for(var f=0;f<n[u].statData[v].length;f++)c++,i=t[v].isShow,r+='<td column="'+c+'" class="'+(l.statData[v].defalut?l.statData[v].defalut:"")+'"  '+(i?"":"style=display:none")+' modular="'+v+'" >'+n[u].statData[v][f]+"</td>"}m.length>0&&(r+='<td class="'+(p[c].bg?p[c].bg:"")+'" column="'+(c+1)+'">'+p[c].data+"</td>",c++,m.shift()),c=0,o+="<tr>"+r+"</tr>"}return o},_Object.getTheaderMaxColumn=function(t){return t||console.error("getTheaderMaxColumn: 参数不能为空！"),_Object.patch(t,"<tr>")},_Object.patch=function(_string,_re){return _re=eval("/"+_re+"/ig"),_string.match(_re)?_string.match(_re).length:0},_Object.contains=function(t,e){if(!t||"object"!=typeof t)return void console.error("contains：参数1不存在或者不正确！");if(!e)return void console.error("contains：参数2不存在！");for(var a=t.length;a--;)if(t[a]===e)return!0;return!1},_Object.renderThead=function(t,e){if(!t)return void console.error("renderThead：参数theadObject不能为空！");void 0==e?e=1:_Object.contains([1,2],e)||(e=1);for(var a,n="",r="",o=0,i=0,s=0,l=0;l<t.length;l++){r="";for(var d in t[l]){a=void 0==t[l][d].isShow||1==t[l][d].isShow;var c;if(c=0==parseInt(d.replace("_th",""))?0:parseInt(d.replace("_th","")-1),t[l][d].rowspan)t[l][d].colspan?r+="<"+(1==e?"th":"td")+'    colspan="'+t[l][d].colspan+'" rowspan="'+t[l][d].rowspan+'"  '+(a?"":"style=display:none")+" "+(t[l][d].width?"width="+t[l][d].width:"")+">"+t[l][d].content+"</"+(1==e?"th":"td")+">":r+="<"+(1==e?"th":"td")+'   rowspan="'+t[l][d].rowspan+'"   '+(a?"":"style=display:none")+"  "+(t[l][d].width?"width="+t[l][d].width:"")+">"+t[l][d].content+"</"+(1==e?"th":"td")+">",s++;else if(t[l][d].colspan)r+="<"+(1==e?"th":"td")+'  modular="data_'+(c-s)+'"  colspan="'+t[l][d].colspan+'"  '+(a?"":"style=display:none")+" "+(t[l][d].width?"width="+t[l][d].width:"")+">"+t[l][d].content+"</"+(1==e?"th":"td")+">";else if(t[l][d].value)if(/\~/g.test(t[l][d].value)){o=parseInt(t[l][d].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[0]),i=parseInt(t[l][d].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[1]);for(var u=o;u<=i;u++)t[l][d].isShowZero?r+="<"+(1==e?"th":"td")+'  modular="data_'+c+'"  '+(a?"":"style=display:none")+">"+(u<10?"0"+u:u)+"</"+(1==e?"th":"td")+">":r+="<"+(1==e?"th":"td")+'  modular="data_'+c+'"  '+(a?"":"style=display:none")+">"+u+"</"+(1==e?"th":"td")+">"}else if(/\|/g.test(t[l][d].value))for(var h=t[l][d].value.replace(/(^\s*)|(\s*$)/g,"").split("|"),u=0;u<h.length;u++)h[u]&&(r+="<"+(1==e?"th":"td")+'  modular="data_'+c+'"   '+(a?"":"style=display:none")+">"+h[u]+"</"+(1==e?"th":"td")+">");else r+="<"+(1==e?"th":"td")+'  modular="data_'+c+'"   '+(a?"":"style=display:none")+">"+t[l][d].value+"</"+(1==e?"th":"td")+">"}n+="<tr>"+r+"</tr>"}return n},_Object.getTheadTitle=function(t){if(!t)return void console.error("getTheadTitle：参数theadObject不能为空！");for(var e,a=[],n=0,r=0,o=0,i=0;i<t.length;i++)for(var s in t[i])if(void 0!=t[i][s].value){var l=[];if(""!=t[i][s].value)if(/\~/g.test(t[i][s].value)){n=parseInt(t[i][s].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[0]),r=parseInt(t[i][s].value.replace(/(^\s*)|(\s*$)/g,"").split("~")[1]);for(var d=n;d<=r;d++)t[i][s].isShowZero?l.push(d<10?"0"+d:d):l.push(d)}else if(/\|/g.test(t[i][s].value))for(var c=t[i][s].value.replace(/(^\s*)|(\s*$)/g,"").split("|"),d=0;d<c.length;d++)l.push(c[d]);e=void 0==t[i][s].isShow||1==t[i][s].isShow,a["data_"+o]={isDrawLine:!!t[i][s].isDrawLine,data:l,isShow:e,isSwitch:t[i][s].isSwitch,specValue:t[i][s].specValue,replaceTitle:t[i][s].replaceTitle,isAllAwardNumber:t[i][s].isAllAwardNumber,width:t[i][s].width},o++}return a},_Object.renderTbody=function(t,e,a,n){if(!t)return void console.error("renderTbody：参数tbodyOBject不能为空！");for(var r=t.missStatList,o=a.missStatList,i="",s=0,l=0;l<r.length;l++){var d;r[l].period?(s++,d='<td class="'+(o.periodNumber?o.periodNumber:"")+'"  column="'+s+'"  modular="period_0">'+r[l].period+"</td>"):(d="",console.warn("period为空！"));var c="",u="",h={},f=0;if(r[l].result){var m=r[l].statResult;if(n&&n[0]&&!n[0]._th2.noZero){var p=[];m.forEach(function(t){p.push(t<10?"0"+t:t)}),m=p}for(var v=0;v<m.length;v++){if(/\|/g.test(m[v])){for(var b=m[v].replace(/(^\s*)|(\s*$)/g,"").split("|"),C=0;C<b.length;C++)C==b.length-1?c+='<td class = "'+(o.period?o.period:"")+"  "+(o.periodBall?o.periodBall:"")+'"  column="'+s+'"  modular="result_'+v+'"><span class="'+(o.periodSpan?o.periodSpan:"")+'">'+b[C]+"</span></td>":c+='<td class = "'+(o.period?o.period:"")+'" column="'+s+'"  modular="result_'+v+'"><span class="'+(o.periodSpan?o.periodSpan:"")+'">'+b[C]+"</span></td>",s++;_Object.addOne=1}else c+='<td class = "'+(o.period?o.period:"")+'" column="'+s+'"  modular="result_'+v+'"><span class="'+(o.periodSpan?o.periodSpan:"")+'">'+m[v]+"</span></td>",s++;f+=parseInt(m[v])}statResultI=""}else c+="",console.warn("statResult为空！");var _=[],g={};r[l].otherData&&r[l].otherData.forEach(function(t){_.push(t.column),g[t.column]=t}),_=_.sort(function(t,e){return t>e});for(var y in r[l].statData){var w=[];_Object.contains(_,s)&&(u+='<td class="'+(g[s].bg?g[s].bg:"")+'" column="'+(s+1)+'">'+g[s].data+"</td>",s++,_.shift());for(var v=0;v<r[l].statData[y].length;v++)if(s++,w.push(s),0==r[l].statData[y][v]){var T="";e[y].isSwitch&&(T=o.statData[y]["switchNumber"+(v+1)]),void 0==e[y].replaceTitle?void 0==e[y].isAllAwardNumber?u+='<td class="'+(o.statData[y].awardNumber?T||o.statData[y].awardNumber:"")+"  "+(o.statData[y].specClass?o.statData[y].specClass:"")+'"  '+(o.statData[y].awardNumber?' css-awardNumber="'+o.statData[y].awardNumber+'"':"")+(o.statData[y].heavyNumber?' css-heavyNumber="'+o.statData[y].heavyNumber+'"':"")+(o.statData[y].serialNumber?' css-serialNumber="'+o.statData[y].serialNumber+'"':"")+(o.statData[y].edgeNumber?' css-edgeNumber="'+o.statData[y].edgeNumber+'"':"")+(o.statData[y].edgeTwoNumber?' css-edgeTwoNumber="'+o.statData[y].edgeTwoNumber+'"':"")+" column="+s+' modular="'+y+'"  '+(e[y].isShow?"":"style=display:none")+'><span class="'+(o.statData[y].defalutSpan?o.statData[y].defalutSpan:"")+'">'+(e[y].data[v]||0==e[y].data[v]?e[y].data[v]:e[y].specValue?r[l].statData[y][v]:"")+"</span></td>":u+='<td class="'+(o.statData[y].awardNumber?T||o.statData[y].awardNumber:"")+'"  '+(o.statData[y].awardNumber?' css-awardNumber="'+o.statData[y].awardNumber+'"':"")+(o.statData[y].heavyNumber?' css-heavyNumber="'+o.statData[y].heavyNumber+'"':"")+(o.statData[y].serialNumber?' css-serialNumber="'+o.statData[y].serialNumber+'"':"")+(o.statData[y].edgeNumber?' css-edgeNumber="'+o.statData[y].edgeNumber+'"':"")+(o.statData[y].edgeTwoNumber?' css-edgeTwoNumber="'+o.statData[y].edgeTwoNumber+'"':"")+" column="+s+' modular="'+y+'"  '+(e[y].isShow?"":"style=display:none")+'><span class="'+(o.statData[y].defalutSpan?o.statData[y].defalutSpan:"")+'">'+f+"</span></td>":u+='<td class="'+(o.statData[y].awardNumber?T||o.statData[y].awardNumber:"")+'"  '+(o.statData[y].awardNumber?' css-awardNumber="'+o.statData[y].awardNumber+'"':"")+(o.statData[y].heavyNumber?' css-heavyNumber="'+o.statData[y].heavyNumber+'"':"")+(o.statData[y].serialNumber?' css-serialNumber="'+o.statData[y].serialNumber+'"':"")+(o.statData[y].edgeNumber?' css-edgeNumber="'+o.statData[y].edgeNumber+'"':"")+(o.statData[y].edgeTwoNumber?' css-edgeTwoNumber="'+o.statData[y].edgeTwoNumber+'"':"")+" column="+s+' modular="'+y+'"  '+(e[y].isShow?"":"style=display:none")+'><span class="'+(o.statData[y].defalutSpan?o.statData[y].defalutSpan:"")+'">'+e[y].replaceTitle(e[y].data[v]||0==e[y].data[v]?e[y].data[v]:e[y].specValue?r[l].statData[y][v]:"")+"</span></td>"}else{if(void 0==e[y])return console.error("_theadTitle["+y+"]为undefined,有可能你的配置thead.config配置和数据源的结构对不上，又或者是thead.config配置和style.config.js的结构对不上！_theadTitle目前是："+Object.keys(e).length+"个模块"),!1;if(void 0==o.statData[y])return console.error("cssObject.statData["+y+"]为undefined,有可能是thead.config配置和style.config.js的结构对不上！cssObject.statData目前是："+Object.keys(o.statData).length+"个模块"),!1;u+='<td class="'+(o.statData[y].defalut?o.statData[y].defalut:"")+(o.statData[y].converAwardNumber?o.statData[y].converAwardNumber:"")+'"'+(o.statData[y].omissionDelamination?' css-omissionDelamination="'+o.statData[y].omissionDelamination+'"':"")+" column="+s+' modular="'+y+'"  '+(e[y].isShow?"":"style=display:none")+'  data-value="'+r[l].statData[y][v]+'"><span class="'+(o.statData[y].defalutSpan?o.statData[y].defalutSpan:"")+'"></span></td>'}e[y].isDrawLine&&(h[y]={lineColor:o.statData[y].lineColor?o.statData[y].lineColor:null,lineWidth:o.statData[y].lineWidth?o.statData[y].lineWidth:0,className:o.statData[y].awardNumber?o.statData[y].awardNumber:null,column:w})}_.length>0&&(u+='<td class="'+(g[s].bg?g[s].bg:"")+'" column="'+(s+1)+'">'+g[s].data+"</td>",s++,_.shift()),s=0,i+="<tr>"+d+c+u+"</tr>"}return{html:i,drawColumn:h}},_Object}),define("core/views/publicComponent/chart/changeState.component",["jquery","Util","../../../services/event.service"],function(t,e,a){var n={};n.tempName="";var r={ballStyle:{ballBlue:"bg-ball-blue",ballRed:"bg-ball-red",ballPurple:"bg-ball-purple",ballGreen:"bg-ball-green"},fontStyle:{fontBold:"font-bold",fontGray:"font-gray",fontRed:"font-red",fontBlue:"font-blue",fontGreen:"font-green",fontPurple:"font-purple",fontWhite:"font-white"},bgBoxStyle:{bgBoxTintBlue:"bg-box-tintBlue",bgBoxRed:"bg-box-red",bgBoxBlue:"bg-box-blue",bgBoxPurple:"bg-box-purple",bgBoxGreen:"bg-box-green",bgBoxGray:"bg-box-gray"}};return n.addSegmentingLine=function(e,a,n,r,o){var i=t(e).find("thead tr").length;t(e).find("thead tr").each(function(e,s){0!=i&&t(s).find('th[modular="'+a+'"]').each(function(e,a){for(var i=0;i<n.length;i++)if(e==n[i]){t(a).css({"border-right-width":r+"px","border-right-color":o});break}})}),t(e).find(".trend tr").each(function(e,i){t(i).find('td[modular="'+a+'"]').each(function(e,a){for(var i=0;i<n.length;i++)if(e==n[i]){t(a).css({"border-right-width":r+"px","border-right-color":o});break}})})},n.addRightBorder2px=function(e,a,n){t(e).find("thead tr").each(function(e,r){t(r).find("th").each(function(r,o){if(0==e&&void 0!=s)t(o).css({"border-right-width":a+"px","border-right-color":n});else{var i=t(o).attr("modular"),s=t(o).next().attr("modular");void 0==i&&void 0==s?t(o).css({"border-right-width":a+"px","border-right-color":n}):i!==s&&void 0!=s?t(o).css({"border-right-width":a+"px","border-right-color":n}):void 0!=i&&void 0==s&&t(o).css({"border-right-width":a+"px","border-right-color":n})}})}),t(e).find(".trend tr").each(function(e,r){t(r).find("td").each(function(e,r){var o=t(r).attr("modular"),i=t(r).next().attr("modular");/period_/g.test(o)?0==/period_/g.test(i)&&t(r).css({"border-right-width":a+"px","border-right-color":n}):/result_/g.test(o)?0==/result_/g.test(i)&&t(r).css({"border-right-width":a+"px","border-right-color":n}):o!==i&&void 0!=i&&t(r).css({"border-right-width":a+"px","border-right-color":n})})})},n.addPreselectionZindex=function(){var e=t("#preselectionButton").parent().find(".npb-ulB").length;void 0!=e&&t("#preselectionButton").parent().find(".npb-ulB").each(function(a,n){t(n).css({"z-index":e--})})},n.addTotalStyle=function(e){t(e).find("td").each(function(e,a){1!=t(a).attr("column")&&n.changeHotAndColdColor(t(a),5,12,13)})},n.addTotalStyle2=function(e){t(e).find("td").each(function(e,a){1!=t(a).attr("column")&&([2,3,4,5].Contains(t(a).attr("column"))?n.changeHotAndColdColor(t(a),8,12,13):6==t(a).attr("column")?n.changeHotAndColdColor(t(a),32,37,38):7==t(a).attr("column")?n.changeHotAndColdColor(t(a),43,47,48):[8,9,10,11,12,13].Contains(t(a).attr("column"))&&n.changeHotAndColdColor(t(a),7,20,21))})},n.changeHotAndColdColor=function(t,e,a,n){parseInt(t.attr("data-value"))<=e?t.addClass(r.bgBoxStyle.bgBoxGreen):parseInt(t.attr("data-value"))>e&&parseInt(t.attr("data-value"))<=a?t.addClass(r.bgBoxStyle.bgBoxGray):parseInt(t.attr("data-value"))>=n&&t.addClass(r.bgBoxStyle.bgBoxRed)},n.getCookie=function(a,r,o,i){var s=t("#mainContainer").attr("data-lotteryCode");-1==a.indexOf("_")&&(a=a+"_"+s);var l,d=e.getCookie(a),c=parseInt(t("#mainContainer").attr("data-flot"));if(d){var u=JSON.parse(d);if(void 0!=u[s][c]&&u[s][c].length>0){t("#preselectionButton").html("隐藏预选号码");for(var h in u)if(h==s){l=u[h][c];for(var f=0;f<l.length;f++)t("#preselectionButton").parent().append(n.addPreselection(r,o,i));t("#preselectionButton").parent().find(".npb-ulB").each(function(e,a){t(a).find(".npb-liB").each(function(a,n){t(n).parent().find(".selectedText").html(u[s][c][e].period),t(n).find(".num").each(function(n,r){if(0==a){for(var o=0;o<l[e].frontArea.length;o++)if(l[e].frontArea[o]==parseInt(t(r).html())){if(t(r).addClass("active"),t(r).attr("data-size","1"),l[e].frontCount.length>0){var i=l[e].frontCount[o];t(r).attr("data-size",i),i>1?t(r).html(l[e].frontArea[o]+"<i class='small-"+l[e].frontCount[o]+"'></i>"):t(r).html(l[e].frontArea[o])}break}}else for(var o=0;o<l[e].backArea.length;o++)if(l[e].backArea[o]==parseInt(t(r).html())){t(r).addClass("active");break}})})})}}}n.addPreselectionZindex()},n.setCookie=function(a){var n,r,o,i=[];if(n=parseInt(t("#mainContainer").attr("data-flot")),r=t("#mainContainer").attr("data-lotteryCode"),a=a+"_"+r,o=e.getCookie(a),t(".lt-numPrimaryBlock .npb-ulB").each(function(e,a){var n={},r=[],o=[],s=[],l=[];t(a).find(".npb-liB").each(function(e,a){l=t(a).parents(".npb-ulB").find(".selectedText").html(),t(a).find(".active").each(function(a,n){0==e?(r.push(parseInt(t(n).html())),s.push(parseInt(t(n).attr("data-size")))):1==e&&o.push(parseInt(t(n).html()))})}),n.period=l,n.frontArea=r,n.frontCount=s,n.backArea=o,i.push(n)}),void 0==o){var s={};s[r]={},s[r][n]=i}else{o=JSON.parse(o);for(var l in o)if(l==r){o[l][n]=i,s=o;break}}e.setCookie(a,JSON.stringify(s))},n.preselection=function(e){t("#preselectionButton").hide()},n.PrefixInteger=function(t,e){return(Array(e).join(0)+t).slice(-e)},
n.IssueList=function(e){var a=1,n=t("#mainContainer").attr("data-lotteryCode");void 0!=t("#maxPeriod").attr("data-max")&&(a=parseInt(t("#maxPeriod").attr("data-max")));var r="";if(1==a||"bjk3"==n)for(var o=parseInt(e),i=0;i<10;i++)r+='<span class="lis" data-code="">'+o+"</span>",o++;else{var s,l,d,c=e.substring(0,e.length-3),u=0;if("gxkl10"==n){c=e.substring(0,e.length-2),u=parseInt(e.substring(e.length-2,e.length)),s=parseInt(c.substring(0,4)),d=parseInt(c.substring(4,7)),l="";for(var i=0;i<10;i++)u>a?(u=1,d+=1,r+='<span class="lis" data-code="">'+s+this.PrefixInteger(d,3)+"01</span>"):r+='<span class="lis" data-code="">'+s+d+this.PrefixInteger(u,2)+"</span>",u++}else{u=parseInt(e.substring(e.length-3,e.length)),s=c.substring(0,4),l=c.substring(4,6),d=c.substring(6,8);for(var h=new Date(s,l,d),i=0;i<10;i++)u>a?(h.setDate(parseInt(d)+1),u=1,r+='<span class="lis" data-code="">'+h.getFullYear()+h.getMonth()+1+h.getDate()+"001</span>"):(c=h.getFullYear()+""+h.getMonth()+1+h.getDate(),r+='<span class="lis" data-code="">'+c+this.PrefixInteger(u,3)+"</span>"),u++}}return r},n.addPreselection=function(e,a,r){void 0==e&&(e=1);var o="",i=n.dealWithAreaString(a),s="",l=t(".next-period").html().replace("期",""),d="";d=this.IssueList(l);for(var c=0;c<i.length;c++)s+='<span class="num" data-size="0" data-value="'+i[c]+'">'+i[c]+"</span>";if(1==e&&void 0!=a)o+='<div class="npb-ulB"><div class="public_selectPlugIn"><span class="selectArrow"></span><span class="selectedText">'+l+'</span><div class="selectOption" style="display: none;">'+d+'</div></div><div class="npb-liB  frontArea" data-max='+a.maxNumber+" data-more="+(void 0==a.more?"false":"true")+'><span class="text">前区预选：</span><div class="number">'+s+'</div><div class="tool"><a href="javascript:void(0)" class="clearNumber">清空号码</a><i>|</i><a href="javascript:void(0)" class="addNumber">增加一行</a><i>|</i><a href="javascript:void(0)" class="deleteNumber">删除行</a></div></div></div>';else if(2==e&&void 0!=r){for(var u=n.dealWithAreaString(r),h="",c=0;c<u.length;c++)h+='<i class="num">'+u[c]+"</i>";o+='<div class="npb-ulB"><div class="public_selectPlugIn"><span class="selectArrow"></span><span class="selectedText">'+l+'</span><div class="selectOption" style="display: none;">'+d+'</div></div><div class="npb-liB frontArea" data-max='+a.maxNumber+'><span class="text">前区预选：</span><div class="number">'+s+'</div></div><div class="npb-liB  backArea" data-max='+r.maxNumber+'><span class="text">后区预选：</span><div class="number">'+h+'</div><div class="tool"><a href="javascript:void(0)" class="clearNumber">清空号码</a><i>|</i><a href="javascript:void(0)" class="addNumber">增加一行</a><i>|</i><a href="javascript:void(0)" class="deleteNumber">删除行</a></div></div></div>'}return o},n.dealWithAreaString=function(t){if(void 0==t)return void console.error("dealWithAreaString：参数不能为空！");var e=[],a="";if(void 0!=t.number)if(/\~/g.test(t.number)){a=t.number.replace(/(^\s*)|(\s*$)/g,"").split("~");for(var n=parseInt(a[0]);n<=parseInt(a[1]);n++)e.push(n)}else if(/\|/g.test(t.number)){a=t.number.replace(/(^\s*)|(\s*$)/g,"").split("|");for(var n=0;n<a.length;n++)e.push(n)}return e},n.addTypeAwardBlue=function(e){return t(".trend [modular="+e+"]").each(function(e,a){for(var n="",r=t(a).attr("data-value"),o=r.split(","),i=0;i<o.length;i++)"合"==o[i]||"小"==o[i]||"偶"==o[i]?n+='<i class="font-blue">'+o[i]+"</i>":n+='<i class="font-red">'+o[i]+"</i>";t(a).html(n)}),!1},n.addBigAward=function(e,a){return 1,t(e).find(".trend tr").each(function(e,a){t(a).find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))&&parseInt(t(a).find("span").html())>18){var n=t(a).find("span");n.removeClass(r.fontStyle.fontBlue),n.addClass(r.fontStyle.fontRed)}})}),!1},n.addSamePeriod=function(e,a,o,i){var s=parseInt(t("#mainContainer").attr("data-flot")),l=[10,11,13,14,16,17],d=[30,31];void 0==a&&(a=2),o=void 0==o?"":o,t(e).find(".trend tr").each(function(e,c){var u,h=[];""==o?t(c).find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))&&(h.push({data:parseInt(t(a).find("span").html()),tdDom:t(a)}),0==/result_/g.test(t(a).next().attr("modular"))))return!1}):t(c).find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))){var n=parseInt(t(a).attr("modular").split("_")[1]);if(l.Contains(s)?0!==n&&1!==n&&2!==n&&h.push({data:parseInt(t(a).find(".sscStar").html()),tdDom:t(a)}):d.Contains(s)&&0!==n&&1!==n&&h.push({data:parseInt(t(a).find(".sscStar").html()),tdDom:t(a)}),0==/result_/g.test(t(a).next().attr("modular")))return!1}}),u=n.getSamePeriod(h);for(var f=0;f<u.length;f++)o||(2==u[f].count?u[f].tdDomArr[0].parent().find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))&&(t(a).find("span").addClass(r.fontStyle.fontRed),0==/result_/g.test(t(a).next().attr("modular"))))return!1}):u[f].count>2&&u[f].tdDomArr[0].parent().find("td").each(function(e,a){var n="";if(n=o?r.fontStyle.fontRed:r.fontStyle.fontPurple,/result_/g.test(t(a).attr("modular"))&&(t(a).find("span").addClass(n),0==/result_/g.test(t(a).next().attr("modular"))))return!1}));2==a&&t(c).find("td").each(function(e,a){if(t(a).attr("modular")==(i||"data_0"))for(var n=0;n<u.length;n++)for(var o=0;o<u[n].tdDomArr.length;o++)if(2==u[n].count){if(parseInt(t(a).find("span").html())==u[n].num&&t(a).hasClass(t(a).attr("css-awardnumber"))&&t(a).removeAttr("class").addClass(r.ballStyle.ballRed).find("span").append('<i class="small-2"></i>'),t(a).attr("modular")!=(i||"data_0"))return!1}else if(u[n].count>2&&(parseInt(t(a).find("span").html())==u[n].num&&t(a).hasClass(t(a).attr("css-awardnumber"))&&t(a).removeAttr("class").addClass(r.ballStyle.ballPurple).find("span").append('<i class="small-'+u[n].count+'"></i>'),t(a).attr("modular")!=(i||"data_0")))return!1})})},n.getSamePeriod=function(t){var e=[];t.sort(n.sortBy("data",!1));for(var a=0;a<t.length;){for(var r=0,o=[],i=a;i<t.length;i++)t[a].data==t[i].data&&(r++,r>=2?o.push(t[i].tdDom):o.push(t[a].tdDom));e.push({num:t[a].data,count:r,tdDomArr:o}),a+=r}return e},n.sortBy=function(t,e){return e=void 0==e?1:e?1:-1,function(a,n){var r=parseFloat(a[t]),o=parseFloat(n[t]);return r<o?-1*e:r>o?1*e:0}},n.changeSscWord=function(e){63==e?t(".trend .bigToSmall").each(function(){["8","11","14","17","20"].Contains(t(this).attr("column").toString())?(t(this).addClass("bg-box-red"),t(this).find("span").html("大")):(t(this).addClass("bg-box-blue"),t(this).find("span").html("小"))}):64==e&&t(".trend .oddToEven").each(function(){["8","11","14","17","20"].Contains(t(this).attr("column").toString())?(t(this).addClass("bg-box-red"),t(this).find("span").html("单")):(t(this).addClass("bg-box-blue"),t(this).find("span").html("双"))})},n.changeSscNum=function(){t(".trend tr").each(function(){var e=t(this).find(".specialRedNum").find("span").html();t(this).find(".specialBlueNum").find("span").html(e)})},n.addHotColdNumer=function(e){var a,n,o=t("#periodCount").val().split("|");switch(e){case"100":a=41,n=35;break;case"101":a=20,n=13;break;case"102":a=8,n=3;break;case"103":a=3,n=0;break;case"104":a=2,n=0;break;case"105":case"110":case"114":a=8,n=4;break;case"106":a=20,n=9;break;case"107":a=9,n=6;break;case"108":a=3,n=0;break;case"109":a=3,n=1;break;case"111":case"115":a=15,n=7;break;case"112":case"113":a=2,n=0}for(var i=0;i<o.length;i++)t('[data-cloumn="'+(i+2)+'"]').each(function(){var e=parseInt(t(this).data("value"));e&&(e>=a?t(this).parent().addClass(r.bgBoxStyle.bgBoxRed):e<=n?e>0&&t(this).parent().addClass(r.bgBoxStyle.bgBoxGreen):t(this).parent().addClass(r.bgBoxStyle.bgBoxGray))})},n.addSegmenting=function(e,a,n){t(e).find(".trend tr:nth-child("+n+"n)").each(function(e,n){t(n).addClass(a)})},n.removeSegmenting=function(e,a){t(e).find(".trend tr").each(function(e,n){t(n).removeClass(a)})},n.openBrokenLine=function(e){t(e).show()},n.closeBrokenLine=function(e){t(e).hide()},n.clearOmissionDelaminationEvent=function(e){t(e).find(".trend tr").each(function(e,a){t(a).find("td").each(function(e,a){t(a).removeClass(t(a).attr("css-omissiondelamination"))})})},n.omissionDelaminationEvent=function(e){for(var a=t(e),n=parseInt(a.find('.trend tr:last td[modular="data_0"]:first').attr("column")),r=parseInt(a.find(".trend tr:first").find("[css-omissiondelamination]:last").attr("column")),o=n;o<=r;o++)for(var i=t('.trend [column="'+o+'"]'),s=i.length,l=s-1;l>=0;l--){var d=i.eq(l),c=parseInt(d.attr("data-value")?d.attr("data-value"):0);if(!(c>0))break;d.addClass(d.attr("css-omissiondelamination"))}},n.serialNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).prev(),r=t(a).next(),o=t(a).attr("css-serialNumber");t(a).attr("css-awardNumber")&&n.attr("css-awardNumber")&&t(a).attr("modular")==n.attr("modular")&&(t(a).addClass(o),n.addClass(o)),t(a).attr("css-awardNumber")&&r.attr("css-awardNumber")&&t(a).attr("modular")==r.attr("modular")&&(t(a).addClass(o),r.addClass(o))})},n.clearSerialNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).attr("css-serialNumber");t(a).removeClass(n)})},n.edgeNumberEvent=function(e){t(e).find(".trend tr").each(function(a,n){t(n).find("td").each(function(n,r){var o=t(r).attr("css-edgeNumber");if(o&&t(r).attr("css-awardNumber")){var i=parseInt(t(r).attr("column"))-1,s=a;if(t(e).find(".trend tr").length-1==s){var l=t(e).find(".trend tr").eq(s-1).find("td").eq(i-1),d=t(e).find(".trend tr").eq(s-1).find("td").eq(i+1);l.attr("css-awardNumber")&&t(r).attr("modular")==l.attr("modular")&&t(r).addClass(o),d.attr("css-awardNumber")&&t(r).attr("modular")==l.attr("modular")&&t(r).addClass(o)}else{var c=t(e).find(".trend tr").eq(s+1).find("td").eq(i-1),u=t(e).find(".trend tr").eq(s+1).find("td").eq(i+1);c.attr("css-awardNumber")&&t(r).attr("modular")==c.attr("modular")&&(t(r).addClass(o),c.addClass(o)),u.attr("css-awardNumber")&&t(r).attr("modular")==u.attr("modular")&&(t(r).addClass(o),u.addClass(o))}}})})},n.clearEdgeNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).attr("css-edgeNumber");t(a).removeClass(n)})},n.serialTwoNumberEvent=function(e){t(e).find(".trend tr").each(function(a,n){t(n).find("td").each(function(n,r){var o=t(r).attr("css-edgeTwoNumber");if(o&&t(r).attr("css-awardNumber")){var i=parseInt(t(r).attr("column"))-1,s=a;if(t(e).find(".trend tr").length-1==s){var l=t(e).find(".trend tr").eq(s-2).find("td").eq(i-2),d=t(e).find(".trend tr").eq(s-2).find("td").eq(i+2);l.attr("css-awardNumber")&&t(r).attr("modular")==l.attr("modular")&&t(r).addClass(o),d.attr("css-awardNumber")&&t(r).attr("modular")==l.attr("modular")&&t(r).addClass(o)}else{var c=t(e).find(".trend tr").eq(s+2).find("td").eq(i-2),u=t(e).find(".trend tr").eq(s+2).find("td").eq(i+2);c.attr("css-awardNumber")&&t(r).attr("modular")==c.attr("modular")&&(t(r).addClass(o),c.addClass(o)),u.attr("css-awardNumber")&&t(r).attr("modular")==u.attr("modular")&&(t(r).addClass(o),u.addClass(o))}}})})},n.omissionNumberEvent=function(e,a){t(e).find(".trend td").each(function(e,n){var r=t(n).attr("data-value");r&&void 0==t(n).attr("css-awardNumber")&&(a||void 0==t(n).attr("css-omissiondelamination")?t(n).find("span").html(r):t(n).find("span").html(""))})},n.clearHeavyNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).attr("css-heavyNumber");t(a).removeClass(n)})},n.heavyNumberEvent=function(e){t(e).find(".trend tr").each(function(a,n){t(n).find("td").each(function(n,r){var o=t(r).attr("css-heavyNumber");if(o&&t(r).attr("css-heavyNumber")){var i=parseInt(t(r).attr("column"))-1,s=a;t(e).find(".trend tr").eq(s+1).find("td").eq(i).attr("css-awardNumber")?(t(r).addClass(o),t(e).find(".trend tr").eq(s+1).find("td").eq(i).addClass(o)):t(e).find(".trend tr").length-1==s&&t(e).find(".trend tr").eq(s-1).find("td").eq(i).attr("css-awardNumber")&&t(r).addClass(o)}})})},n.sortColumn=function(e,r,o){var i=[];t(e).find("tbody").eq(0).find("tr").each(function(e,a){t(a).find("td").each(function(e,a){e==r&&i.push({value:parseFloat(t(a).attr("data-value")),domObject:t(a).parent()})})});for(var s=i.sort(n.sortBy("value",o)),l="",d=0;d<s.length;d++)l+="<tr>"+s[d].domObject.html()+"</tr>";t(e).find("tbody").eq(0).html(l),window.setTimeout(function(){a.emit("sortComplate_changeStateComponent")},30)},n.sortBy=function(t,e){return e=void 0==e?1:e?1:-1,function(a,n){var r=parseFloat(a[t]),o=parseFloat(n[t]);return r<o?-1*e:r>o?1*e:0}},n}),define("core/views/publicComponent/timer.component",["underscore","jquery","backbone","../../services/event.service"],function(t,e,a,n){return a.View.extend({initialize:function(){var t=this;t.awardTimeCount=0,t.speed=1e3,t.clearInterval=0,n.on("timerCountDown_timerComponent",function(e){return"object"==typeof e&&e?e.completeCallBack&&"function"==typeof e.completeCallBack?e.countDowningCallBack&&"function"==typeof e.countDowningCallBack?void t.timerCountDown(e):void console.error("TimerComponent: timerCountDown方法参数不正确, countDowningCallBack不存在, 或者是不是一个函数！"):void console.error("TimerComponent: timerCountDown方法参数不正确, completeCallBack不存在, 或者是不是一个函数！"):void console.error("TimerComponent: timerCountDown方法参数不正确！")})},timerCountDown:function(t){var e=this;e.awardTimeCount=t.awardTimeCount,window.clearInterval(e.clearInterval),e.clearInterval=window.setInterval(function(){e.awardTimeCount<=0?t.completeCallBack(e.awardTimeCount):t.countDowningCallBack(e.awardTimeCount),e.awardTimeCount--},e.speed)}})}),define("core/actions/public/timer.action",["underscore","jquery","backbone","../../services/request.service","../../services/event.service"],function(t,e,a,n,r){var o={};return o._awardResultCallBack,o._awardDataCallBack,o._awardTimeCallBack,o.initialize=function(){var t=this;r.on("asyncSuccess_awardResult",function(e){t._awardResultCallBack(e)}),r.on("asyncSuccess_awardData",function(e){t._awardDataCallBack(e)}),r.on("asyncSuccess_awardTime",function(e){t._awardTimeCallBack(e)})},o.requestAwardResult=function(t,e){if("string"!=typeof t||"function"!=typeof e)console.error("请求开奖号码的参数不正确，_lotteryCode不是字符串类型或者_awardType不是字符串类型或者_callBack不是函数类型");else{o._awardResultCallBack=e;var a={t:Math.random()};n.requestGet("/lottery/"+t+"/getawarddata",a,"asyncSuccess_awardResult")}},o.requestAwardData=function(t,e,a){if("string"!=typeof t||"string"!=typeof e||"function"!=typeof a)console.error("请求开奖号码的参数不正确，_lotteryCode不是字符串类型或者_awardType不是字符串类型或者_callBack不是函数类型");else{o._awardDataCallBack=a;var r,i={};i.t=Math.random(),e?r=this.judgmentAwardType(e):console.error("开奖历史为空,请设置开奖类型！"),n.requestGet("/lottery/"+t+"/"+r,i,"asyncSuccess_awardData")}},o.requestAwardDataForHtml=function(t,e,a){if("string"!=typeof t||"string"!=typeof e||"function"!=typeof a)console.error("请求开奖号码的参数不正确，_lotteryCode不是字符串类型或者_awardType不是字符串类型或者_callBack不是函数类型");else{o._awardDataCallBack=a;var r,i={t:Math.random()};e?r=this.judgmentAwardType(e):console.error("开奖历史为空,请设置开奖类型！"),n.requestGetHtml("/lottery/"+t+"/"+r,i,"asyncSuccess_awardData")}},o.requestAwardTime=function(t,e){if("string"!=typeof t||"function"!=typeof e)console.error("请求开奖时间的参数不正确，_lotteryCode不是字符串类型或者_callBack不是函数类型");else{var a={t:Math.random()};o._awardTimeCallBack=e,n.requestGet("/lottery/"+t+"/getawardtimes",a,"asyncSuccess_awardTime")}},o.judgmentAwardType=function(t){var e="";return"history"==t&&(e="getawarddata"),e},o}),define("core/views/containers/public/timer.container",["underscore","jquery","backbone","String","../../../services/event.service","../../publicComponent/timer.component","../../../actions/public/timer.action"],function(t,e,a,n,r,o,i){var s;return{initialize:function(t,e){if(s=this,s.isGetAwardData=!0,t&&"string"==typeof t||console.warn("TimerContainer：_lotteryCode参数不正确, 可能为空，可能不是字符串类型，但是允许为空"),!e||"string"!=typeof e)return void console.error("TimerContainer：_awardType参数不正确");s.lotteryCode=t,s.awardType=e,s.awarding=!1,s.awardWait=0,s.awardWaitSpeed=1e3,s.awardResultWaitSpeed=3e3+1e3*parseInt(Math.floor(5*Math.random()+1)),s.periodText=0,s.isGetJson=s.isReturnJson(s.awardType),i.initialize();new o;s.getAwardTime(s.getAwardTimeCallBack,!0),r.on("isGetAwardData_timerContainer",function(t){void 0!=t&&"boolean"==typeof t?(s.isGetAwardData=t,s.awarding=!1):console.error("isGetAwardData：参数不能为空并且必须是布尔类型！")})},getAwardTimeCallBack:function(t){r.emit("timerCountDown_timerComponent",{completeCallBack:s.completeCallBack,countDowningCallBack:s.countDowningCallBack,awardTimeCount:t}),s.timerAwardData(s.awardWaitSpeed,s.getResultSuccessCallBack)},getAwardTimeCallBack2:function(t){r.emit("timerCountDown_timerComponent",{completeCallBack:s.completeCallBack,countDowningCallBack:s.countDowningCallBack,awardTimeCount:t})},countDowningCallBack:function(t){r.emit("countDowning_timerContainer",t)},completeCallBack:function(t){s.awarding=!0,console.log("开奖中, 还有"+s.awardWait+"秒就更新开奖结果！"),r.emit("complete_timerContainer",t),s.getAwardTime(s.getAwardTimeCallBack2,!1)},getResultSuccessCallBack:function(t){if(s.isGetJson){var e={type:"json",result:t};r.emit("lotteryResults_timerComponent",e)}else{window.setTimeout(function(){i.requestAwardDataForHtml(s.lotteryCode,s.awardType,function(t){var e={type:"html",result:t};r.emit("lotteryResults_timerComponent",e)})},0)}},timerAwardData:function(t,e){var a=window.setInterval(function(){if(s.awarding&&s.isGetAwardData)if(s.awardWait<=0){console.log("=================开始请求服务器拿开奖结果 ========================="),window.clearInterval(a);var t=window.setInterval(function(){i.requestAwardResult(s.lotteryCode,function(a){parseInt(a.period)==s.nextPeriod&&(s.awarding=!1,window.clearInterval(t),s.nextPeriod=s.nextPeriodNow,s.awardWait=s.nextAwardWait,console.log("=================已经拿到最新开奖结果，重新开始倒计 ========================="),e(a),s.timerAwardData(s.awardWaitSpeed,s.getResultSuccessCallBack))})},s.awardResultWaitSpeed)}else s.awardWait--},t)},getAwardTime:function(t,e){var a=this;i.requestAwardTime(a.lotteryCode,function(n){a.awardTimeCount=parseFloat(n.awardTimeInterval);var o=parseInt(n.next.period);e&&(a.nextPeriod=o,a.awardWait=parseInt(n.waitTimeInterval),a.reloading=!1),a.periodText=o.toString(),a.nextPeriodNow=o,a.nextAwardWait=parseInt(n.waitTimeInterval),a.periodText.length<3&&(a.periodText=a.periodText.replace(/\d+/g,function(t){return"00".substr(t.length-1)+t})),console.log("距"+a.periodText+"期开奖"),r.emit("getAwardTimeObject_timerContainer",{currentPeriod:n.current.period,nextPeriod:a.periodText,time:a.formatTime(n.time),surplus:n.overPeriod,originTime:e?"":n.time}),t&&t(a.awardTimeCount)})},isReturnJson:function(t){return void 0==t?(s.awardType="other",!1):"history"==t||"javascript"==s.awardType},formatTime:function(t){if(t){if(-1==t.indexOf(" "))return t.replace(/\//g,"-");return t.split(" ")[0].replace(/\//g,"-")}return void console.error("formatDate: 参数不存在！")}}}),define("Array",["require","exports","module"],function(t,e,a){Array.prototype.Remove=function(t){if(isNaN(t)||t>this.length)return!1;for(var e=0,a=0;e<this.length;e++)this[e]!=this[t]&&(this[a++]=this[e]);this.length-=1},Array.prototype.Contains=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return!0;return!1},Array.prototype.Index=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e},Array.prototype.Unique=function(){for(var t={},e=[],a=0;a<this.length;a++)t[this[a]]||(t[this[a]]=!0,e.push(this[a]));return e},Array.prototype.SortJson=function(t,e){var a="asc"==t?">":"<",n=new Function("a","b","return a."+e+a+"b."+e+"?1:-1");return this.sort(n)},Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var a;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return-1;var o=0|e;if(o>=r)return-1;for(a=Math.max(o>=0?o:r-Math.abs(o),0);a<r;){if(a in n&&n[a]===t)return a;a++}return-1}),Array.prototype.removevalue=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},Array.prototype.PlanSum=function(){for(var t=0,e=0;e<this.length;e++)t+=parseInt(this[e].CurMaxScore);return t},Array.prototype.PlanMax=function(){for(var t=0,e=0;t<this.length;t++)parseInt(this[t].TotalWinLoss)>e&&(e=this[t].TotalWinLoss);return e},Array.prototype.RemoveItem=function(t){for(var e=[],a=0;a<this.length;a++)this[a]!=t&&e.push(this[a]);return e},a.exports=Array}),define("core/views/publicComponent/chart/areaTable.component",["jquery","Util","Array"],function(t,e,a){function n(t){var e=[];if(!t)throw"请配置headerConfig";var a=0;for(var n in t)a++;var r=100/a+"%";for(var n in t){t[n].needSort?e.push('<th width="'+r+'"><div class="lt-tableThBlock"><div class="thBlock"><span class="thName">'+t[n].content+'</span><span class="thArrow" data-index="'+n+'"><i data-sort="up" class="top "></i><i data-sort="down" class="bottom"></i></span></div></div></th>'):e.push('<th width="'+r+'"><div class="lt-tableThBlock"><div class="thBlock"><span class="thName">'+t[n].content+"</span></div></div></th>")}return"<tr>"+e.join("\r\n")+"</tr>"}function r(t,e,a){var n="";a&&(n=' class="even"');var r=0;for(var o in e)r++;for(var i=[],s=0;s<t.length;s++){for(var l=[],o=0;o<r;o++)0===o?l.push('<td><span data-cloumn="'+o+'" data-value="'+t[s][o]+'" class="textNumberB" style="white-space: nowrap;">'+t[s][o]+"</span></td>"):l.push('<td><span data-cloumn="'+o+'" data-value="'+t[s][o]+'" class="textNumberB">'+t[s][o]+"</span></td>");i.push(s%2==1?"<tr "+n+">"+l.join("\r\n")+"</tr>":"<tr>"+l.join("\r\n")+"</tr>")}return i.join("\r\n")}var o={};return o.renderTable=function(e,a,o,i,s,l){var d="<table>"+n(o)+"\r\n"+r(1==s?a:a.data,o,i)+"</table>";t("#"+e).html(d),2==s&&t("#"+e).append('<input id="periodCount" type="hidden" value="'+a.periodCount+'">'),"function"==typeof l&&l.call(this,a)},o.renderTableTotal=function(e,a,n,r){if(void 0==e&&"string"!=typeof e)return console.error("renderTableTotal: _containerId参数不能为空或者不是字符串类型！"),!1;if(void 0==a&&"object"!=typeof a)return console.error("renderTableTotal: _tbodyObject参数不能为空或者不是对象类型！"),!1;if(void 0==n&&"object"!=typeof n)return console.error("renderTableTotal: _theaderObject参数不能为空或者不是对象类型！"),!1;if("function"==typeof callback)return console.error("renderTableTotal: _callback回调函数不为函数类型！"),!1;var i="<table>"+o.renderTeadTotal(n,a)+"\r\n"+o.renderTbodyTotal(a)+"</table>";t("#"+e).html(i),void 0!=r&&"function"==typeof r&&r()},o.renderTeadTotal=function(t,e){if(void 0==t&&"object"!=typeof t)return console.error("renderTableTotal: _theaderObject参数不能为空或者不是对象类型！"),!1;if(void 0==e&&"object"!=typeof e)return console.error("renderTableTotal: _tbodyObject参数不能为空或者不是对象类型！"),!1;var a="",n=e[0].outCount;for(var r in t[0])a+='<th><div class="lt-tableThBlock"><div class="thBlock"><span class="thArrow" style="margin-right: 5px;"><i class="top '+("_th1"==r?"active":"")+'"></i><i class="bottom"></i></span><span class="thName">'+t[0][r].content+"</span></div></div></th>";for(var r in n)a+='<th><div class="lt-tableThBlock"><div class="thBlock"><span class="thArrow" style="margin-right: 5px;"><i class="top '+("_th1"==r?"active":"")+'"></i><i class="bottom"></i></span><span class="thName">'+r+"</span></div></div></th>";return"<thead><tr>"+a+"</tr></thead>"},o.renderTbodyTotal=function(t){if(void 0==t&&"object"!=typeof t)return console.error("renderTableTotal: _tbodyObject参数不能为空或者不是对象类型！"),!1;for(var e="",a=0;a<t.length;a++){var n="";if(n+="<td data-value="+t[a].number+">"+t[a].number+"</td>",n+="<td data-value="+t[a].totalCount+">"+t[a].totalCount+"</td>",void 0!=t[a].outCount)for(var r in t[a].outCount)"0"==t[a].outCount[r]?n+="<td data-value='0'></td>":n+="<td class='bg-box-gray'  data-value='"+t[a].outCount[r]+"'>"+t[a].outCount[r]+"</td>";e+="<tr>"+n+"</tr>"}return"<tbody>"+e+"</tbody>"},o.renderTableRowAndColumn=function(e,a,n,r,o){if(void 0==e&&"string"!=typeof e)return console.error("renderTableRowAndColumn: _containerId参数不能为空或者不是字符串类型！"),!1;if(void 0==a&&"object"!=typeof a)return console.error("renderTableRowAndColumn: _tbodyObject参数不能为空或者不是对象类型！"),!1;if(void 0==n&&"object"!=typeof n)return console.error("renderTableRowAndColumn: _typeArray参数不能为空或者不是对象类型！"),!1;if(void 0==r&&"number"!=typeof r)return console.error("renderTableRowAndColumn: _typeArray参数不能为空或者不是数字类型！"),!1;if("function"==typeof callback)return console.error("renderTableRowAndColumn: _callback回调函数不为函数类型！"),!1;for(var i="",s="",l=0;l<a.length;l++){var d,c=0,u="",h=a[l].result.split("|"),f=h[0].split(","),m=h[1].split(",");d="red"==n[2]?f:m;for(var p=0;p<n[0];p++){var v="";0==p&&(u+='<tr><th colspan="'+n[1]+'">'+a[l].issueNo+"</th></tr>");for(var b=0;b<n[1];b++)++c<=r&&(d.Contains(c)?v+='<td class="lis_bg" row="'+b+'">'+(c<10?"0"+c:c)+"</td>":v+='<td row="'+b+'">'+(c<10?"0"+c:c)+"</td>");u+='<tr column="'+p+'">'+v+"</tr>"}s+='<div class="lis_tb" style="height: auto;"><table><tbody>'+u+"</tbody></table></div>"}i+='<div class="trendRowBlock trendR-'+n[2]+'"><div class="trb-listBlock">'+s+"</div></div>",t("#"+e).html(i),void 0!=o&&"function"==typeof o&&o()},o}),define("core/views/containers/chart/index.container",["underscore","jquery","backbone","../../../services/event.service","../../../actions/chart/chart.action","../../../actions/public/lottery.action","../../publicComponent/public/loading.component","../../publicComponent/chart/drawTable.component","../../publicComponent/chart/changeState.component","../public/timer.container","Array","../../publicComponent/chart/areaTable.component"],function(_,$,_Backbone,_EventService,_ChartAction,_LotteryAction,_LoadingComponent,_DrawTableComponent,_ChangeStateComponent,_TimerContainer,_Array,_AreaTable){var IndexContainer={initialize:function(_lotteryCode,_lotteryClassify,_flot,_classify,_isAwarding,_nowPeriod,_theadObject,_cssObject,_budgetary){if(void 0==_theadObject)return void console.error("你都没配thead.config.js配置！！！！!");if(void 0==_cssObject)return void console.error("你都没配style.config.js配置！！！！!");if(void 0==_budgetary)return void console.error("你都没配budgetary.config.js配置！！！！!  又或者是你肯定node控制器哪里没配这个啦(请在你的chart控制器上加上 _context.budgetary  = JSON.stringify(chartConfig.budgetary))！！！！！！");var _this=this;_ChartAction.initialize(),_this.theadObject="string"==typeof _theadObject?JSON.parse(_theadObject,function(_key,_val){return _val.indexOf&&_val.indexOf("function")>-1?eval("(function(){return "+_val+" })()"):_val}):_theadObject,_this.cssObject=_cssObject,_this.budgetary=_budgetary,_this.lotteryCode=_lotteryCode,_this.flot=_flot,_this._lotteryClassify=_lotteryClassify;var _queryDy=$("#hidQueryDay").val();_this.queryDay=void 0==_queryDy?null:_queryDy,_this.containerId="container",_this.tableId="table",_this.canvasId="canvas",_this.isAwarding=_isAwarding,_this.dealWithDataContainer,_this.flotFor11x5=["501","502","503","504","505","506","507","508","509","510","511","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115"],_this.flotFor11x5Total=["100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115"],_this.flotForK3Total=["15","16","17","18"],_this.rowAndColumnFlotForSsq=["15","16","43"],_this.rowAndColumnFlotForDlt=["51","52"];var loadingComponent=new _LoadingComponent;_EventService.emit("createLoading_loadingComponent"),_this.dealWithDataPath="/js/core/views/containers/"+_classify+"/"+_lotteryClassify+"/dealWithData.container.js",_this.chartDataPath="/js/core/views/containers/"+_classify+"/"+_lotteryClassify+"/chart.container.js",_ChartAction.requestChart(_this.lotteryCode,_this.flot,50,_this.queryDay,function(t){if("11x5"==_this._lotteryClassify&&_this.flotFor11x5.Contains(_this.flot.toString()))_this.sortBy11x5="_th1|up",_this.days=$("[data-day].active").data("day"),require([_this.dealWithDataPath],function(e){_this.dealWithDataContainer=e,_AreaTable.renderTable("areaContainer",e.initialize(_flot,t),_this.theadObject,!_this.flotFor11x5Total.Contains(_this.flot.toString()),_this.flotFor11x5Total.Contains(_this.flot.toString())?2:1,_this.initRenderAreaChartCallBack)});else if("k3"==_this._lotteryClassify&&_this.flotForK3Total.Contains(_this.flot.toString()))15==_this.flot?require([_this.dealWithDataPath],function(e){_this.dealWithDataContainer=e,_AreaTable.renderTableTotal("areaContainer",e.initialize(_flot,t),_this.theadObject,_this.renderAreaTotalChartCallBack)}):require([_this.dealWithDataPath],function(e){_this.dealWithDataContainer=e,_this.renderChart(e.initialize(_flot,t),_this.initRenderChartCallBack),_ChangeStateComponent.omissionNumberEvent("#table",!0),18==_this.flot?_ChangeStateComponent.addTotalStyle2("#table .trend"):_ChangeStateComponent.addTotalStyle("#table .trend")});else if("ssq"==_this._lotteryClassify&&_this.rowAndColumnFlotForSsq.Contains(_this.flot.toString())){var e;15==_flot?e=[6,6,"red"]:16==_flot?e=[7,5,"red"]:43==_flot&&(e=[4,4,"blue"]),require([_this.dealWithDataPath],function(a){_this.dealWithDataContainer=a,_AreaTable.renderTableRowAndColumn("container",a.initialize(_flot,t),e,33,_this.renderRowAndColumnCallBack)})}else if("dlt"==_this._lotteryClassify&&_this.rowAndColumnFlotForDlt.Contains(_this.flot.toString())){var e;51==_flot?e=[6,6,"red"]:52==_flot&&(e=[7,5,"red"]),require([_this.dealWithDataPath],function(a){_this.dealWithDataContainer=a,_AreaTable.renderTableRowAndColumn("container",a.initialize(_flot,t),e,35,_this.renderRowAndColumnCallBack)})}else require([_this.dealWithDataPath],function(e){_this.dealWithDataContainer=e,_this.renderChart(e.initialize(_flot,t),_this.initRenderChartCallBack)})}),_EventService.on("renderChartComplate_indexContainer",function(){"k3"==_this._lotteryClassify||"fc3d"==_this._lotteryClassify?_ChangeStateComponent.addSamePeriod(_this.tableId):"kl10"==_this._lotteryClassify?(_ChangeStateComponent.addBigAward(_this.tableId),6==_this.flot&&_ChangeStateComponent.heavyNumberEvent("#table")):"gxkl10"==_this._lotteryClassify?(2!=_this.flot&&3!=_this.flot||_ChangeStateComponent.addTypeAwardBlue("data_5"),4==_this.flot&&_ChangeStateComponent.heavyNumberEvent("#table")):"11x5"==_this._lotteryClassify?(require([_this.chartDataPath],function(t){t.initChart(_this.flot),_DrawTableComponent.updateTableLine("container","table","canvas")}),_this.flotFor11x5Total.Contains(_this.flot.toString())&&_ChangeStateComponent.addHotColdNumer(_this.flot.toString())):"ssc"==_this._lotteryClassify?(_ChangeStateComponent.addSamePeriod(_this.tableId,2,"ssc"),63!=_this.flot&&64!=_this.flot||_ChangeStateComponent.changeSscWord(_this.flot),12!=_this.flot&&34!=_this.flot||_ChangeStateComponent.changeSscNum(),require([_this.chartDataPath],function(t){t.initChart(_this.flot)})):"qxc"==_this._lotteryClassify?_ChangeStateComponent.addSamePeriod(_this.tableId):"pl5"==_this._lotteryClassify?15==_this.flot||12!=_this.flot&&13!=_this.flot&&17!=_this.flot||_ChangeStateComponent.addTypeAwardBlue("data_8"):"dlt"==_this._lotteryClassify?(12==_this.flot?_ChangeStateComponent.heavyNumberEvent("#table"):13==_this.flot?_ChangeStateComponent.serialNumberEvent("#table"):14==_this.flot?_ChangeStateComponent.edgeNumberEvent("#table"):15==_this.flot?_ChangeStateComponent.serialTwoNumberEvent("#table"):21!=_this.flot&&23!=_this.flot&&24!=_this.flot||_ChangeStateComponent.addTypeAwardBlue("data_6"),_DrawTableComponent.updateTableLine("container","table","canvas")):"ssq"==_this._lotteryClassify?27==_this.flot?_ChangeStateComponent.heavyNumberEvent("#table"):28==_this.flot?_ChangeStateComponent.serialNumberEvent("#table"):29==_this.flot?_ChangeStateComponent.edgeNumberEvent("#table"):30==_this.flot?_ChangeStateComponent.serialTwoNumberEvent("#table"):42==_this.flot&&_ChangeStateComponent.addSegmentingLine("#table","data_0",[4,10],1,"#d4d1d1"):"qlc"==_this._lotteryClassify&&15==_this.flot&&_ChangeStateComponent.heavyNumberEvent("#table"),$("tbody.preselection").html(_this.tempHtml),_ChangeStateComponent.addRightBorder2px("#table",1,"#d4d1d1"),$(".lt-toolBlock .font-red").length>0&&"none"==$(".beProgressing").css("display")&&$(".lt-toolBlock .font-red").html($(".current-period").html())}),_TimerContainer.initialize(_lotteryCode,"history"),"local"==_classify?_LotteryAction.initialize(_lotteryCode,"digit"):_LotteryAction.initialize(_lotteryCode,_classify),_isAwarding&&_LotteryAction.loopResult(_nowPeriod),_EventService.on("awardHTML_lotteryAction",function(t){
$(".public-lotteryLatestInfo").html(t.timer),$(".history-body").html(t.index),$("#autoRefresh i").hasClass("active")?_this.refreshChartData(_this):0==$("#autoRefreshWindow").length&&($("body").append('<div class="eyu200-trendHintBlock" style="z-index: 9999; width: 1000px; top: inherit; bottom: 30px; margin-left: -500px; display: none;" id="autoRefreshWindow">数据已刷新，<a href="javascript:void(0);" id="reloadChart">点击刷新</a></div>'),$("#autoRefreshWindow").fadeIn(600),$("body").on("click","#reloadChart",function(){_this.refreshChartData(_this)}))})},refreshChartData:function(t){var e=parseInt($("#getPeriodsNumber .active").attr("data-num"));t.tempHtml=$("tbody.preselection").html(),t.changeChartData(t.lotteryCode,t.flot,e)},initEvent:function(){var t=this;$("body").on("mouseover",".nameBlock a",function(){$(this).parent().parent().find("span").css("color","#e33d3d")}),$("body").on("mouseout",".nameBlock a",function(){$(this).parent().parent().find("span").css("color","#333333")}),$("body").on("click",".afb-titleB .title",function(){$(".afb-titleB .title").removeClass("active"),$(this).addClass("active");var t=$(this).attr("data-type");$(".public-allFunBlock .afb-contentB").hide(),$("#"+t).show()}),$("body").on("click","#getPeriodsNumber  .button",function(){$(this).parent().find(".button").removeClass("active"),$(this).addClass("active"),t.refreshChartData(t)}),$("body").on("click","#autoRefresh",function(){var t=$(this).find("i");t.hasClass("active")?t.removeClass("active"):t.addClass("active")}),$("body").on("click","#omission",function(){var t=!0,e=$(this).find("i");e.hasClass("active")?(e.removeClass("active"),t=!1):(e.addClass("active"),t=!0),_ChangeStateComponent.omissionNumberEvent("#table",t)}),$("body").on("click","#heavy",function(){var t=$(this).find("i");t.hasClass("active")?(t.removeClass("active"),_ChangeStateComponent.clearHeavyNumberEvent("#table")):(t.addClass("active"),_ChangeStateComponent.heavyNumberEvent("#table"))}),$("body").on("click","#edge",function(){var t=$(this).find("i");t.hasClass("active")?(t.removeClass("active"),_ChangeStateComponent.clearEdgeNumberEvent("#table")):(t.addClass("active"),_ChangeStateComponent.edgeNumberEvent("#table"))}),$("body").on("click","#serial",function(){var t=$(this).find("i");t.hasClass("active")?(t.removeClass("active"),_ChangeStateComponent.clearSerialNumberEvent("#table")):(t.addClass("active"),_ChangeStateComponent.serialNumberEvent("#table"))}),$("body").on("click","#omissionDelamination",function(){var t=$(this).find("i");t.hasClass("active")?(t.removeClass("active"),_ChangeStateComponent.clearOmissionDelaminationEvent("#table")):(t.addClass("active"),_ChangeStateComponent.omissionDelaminationEvent("#table"))}),$("body").on("click","#brokenLine",function(){var t=$(this).find("i");t.hasClass("active")?(t.removeClass("active"),_ChangeStateComponent.closeBrokenLine("#canvas")):(t.addClass("active"),_DrawTableComponent.updateTableLine("container","table","canvas"),_ChangeStateComponent.openBrokenLine("#canvas"))}),$("body").on("click","#segmenting",function(){var t=$(this).find("i");t.hasClass("active")?(t.removeClass("active"),_ChangeStateComponent.removeSegmenting("#table","tdLineB")):(t.addClass("active"),_ChangeStateComponent.addSegmenting("#table","tdLineB",5))}),$("body").on("click","#container #table thead i, #container #table .thead i",function(){var t,e=$(this).parent().attr("modular");$(this).hasClass("evenButton")?t=$(".oddButton").parent().attr("modular"):$(this).hasClass("oddButton")?t=$(".evenButton").parent().attr("modular"):$(this).hasClass("decimalButton")?t=$(".largeButton").parent().attr("modular"):$(this).hasClass("largeButton")?t=$(".decimalButton").parent().attr("modular"):$(this).hasClass("primeButton")?t=$(".compositeButton").parent().attr("modular"):$(this).hasClass("compositeButton")&&(t=$(".primeButton").parent().attr("modular")),$("#table th, #table td").each(function(a,n){$(n).attr("modular")==e?$(n).hide():$(n).attr("modular")==t&&$(n).show()}),_DrawTableComponent.updateTableLine("container","table","canvas")}),$(document).on("click","#areaContainer th",function(){if("k3"!=t._lotteryClassify){var e=$(this).find(".thArrow");if(e.length<=0)return;t.sortBy11x5=e.data("index"),e.find("i").each(function(){$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),t.sortBy11x5+="|"+$(this).data("sort"))}),t.tempHtml=$("tbody.preselection").html(),t.changeChartData(t.lotteryCode,t.flot,1)}else{var a,n=$(this).find(".active").hasClass("top")?"top":"bottom";$("#areaContainer th i").removeClass("active"),"top"==n?($(this).find(".top").removeClass("active"),$(this).find(".bottom").addClass("active"),a=!1):($(this).find(".bottom").removeClass("active"),$(this).find(".top").addClass("active"),a=!0);var r=$(this).index();_ChangeStateComponent.sortColumn("#areaContainer table",r,a)}}),$(document).on("click","[data-day]",function(){$("[data-day]").removeClass("active"),$(this).addClass("active"),t.days=$(this).data("day"),t.tempHtml=$("tbody.preselection").html(),t.changeChartData(t.lotteryCode,t.flot,1)})},initRenderChartCallBack:function(){var t=IndexContainer;_EventService.emit("delLoading_loadingComponent"),t.initEvent(),$("#omission").click(),$("#segmenting").click(),$("#brokenLine").click(),"k3"==t._lotteryClassify||"fc3d"==t._lotteryClassify?_ChangeStateComponent.addSamePeriod(t.tableId):"kl10"==t._lotteryClassify?(_ChangeStateComponent.addBigAward(t.tableId),6==t.flot&&_ChangeStateComponent.heavyNumberEvent("#table")):"gxkl10"==t._lotteryClassify?(2!=t.flot&&3!=t.flot||_ChangeStateComponent.addTypeAwardBlue("data_5"),4==t.flot&&_ChangeStateComponent.heavyNumberEvent("#table")):"11x5"==t._lotteryClassify?(require([t.chartDataPath],function(e){e.initChart(t.flot),_DrawTableComponent.updateTableLine("container","table","canvas")}),t.flotFor11x5Total.Contains(t.flot.toString())&&_ChangeStateComponent.addHotColdNumer(t.flot.toString())):"ssc"==t._lotteryClassify?(_ChangeStateComponent.addSamePeriod(t.tableId,2,"ssc"),63!=t.flot&&64!=t.flot||_ChangeStateComponent.changeSscWord(t.flot),12!=t.flot&&34!=t.flot||_ChangeStateComponent.changeSscNum(),_DrawTableComponent.updateTableLine("container","table","canvas"),require([t.chartDataPath],function(e){e.initChart(t.flot)})):"qxc"==t._lotteryClassify?_ChangeStateComponent.addSamePeriod(t.tableId):"pl5"==t._lotteryClassify?(15==t.flot||12!=t.flot&&13!=t.flot&&17!=t.flot||_ChangeStateComponent.addTypeAwardBlue("data_8"),_DrawTableComponent.updateTableLine("container","table","canvas")):"dlt"==t._lotteryClassify?(12==t.flot?_ChangeStateComponent.heavyNumberEvent("#table"):13==t.flot?_ChangeStateComponent.serialNumberEvent("#table"):14==t.flot?_ChangeStateComponent.edgeNumberEvent("#table"):15==t.flot?_ChangeStateComponent.serialTwoNumberEvent("#table"):21!=t.flot&&23!=t.flot&&24!=t.flot||_ChangeStateComponent.addTypeAwardBlue("data_6"),_DrawTableComponent.updateTableLine("container","table","canvas")):"ssq"==t._lotteryClassify?27==t.flot?_ChangeStateComponent.heavyNumberEvent("#table"):28==t.flot?_ChangeStateComponent.serialNumberEvent("#table"):29==t.flot?_ChangeStateComponent.edgeNumberEvent("#table"):30==t.flot?_ChangeStateComponent.serialTwoNumberEvent("#table"):42==t.flot&&_ChangeStateComponent.addSegmentingLine("#table","data_0",[4,10],1,"#d4d1d1"):"qlc"==t._lotteryClassify&&15==t.flot&&_ChangeStateComponent.heavyNumberEvent("#table"),_ChangeStateComponent.addRightBorder2px("#table",1,"#d4d1d1"),$(".lt-toolBlock .font-red").length>0&&"none"==$(".beProgressing").css("display")&&$(".lt-toolBlock .font-red").html($(".current-period").html())},initRenderAreaChartCallBack:function(){var t=IndexContainer;_EventService.emit("delLoading_loadingComponent"),t.initEvent(),"11x5"==t._lotteryClassify&&t.flotFor11x5Total.Contains(t.flot.toString())&&_ChangeStateComponent.addHotColdNumer(t.flot.toString()),$('#areaContainer [data-index="_th1"]').find(".top").addClass("active")},renderChartCallBack:function(){var t=IndexContainer;_EventService.emit("delLoading_loadingComponent"),$("#autoRefreshWindow").length>0&&$("#autoRefreshWindow").fadeOut(600,function(){$("#autoRefreshWindow").remove()}),$("#brokenLine i").hasClass("active")&&$("#"+t.canvasId).show(),$("#omission i").hasClass("active")?_ChangeStateComponent.omissionNumberEvent("#table",!0):_ChangeStateComponent.omissionNumberEvent("#table",!1),$("#omissionDelamination i").hasClass("active")&&_ChangeStateComponent.omissionDelaminationEvent("#table"),$("#segmenting i").hasClass("active")&&_ChangeStateComponent.addSegmenting("#table","tdLineB",5),_EventService.emit("renderChartComplate_indexContainer")},renderAreaChartCallBack:function(){var t=IndexContainer;if(_EventService.emit("delLoading_loadingComponent"),"11x5"==t._lotteryClassify&&t.sortBy11x5){var e=t.sortBy11x5.split("|");$('[data-index="'+e[0]+'"] i').removeClass("active"),$('[data-index="'+e[0]+'"] [data-sort="'+e[1]+'"]').addClass("active")}"11x5"==t._lotteryClassify&&t.flotFor11x5Total.Contains(t.flot.toString())&&_ChangeStateComponent.addHotColdNumer(t.flot.toString()),$("#autoRefreshWindow").length>0&&$("#autoRefreshWindow").fadeOut(600,function(){$("#autoRefreshWindow").remove()}),_EventService.emit("renderChartComplate_indexContainer")},renderAreaTotalChartCallBack:function(){_EventService.emit("delLoading_loadingComponent"),IndexContainer.initEvent(),$("#autoRefreshWindow").length>0&&$("#autoRefreshWindow").fadeOut(600,function(){$("#autoRefreshWindow").remove()}),_EventService.emit("renderChartComplate_indexContainer")},renderRowAndColumnCallBack:function(){_EventService.emit("delLoading_loadingComponent"),IndexContainer.initEvent(),$("#autoRefreshWindow").length>0&&$("#autoRefreshWindow").fadeOut(600,function(){$("#autoRefreshWindow").remove()}),_EventService.emit("renderChartComplate_indexContainer")},renderChart:function(t,e){var a=this;_DrawTableComponent.renderTable(a.containerId,a.tableId,a.canvasId,a.theadObject,t,a.cssObject,e)},changeChartData:function(t,e,a){var n=this;if(_EventService.emit("createLoading_loadingComponent"),"11x5"==n._lotteryClassify&&n.flotFor11x5.Contains(e.toString()))_ChartAction.requestChartSortFor11x5(t,e,a,n.sortBy11x5,n.days,function(t){_AreaTable.renderTable("areaContainer",n.dealWithDataContainer.initialize(e,t),n.theadObject,!n.flotFor11x5Total.Contains(n.flot.toString()),n.flotFor11x5Total.Contains(n.flot.toString())?2:1,n.renderAreaChartCallBack)});else if("k3"==n._lotteryClassify&&n.flotForK3Total.Contains(n.flot.toString()))_ChartAction.requestChart(t,e,a,n.queryDay,function(t){15==e?_AreaTable.renderTableTotal("areaContainer",n.dealWithDataContainer.initialize(e,t),n.theadObject,n.renderAreaTotalChartCallBack):require([n.dealWithDataPath],function(a){n.renderChart(n.dealWithDataContainer.initialize(e,t),n.renderChartCallBack),_ChangeStateComponent.omissionNumberEvent("#table",!0),18==n.flot?_ChangeStateComponent.addTotalStyle2("#table .trend"):_ChangeStateComponent.addTotalStyle("#table .trend")})});else if("ssq"==n._lotteryClassify&&n.rowAndColumnFlotForSsq.Contains(n.flot.toString())){var r;15==e?r=[6,6,"red"]:16==e?r=[7,5,"red"]:43==e&&(r=[4,4,"blue"]),_ChartAction.requestChart(t,e,a,n.queryDay,function(t){_AreaTable.renderTableRowAndColumn("container",n.dealWithDataContainer.initialize(e,t),r,33,n.renderRowAndColumnCallBack)})}else if("dlt"==n._lotteryClassify&&n.rowAndColumnFlotForDlt.Contains(n.flot.toString())){var r;51==e?r=[6,6,"red"]:52==e&&(r=[7,5,"red"]),_ChartAction.requestChart(t,e,a,n.queryDay,function(t){_AreaTable.renderTableRowAndColumn("container",n.dealWithDataContainer.initialize(e,t),r,35,n.renderRowAndColumnCallBack)})}else _ChartAction.requestChart(t,e,a,n.queryDay,function(t){n.renderChart(n.dealWithDataContainer.initialize(e,t),n.renderChartCallBack)})},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}};return IndexContainer});