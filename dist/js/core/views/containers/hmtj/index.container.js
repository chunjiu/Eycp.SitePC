define("core/services/testing.service",["jquery"],function(t){return{isDev:"false"!==t("body").attr("isopeneventnamecheck"),_testingEventName:function(t){return this.isDev?!!/_[\w]*/.test(t):(console.error("body标签上没有设置isOpenEventNameCheck属性！用于开启是否事件名规范校验！"),!1)}}}),define("core/services/event.service",["underscore","jquery","backbone","./testing.service"],function(t,e,a,n){return{_on:function(t,e){"string"==typeof t&&"function"==typeof e?n._testingEventName(t)?(this[t]=this[t]||new Array,this[t].push(e)):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},_emit:function(t){if("string"==typeof t)if(n._testingEventName(t)){var e=arguments.length>1?Array.prototype.slice.call(arguments,1):[];this[t]&&Array.prototype.forEach.call(this[t],function(t){t.apply(this,e)})}else console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)")},on:function(t,e){"string"==typeof t&&"function"==typeof e?n._testingEventName(t)?a.on(t,e):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"):console.error("事件参数不正确！")},emit:function(t,e){"string"==typeof t&&(n._testingEventName(t)?a.trigger(t,e):console.error("您得事件未指定是从那个组件接收得，请按照事件命名规范编写事件名字！例子：事件名_接收组件(需要加上Component)"))}}}),define("core/views/publicComponent/timer.component",["underscore","jquery","backbone","../../services/event.service"],function(t,e,a,n){return a.View.extend({initialize:function(){var t=this;t.awardTimeCount=0,t.speed=1e3,t.clearInterval=0,n.on("timerCountDown_timerComponent",function(e){return"object"==typeof e&&e?e.completeCallBack&&"function"==typeof e.completeCallBack?e.countDowningCallBack&&"function"==typeof e.countDowningCallBack?void t.timerCountDown(e):void console.error("TimerComponent: timerCountDown方法参数不正确, countDowningCallBack不存在, 或者是不是一个函数！"):void console.error("TimerComponent: timerCountDown方法参数不正确, completeCallBack不存在, 或者是不是一个函数！"):void console.error("TimerComponent: timerCountDown方法参数不正确！")})},timerCountDown:function(t){var e=this;e.awardTimeCount=t.awardTimeCount,window.clearInterval(e.clearInterval),e.clearInterval=window.setInterval(function(){e.awardTimeCount<=0?t.completeCallBack(e.awardTimeCount):t.countDowningCallBack(e.awardTimeCount),e.awardTimeCount--},e.speed)}})}),define("core/services/request.service",["underscore","jquery","backbone","./event.service"],function(t,e,a,n){var r={_asyncRequestBase:function(t,a,r,o,i,s){e.ajax({type:t,async:!0,timeout:1e4,url:a,dataType:r,data:o,success:function(t){t?n.emit(i,t):(n.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+i+"事件)返回得数据发生错误:"))},complete:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),s&&n.emit(s,_resultData))},error:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),s&&n.emit(s,_resultData))}})},_asyncRequestBaseJsonp:function(t,a,r,o,i){e.ajax({type:t,async:!0,timeout:1e4,url:a,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:o,data:r,success:function(t){t?n.emit(o,t):(n.emit("createPromptWindow_promptWindowComponent",{title:"网络发生异常！",time:600}),console.error("("+o+"事件)返回得数据发生错误:"))},complete:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),i&&n.emit(i,_resultData))},error:function(t,e){"timeout"==e&&(n.emit("createPromptWindow_promptWindowComponent",{title:"网络异常,请求超时,请稍后再试...",time:600}),i&&n.emit(i,_resultData))}})},requestPostJsonp:function(t,e,a,n){return r._asyncRequestBaseJsonp("POST",t,e,a,n)},requestGetJsonp:function(t,e,a,n){return r._asyncRequestBaseJsonp("GET",t,e,a,n)},requestPost:function(t,e,a){return r._asyncRequestBase("POST",t,"json",e,a,_failedEvent)},requestPostSearch:function(t,e,a,n,o){return r._asyncRequestBase("POST",t,e,a,n,o)},requestGet:function(t,e,a,n){return r._asyncRequestBase("GET",t,"json",e,a,n)},requestGetHtml:function(t,e,a,n){return r._asyncRequestBase("GET",t,"text",e,a,n)}};return r}),define("core/actions/public/timer.action",["underscore","jquery","backbone","../../services/request.service","../../services/event.service"],function(t,e,a,n,r){var o={};return o._awardResultCallBack,o._awardDataCallBack,o._awardTimeCallBack,o.initialize=function(){var t=this;r.on("asyncSuccess_awardResult",function(e){t._awardResultCallBack(e)}),r.on("asyncSuccess_awardData",function(e){t._awardDataCallBack(e)}),r.on("asyncSuccess_awardTime",function(e){t._awardTimeCallBack(e)})},o.requestAwardResult=function(t,e){if("string"!=typeof t||"function"!=typeof e)console.error("请求开奖号码的参数不正确，_lotteryCode不是字符串类型或者_awardType不是字符串类型或者_callBack不是函数类型");else{o._awardResultCallBack=e;var a={t:Math.random()};n.requestGet("/lottery/"+t+"/getawarddata",a,"asyncSuccess_awardResult")}},o.requestAwardData=function(t,e,a){if("string"!=typeof t||"string"!=typeof e||"function"!=typeof a)console.error("请求开奖号码的参数不正确，_lotteryCode不是字符串类型或者_awardType不是字符串类型或者_callBack不是函数类型");else{o._awardDataCallBack=a;var r,i={};i.t=Math.random(),e?r=this.judgmentAwardType(e):console.error("开奖历史为空,请设置开奖类型！"),n.requestGet("/lottery/"+t+"/"+r,i,"asyncSuccess_awardData")}},o.requestAwardDataForHtml=function(t,e,a){if("string"!=typeof t||"string"!=typeof e||"function"!=typeof a)console.error("请求开奖号码的参数不正确，_lotteryCode不是字符串类型或者_awardType不是字符串类型或者_callBack不是函数类型");else{o._awardDataCallBack=a;var r,i={t:Math.random()};e?r=this.judgmentAwardType(e):console.error("开奖历史为空,请设置开奖类型！"),n.requestGetHtml("/lottery/"+t+"/"+r,i,"asyncSuccess_awardData")}},o.requestAwardTime=function(t,e){if("string"!=typeof t||"function"!=typeof e)console.error("请求开奖时间的参数不正确，_lotteryCode不是字符串类型或者_callBack不是函数类型");else{var a={t:Math.random()};o._awardTimeCallBack=e,n.requestGet("/lottery/"+t+"/getawardtimes",a,"asyncSuccess_awardTime")}},o.judgmentAwardType=function(t){var e="";return"history"==t&&(e="getawarddata"),e},o}),define("core/views/containers/public/timer.container",["underscore","jquery","backbone","String","../../../services/event.service","../../publicComponent/timer.component","../../../actions/public/timer.action"],function(t,e,a,n,r,o,i){var s;return{initialize:function(t,e){if(s=this,s.isGetAwardData=!0,t&&"string"==typeof t||console.warn("TimerContainer：_lotteryCode参数不正确, 可能为空，可能不是字符串类型，但是允许为空"),!e||"string"!=typeof e)return void console.error("TimerContainer：_awardType参数不正确");s.lotteryCode=t,s.awardType=e,s.awarding=!1,s.awardWait=0,s.awardWaitSpeed=1e3,s.awardResultWaitSpeed=3e3+1e3*parseInt(Math.floor(5*Math.random()+1)),s.periodText=0,s.isGetJson=s.isReturnJson(s.awardType),i.initialize();new o;s.getAwardTime(s.getAwardTimeCallBack,!0),r.on("isGetAwardData_timerContainer",function(t){void 0!=t&&"boolean"==typeof t?(s.isGetAwardData=t,s.awarding=!1):console.error("isGetAwardData：参数不能为空并且必须是布尔类型！")})},getAwardTimeCallBack:function(t){r.emit("timerCountDown_timerComponent",{completeCallBack:s.completeCallBack,countDowningCallBack:s.countDowningCallBack,awardTimeCount:t}),s.timerAwardData(s.awardWaitSpeed,s.getResultSuccessCallBack)},getAwardTimeCallBack2:function(t){r.emit("timerCountDown_timerComponent",{completeCallBack:s.completeCallBack,countDowningCallBack:s.countDowningCallBack,awardTimeCount:t})},countDowningCallBack:function(t){r.emit("countDowning_timerContainer",t)},completeCallBack:function(t){s.awarding=!0,console.log("开奖中, 还有"+s.awardWait+"秒就更新开奖结果！"),r.emit("complete_timerContainer",t),s.getAwardTime(s.getAwardTimeCallBack2,!1)},getResultSuccessCallBack:function(t){if(s.isGetJson){var e={type:"json",result:t};r.emit("lotteryResults_timerComponent",e)}else{window.setTimeout(function(){i.requestAwardDataForHtml(s.lotteryCode,s.awardType,function(t){var e={type:"html",result:t};r.emit("lotteryResults_timerComponent",e)})},0)}},timerAwardData:function(t,e){var a=window.setInterval(function(){if(s.awarding&&s.isGetAwardData)if(s.awardWait<=0){console.log("=================开始请求服务器拿开奖结果 ========================="),window.clearInterval(a);var t=window.setInterval(function(){i.requestAwardResult(s.lotteryCode,function(a){parseInt(a.period)==s.nextPeriod&&(s.awarding=!1,window.clearInterval(t),s.nextPeriod=s.nextPeriodNow,s.awardWait=s.nextAwardWait,console.log("=================已经拿到最新开奖结果，重新开始倒计 ========================="),e(a),s.timerAwardData(s.awardWaitSpeed,s.getResultSuccessCallBack))})},s.awardResultWaitSpeed)}else s.awardWait--},t)},getAwardTime:function(t,e){var a=this;i.requestAwardTime(a.lotteryCode,function(n){a.awardTimeCount=parseFloat(n.awardTimeInterval);var o=parseInt(n.next.period);e&&(a.nextPeriod=o,a.awardWait=parseInt(n.waitTimeInterval),a.reloading=!1),a.periodText=o.toString(),a.nextPeriodNow=o,a.nextAwardWait=parseInt(n.waitTimeInterval),a.periodText.length<3&&(a.periodText=a.periodText.replace(/\d+/g,function(t){return"00".substr(t.length-1)+t})),console.log("距"+a.periodText+"期开奖"),r.emit("getAwardTimeObject_timerContainer",{currentPeriod:n.current.period,nextPeriod:a.periodText,time:a.formatTime(n.time),surplus:n.overPeriod,originTime:e?"":n.time}),t&&t(a.awardTimeCount)})},isReturnJson:function(t){return void 0==t?(s.awardType="other",!1):"history"==t||"javascript"==s.awardType},formatTime:function(t){if(t){if(-1==t.indexOf(" "))return t.replace(/\//g,"-");return t.split(" ")[0].replace(/\//g,"-")}return void console.error("formatDate: 参数不存在！")}}}),define("core/actions/public/lottery.action",["underscore","jquery","backbone","Date","../../services/request.service","../../services/event.service"],function(t,e,a,n,r,o){var i={};return i._awardHTMLCallback,i._awardTimerCallback,i._issuenoDataCallback,i._updatePlanCallback,i.initialize=function(t,a,n){this.lotteryCode=t,this.lotteryType=a,this.needUpdatePlan=n;var r=this;o.on("countDowning_timerContainer",function(t){var a=t.toString().SecondsToddhhmmss().split(":"),n="";n=parseInt(a[0])>0?"<b>"+a[0]+"</b><i>天</i><b>"+a[1]+"</b><i>时</i>":parseInt(a[1])>0?"<b>"+a[1]+"</b><i>时</i><b>"+a[2]+"</b><i>分</i>":"<b>"+a[2]+"</b><i>分</i><b>"+a[3]+"</b><i>秒</i>",e(".timeBlock .time").html(n)}),o.on("getAwardTimeObject_timerContainer",function(t){if(r.nextPeriod=t.nextPeriod,e(".next-period").html(r.nextPeriod+"期"),t.originTime){var a=new Date(t.originTime.replace(/-/g,"/")).format("MM-dd hh:mm");e("#lotteryTimerTime").html(a)}}),o.on("complete_timerContainer",function(){e(".beProgressing").show(),e(".preterite").hide(),e(".current-period").html(r.nextPeriod)}),o.on("lotteryResults_timerComponent",function(t){e(".beProgressing").hide(),e(".preterite").show(),i.getAwardHTML(function(t){o.emit("awardHTML_lotteryAction",t),i.needUpdatePlan&&setTimeout(function(){i.updatePlan(function(t){o.emit("awardPlanHTML_lotteryAction",t)})},3e4+Math.random())})}),o.on("digitQuery_historyContainer",function(t){i.getAwardHTML(function(t){o.emit("awardDigitHTML_lotteryAction",t)},t.year,t.day)}),o.on("digitExport_historyContainer",function(t){window.open("/api/"+r.lotteryType+"/"+r.lotteryCode+"/export/"+t.type+"/"+t.year)}),o.on("asyncSuccess_awardHTML",function(t){r._awardHTMLCallback(t)}),o.on("asyncSuccess_awardTimer",function(t){r._awardTimerCallback(t)}),o.on("asyncSuccess_issuenoData",function(t){r._issuenoDataCallback(t)}),o.on("asyncSuccess_updatePlan",function(t){r._updatePlanCallback(t)})},i.getAwardHTML=function(t,e,a){if("function"!=typeof t)console.error("getAwardHTML：请求数据的参数不正确，_callBack不是函数类型");else{var n={date:e,t:Math.random()};a&&(n.year=e,n.day=a),i._awardHTMLCallback=t,r.requestGet("/"+this.lotteryType+"/"+this.lotteryCode+"/indexPage",n,"asyncSuccess_awardHTML")}},i.updatePlan=function(t){if("function"!=typeof t)console.error("getAwardHTML：请求数据的参数不正确，_callBack不是函数类型");else{var e={lotteryCode:this.lotteryCode,t:Math.random()};i._updatePlanCallback=t,r.requestGet("/plan/updatePlan",e,"asyncSuccess_updatePlan")}},i.getAwardResult=function(t){if("function"!=typeof t)console.error("getAwardResult：请求数据的参数不正确，_callBack不是函数类型");else{var e={t:Math.random()};i._awardTimerCallback=t,r.requestGet("/lottery/"+this.lotteryCode+"/getawarddata",e,"asyncSuccess_awardTimer")}},i.getIssuenoData=function(t,e){if(void 0==t||"number"!=typeof t)return void console.error("getIssuenoData：请求数据的参数不正确，_issueno不是数字类型");if("function"!=typeof e)return void console.error("getIssuenoData：请求数据的_callBack参数不正确，_callBack不是函数类型");var a={t:Math.random(),issueno:t};i._issuenoDataCallback=e,r.requestGet("/"+this.lotteryType+"/"+this.lotteryCode+"/getawardinfobyissueno",a,"asyncSuccess_issuenoData")},i.loopResult=function(t){var e=this,a=setInterval(function(){e.getAwardResult(function(n){n.period==t&&(window.clearInterval(a),e.getAwardHTML(function(t){o.emit("awardHTML_lotteryAction",t)}))})},3e3+1e3*parseInt(Math.floor(5*Math.random()+1)))},i}),define("core/actions/hmtj/hmtj.action",["underscore","jquery","backbone","../../services/request.service","../../services/event.service"],function(t,e,a,n,r){var o={};return o.requestHmtjCallback,o.requestHmtjDetailCallback,o.initialize=function(){var t=this;r.on("asyncSuccess_requestHmtj",function(e){t.requestHmtjCallback(e)}),r.on("asyncSuccess_requestHmtjDetail",function(e){t.requestHmtjDetailCallback(e)})},o.requestHmtj=function(t,e,a,r){if(void 0==t||"string"!=typeof t)return void console.error("请求数据的参数不正确，_lotteryCode为空,或者是不是字符串类型！");if(void 0==e||"number"!=typeof e)return void console.error("请求数据的参数不正确，_type为空或者是不是数字类型！");if("function"!=typeof r)return void console.error("请求数据的参数不正确，_callBack不是函数类型！");var i={code:t,type:e,quantity:a||10,t:Math.random()};o.requestHmtjCallback=r,n.requestGet("/hmtj/requestHmtj",i,"asyncSuccess_requestHmtj")},o.requestHmtjDetail=function(t,e,a,r,i){if(void 0==t||"string"!=typeof t)return void console.error("请求数据的参数不正确，_lotteryCode为空,或者是不是字符串类型！");if(void 0==e||"number"!=typeof e)return void console.error("请求数据的参数不正确，_type为空或者是不是数字类型！");if(void 0==a||"string"!=typeof a)return void console.error("请求数据的参数不正确，_expertId为空或者是不是字符串类型！");if("function"!=typeof i)return void console.error("请求数据的参数不正确，_callBack不是函数类型！");var s={code:t,type:e,expertId:a,quantity:r||10,t:Math.random()};o.requestHmtjDetailCallback=i,n.requestGet("/hmtj/requestHmtjDetail",s,"asyncSuccess_requestHmtjDetail")},o}),define("core/views/publicComponent/public/loading.component",["underscore","jquery","backbone","../../../services/event.service"],function(t,e,a,n){return a.View.extend({el:"#loading",id:"#loading",initialize:function(){var t=this;n.on("createLoading_loadingComponent",function(){t.create()}),n.on("delLoading_loadingComponent",function(){t.del()})},create:function(){0==e(this.el).length&&e("body").append('<div class="loadingSection"  id="loading"><div class="loadingIcon">正在加载中</div><div class="loadingMesk"></div></div>')},del:function(){e(this.id).remove()}})}),define("core/views/publicComponent/chart/changeState.component",["jquery","Util","../../../services/event.service"],function(t,e,a){var n={};n.tempName="";var r={ballStyle:{ballBlue:"bg-ball-blue",ballRed:"bg-ball-red",ballPurple:"bg-ball-purple",ballGreen:"bg-ball-green"},fontStyle:{fontBold:"font-bold",fontGray:"font-gray",fontRed:"font-red",fontBlue:"font-blue",fontGreen:"font-green",fontPurple:"font-purple",fontWhite:"font-white"},bgBoxStyle:{bgBoxTintBlue:"bg-box-tintBlue",bgBoxRed:"bg-box-red",bgBoxBlue:"bg-box-blue",bgBoxPurple:"bg-box-purple",bgBoxGreen:"bg-box-green",bgBoxGray:"bg-box-gray"}};return n.addSegmentingLine=function(e,a,n,r,o){var i=t(e).find("thead tr").length;t(e).find("thead tr").each(function(e,s){0!=i&&t(s).find('th[modular="'+a+'"]').each(function(e,a){for(var i=0;i<n.length;i++)if(e==n[i]){t(a).css({"border-right-width":r+"px","border-right-color":o});break}})}),t(e).find(".trend tr").each(function(e,i){t(i).find('td[modular="'+a+'"]').each(function(e,a){for(var i=0;i<n.length;i++)if(e==n[i]){t(a).css({"border-right-width":r+"px","border-right-color":o});break}})})},n.addRightBorder2px=function(e,a,n){t(e).find("thead tr").each(function(e,r){t(r).find("th").each(function(r,o){if(0==e&&void 0!=s)t(o).css({"border-right-width":a+"px","border-right-color":n});else{var i=t(o).attr("modular"),s=t(o).next().attr("modular");void 0==i&&void 0==s?t(o).css({"border-right-width":a+"px","border-right-color":n}):i!==s&&void 0!=s?t(o).css({"border-right-width":a+"px","border-right-color":n}):void 0!=i&&void 0==s&&t(o).css({"border-right-width":a+"px","border-right-color":n})}})}),t(e).find(".trend tr").each(function(e,r){t(r).find("td").each(function(e,r){var o=t(r).attr("modular"),i=t(r).next().attr("modular");/period_/g.test(o)?0==/period_/g.test(i)&&t(r).css({"border-right-width":a+"px","border-right-color":n}):/result_/g.test(o)?0==/result_/g.test(i)&&t(r).css({"border-right-width":a+"px","border-right-color":n}):o!==i&&void 0!=i&&t(r).css({"border-right-width":a+"px","border-right-color":n})})})},n.addPreselectionZindex=function(){var e=t("#preselectionButton").parent().find(".npb-ulB").length;void 0!=e&&t("#preselectionButton").parent().find(".npb-ulB").each(function(a,n){t(n).css({"z-index":e--})})},n.addTotalStyle=function(e){t(e).find("td").each(function(e,a){1!=t(a).attr("column")&&n.changeHotAndColdColor(t(a),5,12,13)})},n.addTotalStyle2=function(e){t(e).find("td").each(function(e,a){1!=t(a).attr("column")&&([2,3,4,5].Contains(t(a).attr("column"))?n.changeHotAndColdColor(t(a),8,12,13):6==t(a).attr("column")?n.changeHotAndColdColor(t(a),32,37,38):7==t(a).attr("column")?n.changeHotAndColdColor(t(a),43,47,48):[8,9,10,11,12,13].Contains(t(a).attr("column"))&&n.changeHotAndColdColor(t(a),7,20,21))})},n.changeHotAndColdColor=function(t,e,a,n){parseInt(t.attr("data-value"))<=e?t.addClass(r.bgBoxStyle.bgBoxGreen):parseInt(t.attr("data-value"))>e&&parseInt(t.attr("data-value"))<=a?t.addClass(r.bgBoxStyle.bgBoxGray):parseInt(t.attr("data-value"))>=n&&t.addClass(r.bgBoxStyle.bgBoxRed)},n.getCookie=function(a,r,o,i){var s=t("#mainContainer").attr("data-lotteryCode");-1==a.indexOf("_")&&(a=a+"_"+s);var d,l=e.getCookie(a),c=parseInt(t("#mainContainer").attr("data-flot"));if(l){var u=JSON.parse(l);if(void 0!=u[s][c]&&u[s][c].length>0){t("#preselectionButton").html("隐藏预选号码");for(var f in u)if(f==s){d=u[f][c];for(var m=0;m<d.length;m++)t("#preselectionButton").parent().append(n.addPreselection(r,o,i));t("#preselectionButton").parent().find(".npb-ulB").each(function(e,a){t(a).find(".npb-liB").each(function(a,n){t(n).parent().find(".selectedText").html(u[s][c][e].period),t(n).find(".num").each(function(n,r){if(0==a){for(var o=0;o<d[e].frontArea.length;o++)if(d[e].frontArea[o]==parseInt(t(r).html())){if(t(r).addClass("active"),t(r).attr("data-size","1"),d[e].frontCount.length>0){var i=d[e].frontCount[o];t(r).attr("data-size",i),i>1?t(r).html(d[e].frontArea[o]+"<i class='small-"+d[e].frontCount[o]+"'></i>"):t(r).html(d[e].frontArea[o])}break}}else for(var o=0;o<d[e].backArea.length;o++)if(d[e].backArea[o]==parseInt(t(r).html())){t(r).addClass("active");break}})})})}}}n.addPreselectionZindex()},n.setCookie=function(a){var n,r,o,i=[];if(n=parseInt(t("#mainContainer").attr("data-flot")),r=t("#mainContainer").attr("data-lotteryCode"),a=a+"_"+r,o=e.getCookie(a),t(".lt-numPrimaryBlock .npb-ulB").each(function(e,a){var n={},r=[],o=[],s=[],d=[];t(a).find(".npb-liB").each(function(e,a){d=t(a).parents(".npb-ulB").find(".selectedText").html(),t(a).find(".active").each(function(a,n){0==e?(r.push(parseInt(t(n).html())),s.push(parseInt(t(n).attr("data-size")))):1==e&&o.push(parseInt(t(n).html()))})}),n.period=d,n.frontArea=r,n.frontCount=s,n.backArea=o,i.push(n)}),void 0==o){var s={};s[r]={},s[r][n]=i}else{o=JSON.parse(o);for(var d in o)if(d==r){o[d][n]=i,s=o;break}}e.setCookie(a,JSON.stringify(s))},n.preselection=function(e){t("#preselectionButton").hide()},n.PrefixInteger=function(t,e){return(Array(e).join(0)+t).slice(-e)},n.IssueList=function(e){var a=1,n=t("#mainContainer").attr("data-lotteryCode");void 0!=t("#maxPeriod").attr("data-max")&&(a=parseInt(t("#maxPeriod").attr("data-max")));var r="";if(1==a||"bjk3"==n)for(var o=parseInt(e),i=0;i<10;i++)r+='<span class="lis" data-code="">'+o+"</span>",o++;else{var s,d,l,c=e.substring(0,e.length-3),u=0;if("gxkl10"==n){c=e.substring(0,e.length-2),u=parseInt(e.substring(e.length-2,e.length)),s=parseInt(c.substring(0,4)),l=parseInt(c.substring(4,7)),d="";for(var i=0;i<10;i++)u>a?(u=1,l+=1,r+='<span class="lis" data-code="">'+s+this.PrefixInteger(l,3)+"01</span>"):r+='<span class="lis" data-code="">'+s+l+this.PrefixInteger(u,2)+"</span>",u++}else{u=parseInt(e.substring(e.length-3,e.length)),s=c.substring(0,4),d=c.substring(4,6),l=c.substring(6,8);for(var f=new Date(s,d,l),i=0;i<10;i++)u>a?(f.setDate(parseInt(l)+1),u=1,r+='<span class="lis" data-code="">'+f.getFullYear()+f.getMonth()+1+f.getDate()+"001</span>"):(c=f.getFullYear()+""+f.getMonth()+1+f.getDate(),r+='<span class="lis" data-code="">'+c+this.PrefixInteger(u,3)+"</span>"),u++}}return r},n.addPreselection=function(e,a,r){void 0==e&&(e=1);var o="",i=n.dealWithAreaString(a),s="",d=t(".next-period").html().replace("期",""),l="";l=this.IssueList(d);for(var c=0;c<i.length;c++)s+='<span class="num" data-size="0" data-value="'+i[c]+'">'+i[c]+"</span>";if(1==e&&void 0!=a)o+='<div class="npb-ulB"><div class="public_selectPlugIn"><span class="selectArrow"></span><span class="selectedText">'+d+'</span><div class="selectOption" style="display: none;">'+l+'</div></div><div class="npb-liB  frontArea" data-max='+a.maxNumber+" data-more="+(void 0==a.more?"false":"true")+'><span class="text">前区预选：</span><div class="number">'+s+'</div><div class="tool"><a href="javascript:void(0)" class="clearNumber">清空号码</a><i>|</i><a href="javascript:void(0)" class="addNumber">增加一行</a><i>|</i><a href="javascript:void(0)" class="deleteNumber">删除行</a></div></div></div>';else if(2==e&&void 0!=r){for(var u=n.dealWithAreaString(r),f="",c=0;c<u.length;c++)f+='<i class="num">'+u[c]+"</i>";o+='<div class="npb-ulB"><div class="public_selectPlugIn"><span class="selectArrow"></span><span class="selectedText">'+d+'</span><div class="selectOption" style="display: none;">'+l+'</div></div><div class="npb-liB frontArea" data-max='+a.maxNumber+'><span class="text">前区预选：</span><div class="number">'+s+'</div></div><div class="npb-liB  backArea" data-max='+r.maxNumber+'><span class="text">后区预选：</span><div class="number">'+f+'</div><div class="tool"><a href="javascript:void(0)" class="clearNumber">清空号码</a><i>|</i><a href="javascript:void(0)" class="addNumber">增加一行</a><i>|</i><a href="javascript:void(0)" class="deleteNumber">删除行</a></div></div></div>'}return o},n.dealWithAreaString=function(t){if(void 0==t)return void console.error("dealWithAreaString：参数不能为空！");var e=[],a="";if(void 0!=t.number)if(/\~/g.test(t.number)){a=t.number.replace(/(^\s*)|(\s*$)/g,"").split("~");for(var n=parseInt(a[0]);n<=parseInt(a[1]);n++)e.push(n)}else if(/\|/g.test(t.number)){a=t.number.replace(/(^\s*)|(\s*$)/g,"").split("|");for(var n=0;n<a.length;n++)e.push(n)}return e},n.addTypeAwardBlue=function(e){return t(".trend [modular="+e+"]").each(function(e,a){for(var n="",r=t(a).attr("data-value"),o=r.split(","),i=0;i<o.length;i++)"合"==o[i]||"小"==o[i]||"偶"==o[i]?n+='<i class="font-blue">'+o[i]+"</i>":n+='<i class="font-red">'+o[i]+"</i>";t(a).html(n)}),!1},n.addBigAward=function(e,a){return 1,t(e).find(".trend tr").each(function(e,a){t(a).find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))&&parseInt(t(a).find("span").html())>18){var n=t(a).find("span");n.removeClass(r.fontStyle.fontBlue),n.addClass(r.fontStyle.fontRed)}})}),!1},n.addSamePeriod=function(e,a,o,i){var s=parseInt(t("#mainContainer").attr("data-flot")),d=[10,11,13,14,16,17],l=[30,31];void 0==a&&(a=2),o=void 0==o?"":o,t(e).find(".trend tr").each(function(e,c){var u,f=[];""==o?t(c).find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))&&(f.push({data:parseInt(t(a).find("span").html()),tdDom:t(a)}),0==/result_/g.test(t(a).next().attr("modular"))))return!1}):t(c).find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))){var n=parseInt(t(a).attr("modular").split("_")[1]);if(d.Contains(s)?0!==n&&1!==n&&2!==n&&f.push({data:parseInt(t(a).find(".sscStar").html()),tdDom:t(a)}):l.Contains(s)&&0!==n&&1!==n&&f.push({data:parseInt(t(a).find(".sscStar").html()),tdDom:t(a)}),0==/result_/g.test(t(a).next().attr("modular")))return!1}}),u=n.getSamePeriod(f);for(var m=0;m<u.length;m++)o||(2==u[m].count?u[m].tdDomArr[0].parent().find("td").each(function(e,a){if(/result_/g.test(t(a).attr("modular"))&&(t(a).find("span").addClass(r.fontStyle.fontRed),0==/result_/g.test(t(a).next().attr("modular"))))return!1}):u[m].count>2&&u[m].tdDomArr[0].parent().find("td").each(function(e,a){var n="";if(n=o?r.fontStyle.fontRed:r.fontStyle.fontPurple,/result_/g.test(t(a).attr("modular"))&&(t(a).find("span").addClass(n),0==/result_/g.test(t(a).next().attr("modular"))))return!1}));2==a&&t(c).find("td").each(function(e,a){if(t(a).attr("modular")==(i||"data_0"))for(var n=0;n<u.length;n++)for(var o=0;o<u[n].tdDomArr.length;o++)if(2==u[n].count){if(parseInt(t(a).find("span").html())==u[n].num&&t(a).hasClass(t(a).attr("css-awardnumber"))&&t(a).removeAttr("class").addClass(r.ballStyle.ballRed).find("span").append('<i class="small-2"></i>'),t(a).attr("modular")!=(i||"data_0"))return!1}else if(u[n].count>2&&(parseInt(t(a).find("span").html())==u[n].num&&t(a).hasClass(t(a).attr("css-awardnumber"))&&t(a).removeAttr("class").addClass(r.ballStyle.ballPurple).find("span").append('<i class="small-'+u[n].count+'"></i>'),t(a).attr("modular")!=(i||"data_0")))return!1})})},n.getSamePeriod=function(t){var e=[];t.sort(n.sortBy("data",!1));for(var a=0;a<t.length;){for(var r=0,o=[],i=a;i<t.length;i++)t[a].data==t[i].data&&(r++,r>=2?o.push(t[i].tdDom):o.push(t[a].tdDom));e.push({num:t[a].data,count:r,tdDomArr:o}),a+=r}return e},n.sortBy=function(t,e){return e=void 0==e?1:e?1:-1,function(a,n){var r=parseFloat(a[t]),o=parseFloat(n[t]);return r<o?-1*e:r>o?1*e:0}},n.changeSscWord=function(e){63==e?t(".trend .bigToSmall").each(function(){["8","11","14","17","20"].Contains(t(this).attr("column").toString())?(t(this).addClass("bg-box-red"),t(this).find("span").html("大")):(t(this).addClass("bg-box-blue"),t(this).find("span").html("小"))}):64==e&&t(".trend .oddToEven").each(function(){["8","11","14","17","20"].Contains(t(this).attr("column").toString())?(t(this).addClass("bg-box-red"),t(this).find("span").html("单")):(t(this).addClass("bg-box-blue"),t(this).find("span").html("双"))})},n.changeSscNum=function(){t(".trend tr").each(function(){var e=t(this).find(".specialRedNum").find("span").html();t(this).find(".specialBlueNum").find("span").html(e)})},n.addHotColdNumer=function(e){var a,n,o=t("#periodCount").val().split("|");switch(e){case"100":a=41,n=35;break;case"101":a=20,n=13;break;case"102":a=8,n=3;break;case"103":a=3,n=0;break;case"104":a=2,n=0;break;case"105":case"110":case"114":a=8,n=4;break;case"106":a=20,n=9;break;case"107":a=9,n=6;break;case"108":a=3,n=0;break;case"109":a=3,n=1;break;case"111":case"115":a=15,n=7;break;case"112":case"113":a=2,n=0}for(var i=0;i<o.length;i++)t('[data-cloumn="'+(i+2)+'"]').each(function(){var e=parseInt(t(this).data("value"));e&&(e>=a?t(this).parent().addClass(r.bgBoxStyle.bgBoxRed):e<=n?e>0&&t(this).parent().addClass(r.bgBoxStyle.bgBoxGreen):t(this).parent().addClass(r.bgBoxStyle.bgBoxGray))})},n.addSegmenting=function(e,a,n){t(e).find(".trend tr:nth-child("+n+"n)").each(function(e,n){t(n).addClass(a)})},n.removeSegmenting=function(e,a){t(e).find(".trend tr").each(function(e,n){t(n).removeClass(a)})},n.openBrokenLine=function(e){t(e).show()},n.closeBrokenLine=function(e){t(e).hide()},n.clearOmissionDelaminationEvent=function(e){t(e).find(".trend tr").each(function(e,a){t(a).find("td").each(function(e,a){t(a).removeClass(t(a).attr("css-omissiondelamination"))})})},n.omissionDelaminationEvent=function(e){for(var a=t(e),n=parseInt(a.find('.trend tr:last td[modular="data_0"]:first').attr("column")),r=parseInt(a.find(".trend tr:first").find("[css-omissiondelamination]:last").attr("column")),o=n;o<=r;o++)for(var i=t('.trend [column="'+o+'"]'),s=i.length,d=s-1;d>=0;d--){var l=i.eq(d),c=parseInt(l.attr("data-value")?l.attr("data-value"):0);if(!(c>0))break;l.addClass(l.attr("css-omissiondelamination"))}},n.serialNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).prev(),r=t(a).next(),o=t(a).attr("css-serialNumber");t(a).attr("css-awardNumber")&&n.attr("css-awardNumber")&&t(a).attr("modular")==n.attr("modular")&&(t(a).addClass(o),n.addClass(o)),t(a).attr("css-awardNumber")&&r.attr("css-awardNumber")&&t(a).attr("modular")==r.attr("modular")&&(t(a).addClass(o),r.addClass(o))})},n.clearSerialNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).attr("css-serialNumber");t(a).removeClass(n)})},n.edgeNumberEvent=function(e){t(e).find(".trend tr").each(function(a,n){t(n).find("td").each(function(n,r){var o=t(r).attr("css-edgeNumber");if(o&&t(r).attr("css-awardNumber")){var i=parseInt(t(r).attr("column"))-1,s=a;if(t(e).find(".trend tr").length-1==s){var d=t(e).find(".trend tr").eq(s-1).find("td").eq(i-1),l=t(e).find(".trend tr").eq(s-1).find("td").eq(i+1);d.attr("css-awardNumber")&&t(r).attr("modular")==d.attr("modular")&&t(r).addClass(o),l.attr("css-awardNumber")&&t(r).attr("modular")==d.attr("modular")&&t(r).addClass(o)}else{var c=t(e).find(".trend tr").eq(s+1).find("td").eq(i-1),u=t(e).find(".trend tr").eq(s+1).find("td").eq(i+1);c.attr("css-awardNumber")&&t(r).attr("modular")==c.attr("modular")&&(t(r).addClass(o),c.addClass(o)),u.attr("css-awardNumber")&&t(r).attr("modular")==u.attr("modular")&&(t(r).addClass(o),u.addClass(o))}}})})},n.clearEdgeNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).attr("css-edgeNumber");t(a).removeClass(n)})},n.serialTwoNumberEvent=function(e){t(e).find(".trend tr").each(function(a,n){t(n).find("td").each(function(n,r){var o=t(r).attr("css-edgeTwoNumber");if(o&&t(r).attr("css-awardNumber")){var i=parseInt(t(r).attr("column"))-1,s=a;if(t(e).find(".trend tr").length-1==s){var d=t(e).find(".trend tr").eq(s-2).find("td").eq(i-2),l=t(e).find(".trend tr").eq(s-2).find("td").eq(i+2);d.attr("css-awardNumber")&&t(r).attr("modular")==d.attr("modular")&&t(r).addClass(o),l.attr("css-awardNumber")&&t(r).attr("modular")==d.attr("modular")&&t(r).addClass(o)}else{var c=t(e).find(".trend tr").eq(s+2).find("td").eq(i-2),u=t(e).find(".trend tr").eq(s+2).find("td").eq(i+2);c.attr("css-awardNumber")&&t(r).attr("modular")==c.attr("modular")&&(t(r).addClass(o),c.addClass(o)),u.attr("css-awardNumber")&&t(r).attr("modular")==u.attr("modular")&&(t(r).addClass(o),u.addClass(o))}}})})},n.omissionNumberEvent=function(e,a){t(e).find(".trend td").each(function(e,n){var r=t(n).attr("data-value");r&&void 0==t(n).attr("css-awardNumber")&&(a||void 0==t(n).attr("css-omissiondelamination")?t(n).find("span").html(r):t(n).find("span").html(""))})},n.clearHeavyNumberEvent=function(e){t(e).find(".trend td").each(function(e,a){var n=t(a).attr("css-heavyNumber");t(a).removeClass(n)})},n.heavyNumberEvent=function(e){t(e).find(".trend tr").each(function(a,n){t(n).find("td").each(function(n,r){var o=t(r).attr("css-heavyNumber");if(o&&t(r).attr("css-heavyNumber")){var i=parseInt(t(r).attr("column"))-1,s=a;t(e).find(".trend tr").eq(s+1).find("td").eq(i).attr("css-awardNumber")?(t(r).addClass(o),t(e).find(".trend tr").eq(s+1).find("td").eq(i).addClass(o)):t(e).find(".trend tr").length-1==s&&t(e).find(".trend tr").eq(s-1).find("td").eq(i).attr("css-awardNumber")&&t(r).addClass(o)}})})},n.sortColumn=function(e,r,o){var i=[];t(e).find("tbody").eq(0).find("tr").each(function(e,a){t(a).find("td").each(function(e,a){e==r&&i.push({value:parseFloat(t(a).attr("data-value")),domObject:t(a).parent()})})});for(var s=i.sort(n.sortBy("value",o)),d="",l=0;l<s.length;l++)d+="<tr>"+s[l].domObject.html()+"</tr>";t(e).find("tbody").eq(0).html(d),window.setTimeout(function(){a.emit("sortComplate_changeStateComponent")},30)},n.sortBy=function(t,e){return e=void 0==e?1:e?1:-1,function(a,n){
var r=parseFloat(a[t]),o=parseFloat(n[t]);return r<o?-1*e:r>o?1*e:0}},n}),define("core/views/containers/hmtj/index.container",["underscore","jquery","backbone","String","../../../services/event.service","../public/timer.container","../../../actions/public/lottery.action","../../../actions/hmtj/hmtj.action","../../publicComponent/public/loading.component","../../publicComponent/chart/changeState.component"],function(t,e,a,n,r,o,i,s,d,l){var c={initialize:function(t,a,n,l,u,f){o.initialize(t,"history"),i.initialize(t,"digit"),s.initialize(),c.lotteryCode=t,c.stype=a,c.isDetail=u,c.quantity=10,u&&(c.expertId=f),n&&i.loopResult(nowPeriod);new d;r.on("awardHTML_lotteryAction",function(t){e(".public-lotteryLatestInfo").html(t.timer),r.emit("createLoading_loadingComponent"),c.isDetail?s.requestHmtjDetail(c.lotteryCode,c.stype,c.expertId,c.quantity,function(t){r.emit("delLoading_loadingComponent"),e(".expertsRecommendBlock").html(t.html),"fc3d"!=c.lotteryCode&&"pl3"!=c.lotteryCode||c.addCornerMarker()}):s.requestHmtj(c.lotteryCode,c.stype,c.quantity,function(t){r.emit("delLoading_loadingComponent"),e(".main-expertsRecommendPage").html(t.html),"fc3d"!=c.lotteryCode&&"pl3"!=c.lotteryCode||c.addCornerMarker()})}),"fc3d"!=c.lotteryCode&&"pl3"!=c.lotteryCode||c.addCornerMarker(),this.initEvent()},initEvent:function(){e("body").on("mouseover",".nameBlock a",function(){e(this).parent().parent().find("span").css("color","#e33d3d")}),e("body").on("mouseout",".nameBlock a",function(){e(this).parent().parent().find("span").css("color","#333333")}),e("body").on("click",".afb-titleB .title",function(){var t=e(this);e(".afb-titleB .title").removeClass("active"),t.addClass("active");var a=t.attr("data-type");e(".public-allFunBlock .afb-contentB").hide(),e("#"+a).show()}),e("body").on("click",".public_selectPlugIn",function(){var t=e(this);t.hasClass("active")?(t.removeClass("active"),t.find(".selectOption").hide()):(t.addClass("active"),t.find(".selectOption").show())}),e("body").on("click",".public_selectPlugIn  .lis",function(){var t=e(this);c.quantity=parseInt(t.attr("data-num")),t.parents(".public_selectPlugIn").find(".selectedText").html(t.html()),r.emit("createLoading_loadingComponent"),c.isDetail?s.requestHmtjDetail(c.lotteryCode,c.stype,c.expertId,c.quantity,function(t){r.emit("delLoading_loadingComponent"),e(".expertsRecommendBlock").html(t.html),"fc3d"!=c.lotteryCode&&"pl3"!=c.lotteryCode||c.addCornerMarker()}):s.requestHmtj(c.lotteryCode,c.stype,c.quantity,function(t){r.emit("delLoading_loadingComponent"),e(".main-expertsRecommendPage").html(t.html),"fc3d"!=c.lotteryCode&&"pl3"!=c.lotteryCode||c.addCornerMarker()})}),e("body").on("click",".lt-tableThBlock",function(){var t,a,n;e(this).find(".top").hasClass("active")?(e(this).find(".top").removeClass("active"),e(this).find(".bottom").addClass("active"),t=!1):(e(this).find(".top").addClass("active"),e(this).find(".bottom").removeClass("active"),t=!0),a=e(this).parent().index(),n=e(this).parents(".erb-lis").index(),l.sortColumn(".public-table table:eq("+n+")",a,t)})},requestHmtjDetail:function(t,e,a,n,r){s.requestHmtjDetail(t,e,a,n,r)},requestHmtj:function(t,e,a,n){s.requestHmtj(t,e,a,n)},addCornerMarker:function(){e(".public-table tr:gt(1)").each(function(t,a){e(a).find("td:gt(1)").not(":last-child").each(function(t,a){var n=parseInt(e(a).attr("data-awardnumber"));e(a).find(".font-red").length==n&&e(a).addClass("bg-selected")})})}};return c});