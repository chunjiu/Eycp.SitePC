define(["underscore","jquery","backbone","WdatePicker","Date","../../../services/event.service","../../publicComponent/public/loading.component"],function(e,t,a,i,o,n,c){return{initialize:function(){this.initEvent(),new c},initEvent:function(){var e=this;t(document).on("click","label.public-checkboxBlock",function(){t(this).find(".checkbox").hasClass("active")?(t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red")):(t(".checkbox").removeClass("active"),t(this).find(".checkbox").addClass("active"),n.emit("checkBoxChange_historyContainer",t(this).attr("data-value")))}),t(document).on("click",".lh-funBtn.clear",function(){t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red")}),t(document).on("click",".exportBlock .lh-funBtn,.explainBlock .lh-funBtn",function(){var e=t(this).parent().find(".lh-superposedLayer");"none"==e.css("display")?e.show():e.hide()}),t(document).on("click",".openLight",this.openLight),t(document).on("click",".closeLight",this.closeLight),t(document).on("click",".newTab",function(){window.open(window.location.href)}),t(document).on("click","#txtDate",function(){var a=e.minDate();WdatePicker({skin:"twoer",dateFmt:"yyyy-MM-dd",maxDate:t("#txtHistoryLength").val()>0?"%y-%M-%d":"%y-%M-{%d-1}",minDate:a,onpicked:function(){n.emit("createLoading_loadingComponent"),n.emit("datePickerChange_historyContainer",this.value),t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red")}})}),t(document).on("click",".date-left",function(){var e=t("#txtDate").val().replace(/-/g,"/"),a=new Date(e);((new Date).getTime()-a.getTime())/864e5<=6&&(a.setDate(a.getDate()-1),t("#txtDate").val(a.format("yyyy-MM-dd")),n.emit("createLoading_loadingComponent"),n.emit("datePickerChange_historyContainer",t("#txtDate").val()),t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red"))}),t(document).on("click",".date-right",function(){var e=t("#txtDate").val().replace(/-/g,"/"),a=new Date(e),i=new Date;(a.getTime()-i.getTime())/864e5<-1&&(a.setDate(a.getDate()+1),t("#txtDate").val(a.format("yyyy-MM-dd")),n.emit("createLoading_loadingComponent"),n.emit("datePickerChange_historyContainer",t("#txtDate").val()),t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red"))}),t(document).on("click",".public_selectPlugIn",function(e){"block"==t(this).find(".selectOption").css("display")?t(this).find(".selectOption").hide():t(this).find(".selectOption").show(),e.stopPropagation()}),t(document).on("click",".selectOption .lis",function(e){t(this).parent().parent().find(".selectedText").html(t(this).html()).attr("data-value",t(this).attr("data-value")),t(this).parent().hide(),e.stopPropagation()}),t(document).on("click","body",function(){t(".selectOption").hide()}),t(document).on("click",".week-day",function(){t(".week-day").removeClass("active"),t(this).addClass("active"),n.emit("createLoading_loadingComponent"),n.emit("digitQuery_historyContainer",{day:t(this).attr("data-value"),year:t("#currYear").attr("data-value")}),t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red")}),t(document).on("click","#txtDigitQuery",function(){n.emit("createLoading_loadingComponent"),n.emit("digitQuery_historyContainer",{day:t(".week-day.active").attr("data-value"),year:t("#currYear").attr("data-value")}),t(".checkbox").removeClass("active"),t("td span").removeClass("opacity"),t("td").removeClass("ballBg-red")}),t(document).on("click","[data-export]",function(){var e=t(this).attr("data-export");n.emit("digitExport_historyContainer",{type:e,year:t("#exportYear").attr("data-value")})})},closeLight:function(){t(this).hide(),t(".openLight").show(),t(".lotteryHistoryBlock").css("z-index",11),t(".history-maskLayer").fadeIn(1e3)},openLight:function(){t(".closeLight").show(),t(".openLight").hide(),t(".history-maskLayer").fadeOut(1e3,function(){t(".lotteryHistoryBlock").css("z-index",0)})},minDate:function(){var e=new Date;return e.setDate(e.getDate()-6),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}});